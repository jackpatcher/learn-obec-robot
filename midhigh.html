<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå ‡∏™‡∏û‡∏ê. ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css" rel="stylesheet">
  <!-- 
  <link href="materialdesignicons.min.css" rel="stylesheet">
  -->
  <link href="vuetify.min.css" rel="stylesheet">
  <script src="vue.js"></script>
  <script src="vuetify.js"></script>
  <script src="https://unpkg.com/vue-router@3.5.3/dist/vue-router.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>

  <link rel="manifest" href="manifest.json">
  <style>
    .large-password-field input {
      font-size: 3rem !important;
      letter-spacing: 0.5em !important;
      line-height: 2 !important;
      padding: 20px !important;
    }
    .large-password-field .v-input__slot {
      min-height: 80px !important;
    }
    .large-password-field .v-label {
      font-size: 1.2rem !important;
    }
    .fixed-number {
      font-family: 'Roboto Mono', monospace;
      letter-spacing: 0.05em;
      transition: font-size 0.5s ease-in-out, color 0.3s ease;
    }
    .fullscreen-time {
      font-size:  25vh !important;
      line-height: 1;
      text-align: center;
      margin-top: 0;
      margin-bottom: 20px;
    }
    .fullscreen-millisecond {
      font-size: 15vh !important;
    }
    /* ‡∏Å‡∏£‡∏≠‡∏ö‡∏•‡πâ‡∏≠‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ */
    .timer-box {
      display: inline-block;
      padding: 20px 40px;
      border: 4px solid #1976D2;
      border-radius: 20px;
      background: linear-gradient(145deg, #ffffff, #f5f5f5);
      box-shadow: 
        0 8px 32px rgba(25, 118, 210, 0.2),
        inset 0 2px 4px rgba(255, 255, 255, 0.9);
      position: relative;
      margin: 0 auto;
    }
    .timer-box-orange {
      border-color: #FF9800;
      box-shadow: 
        0 8px 32px rgba(255, 152, 0, 0.2),
        inset 0 2px 4px rgba(255, 255, 255, 0.9);
    }
    .timer-box-green {
      border-color: #4CAF50;
      box-shadow: 
        0 8px 32px rgba(76, 175, 80, 0.2),
        inset 0 2px 4px rgba(255, 255, 255, 0.9);
    }
    .timer-box::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
      border-radius: 20px;
      pointer-events: none;
    }
    .timer-box-fullscreen {
      padding: 40px 80px;
      border-width: 8px;
      border-radius: 40px;
      box-shadow: 
        0 16px 64px rgba(25, 118, 210, 0.3),
        inset 0 4px 8px rgba(255, 255, 255, 0.9);
    }
    .timer-text-label {
      transition: font-size 0.5s ease-in-out, margin 0.5s ease-in-out, padding 0.5s ease-in-out;
    }
    .v-card-text {
      transition: padding 0.5s ease-in-out;
    }
    .v-progress-linear {
      transition: height 0.3s ease-in-out;
    }
    .v-progress-linear__determinate {
      transition: width 0.1s linear !important;
    }
    .grid-cell {
      aspect-ratio: 1/1;  /* Each cell is a perfect square */
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.5rem;
      font-weight: bold;
      height: 100%;  /* Ensure full height within the row */
    }
    .grid-container {
      display: grid;
      grid-template-columns: repeat(8, 1fr);  /* 8 equal columns */
      grid-template-rows: repeat(4, 1fr);     /* 4 equal rows */
      gap: 4px;
      height: 20vh;  /* Set a fixed height to maintain aspect ratio */
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
      place-items: center;
    }
    .grid-cell {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
    }
    .wheel-container {
      position: relative;
      width: 100%;
      max-width: 400px;
      margin: 0 auto;
      cursor: pointer;
    }
    #wheelCanvas {
      width: 100%;
      height: auto;
    }
    .wheel-pointer {
      position: absolute;
      top: -15px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-top: 30px solid red;
      z-index: 10;
    }
    
    /* Field Grid Styles */
    .field-grid-container {
      display: inline-block;
      border: 3px solid #333;
      background: #f5f5f5;
    }
    .field-grid-row {
      display: flex;
    }
    .field-grid-cell {
      width: 120px;
      height: 120px;
      border: 1px dashed #ddd;
      background: #f8f8f8;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
      cursor: pointer;
    }
    .field-grid-cell:hover {
      background: #e3f2fd;
    }
    .cell-occupied {
      opacity: 1;
    }
    .cell-occupied:hover {
      background: #fff3cd;
    }
    .cell-label {
      font-size: 10px;
      color: #999;
      position: absolute;
      top: 2px;
      left: 2px;
      display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏•‡∏Ç‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏™‡∏ô‡∏≤‡∏° */
    }
    
    /* Block Preview Styles */
    .block-preview {
      cursor: move;
      display: inline-block;
      padding: 5px;
      border: 2px dashed #999;
      border-radius: 4px;
      background: #fafafa;
      transition: all 0.2s;
    }
    .block-preview:hover {
      border-color: #1976d2;
      background: #e3f2fd;
    }
    .block-placed {
      cursor: not-allowed;
      opacity: 0.3;
      filter: grayscale(100%);
    }
    
    /* New Field Block Styles */
    .blocks-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    
    .field-block {
      width: 40px;
      height: 40px;
      background: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    
    .field-block:hover {
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    
    .field-block.block-placed {
      opacity: 0.5;
    }
    
    .block-number {
      position: absolute;
      top: 2px;
      left: 2px;
      font-size: 9px;
      font-weight: bold;
      color: #999;
      background: rgba(255, 255, 255, 0.8);
      padding: 1px 3px;
      border-radius: 2px;
      user-select: none;
      pointer-events: none;
      z-index: 10;
    }
    
    /* Border styles for each block type */
    .block-border-all {
      border: 4px solid #000;
    }
    
    .block-border-bottom {
      border-bottom: 4px solid #000;
    }
    
    .block-border-right {
      border-right: 4px solid #000;
    }
    
    .block-border-top-right {
      border-top: 4px solid #000;
      border-right: 4px solid #000;
    }
    
    .block-border-bottom-right {
      border-bottom: 4px solid #000;
      border-right: 4px solid #000;
    }
    
    .block-border-left {
      border-left: 4px solid #000;
    }
    
    .block-border-top-left {
      border-top: 4px solid #000;
      border-left: 4px solid #000;
    }
    
    .block-border-bottom-left {
      border-bottom: 4px solid #000;
      border-left: 4px solid #000;
    }
    
    .block-border-top {
      border-top: 4px solid #000;
    }
    
    .block-border-top-bottom {
      border-top: 4px solid #000;
      border-bottom: 4px solid #000;
    }
    
    .block-border-none {
      border: none;
    }
    
    .block-border-top-left-bottom {
      border-top: 4px solid #000;
      border-left: 4px solid #000;
      border-bottom: 4px solid #000;
    }
    
    .block-border-top-right-bottom {
      border-top: 4px solid #000;
      border-right: 4px solid #000;
      border-bottom: 4px solid #000;
    }
    
    .block-border-top-right-left {
      border-top: 4px solid #000;
      border-right: 4px solid #000;
      border-left: 4px solid #000;
    }
    
    .block-border-bottom-right-left {
      border-bottom: 4px solid #000;
      border-right: 4px solid #000;
      border-left: 4px solid #000;
    }
    
    .block-border-left-right {
      border-left: 4px solid #000;
      border-right: 4px solid #000;
    }
    
    /* Checkpoint styles */
    .checkpoint-block {
      position: relative;
      background: #f0f0f0 !important;
    }
    
    .checkpoint-block::after {
      content: '';
      position: absolute;
      width: 12px;
      height: 12px;
      background: #FFD700;
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      box-shadow: 0 0 6px rgba(255, 215, 0, 0.5);
      pointer-events: none;
    }
    
    .checkpoint-block.block-placed {
      opacity: 0.4;
      cursor: not-allowed;
    }
    
    .checkpoint-block:not(.block-placed):hover::after {
      background: #FFA500;
      box-shadow: 0 0 15px rgba(255, 165, 0, 0.7);
    }
    
    /* Black Hole (Obstacle) styles - ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≤‡∏ß‡∏°‡∏µ‡πÅ‡∏ñ‡∏ö‡∏î‡∏≥‡πÄ‡∏ï‡πá‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á */
    .blackhole-block {
      background: white !important;
      position: relative;
      border: none !important;
      border-radius: 0px;
      overflow: visible;
    }
    
    .blackhole-block::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 60%;
      height: 100%;
      background: #000;
      pointer-events: none;
    }
    
    .blackhole-block::after {
      content: '';  /* ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° H1 */
      position: absolute;
      font-size: 10px;
      font-weight: bold;
      color: #fff;
      text-shadow: 0 0 3px rgba(255, 255, 255, 0.8);
      top: 5px;
      left: 5px;
      z-index: 1;
    }
    
    .blackhole-block.block-placed {
      opacity: 0.5;
    }
    
    /* Ball (Stick) styles - ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏≤‡∏á‡∏Ç‡∏≤‡∏ß‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ 7 ‡πÄ‡∏™‡πâ‡∏ô‡∏™‡πâ‡∏°‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô */
    .ball-block {
      background: white !important;
      position: relative;
      border: none !important;
      border-radius: 0px;
      overflow: visible;
    }
    
    .ball-block::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 60%;
      height: 100%;
      background: repeating-linear-gradient(
        90deg,
        #FF6600 0px,
        #FF6600 2px,
        transparent 2px,
        transparent 8px
      );
      background-size: 56px 100%;
      background-position: center;
      pointer-events: none;
      z-index: 0;
    }
    
    /* Label for ball block */
    .ball-block::after {
      content: '';  /* ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° S */
      position: absolute;
      font-size: 10px;
      font-weight: bold;
      color: #FF6600;
      top: 5px;
      left: 5px;
      z-index: 1;
    }
    
    .ball-block.block-placed {
      opacity: 0.4;
    }
    
    /* Clickable badge hover effect */
    .v-chip[style*="cursor: pointer"]:hover {
      opacity: 0.85;
      transform: scale(1.05);
      transition: all 0.2s ease;
    }
    
    .v-chip[style*="cursor: pointer"] {
      transition: all 0.2s ease;
    }
    
    /* Bridge Block styles - 3 ‡∏ä‡πà‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô ‡∏°‡∏µ‡πÄ‡∏™‡πâ‡∏ô 2 ‡∏Ç‡πâ‡∏≤‡∏á‡∏¢‡∏≤‡∏ß */
    .bridge-block {
      background: white !important;
      position: relative;
      border: none !important;
      border-radius: 0px;
      overflow: visible;
      width: 120px !important; /* 3 ‡∏ä‡πà‡∏≠‡∏á x 40px */
      height: 40px !important;
    }
    
    .bridge-block::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-top: 4px solid #000;
      border-bottom: 4px solid #000;
      pointer-events: none;
      z-index: 0;
    }
    
    .bridge-block::after {
      content: '‡∏™‡∏∞‡∏û‡∏≤‡∏ô';  /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å BR1 ‡πÄ‡∏õ‡πá‡∏ô ‡∏™‡∏∞‡∏û‡∏≤‡∏ô */
      position: absolute;
      font-size: 10px;
      font-weight: bold;
      color: #000;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1;
    }
    
    .bridge-block.block-placed {
      opacity: 0.4;
    }
    
    /* Rotation classes for checkpoint, obstacle and ball */
    .checkpoint-rotate-0 { transform: rotate(0deg) !important; }
    .checkpoint-rotate-1 { transform: rotate(90deg) !important; }
    .checkpoint-rotate-2 { transform: rotate(180deg) !important; }
    .checkpoint-rotate-3 { transform: rotate(270deg) !important; }
    
    .blackhole-rotate-0 { transform: rotate(0deg); }
    .blackhole-rotate-1 { transform: rotate(90deg); }
    .blackhole-rotate-2 { transform: rotate(180deg); }
    .blackhole-rotate-3 { transform: rotate(270deg); }
    
    .ball-rotate-0 { transform: rotate(0deg); }
    .ball-rotate-1 { transform: rotate(90deg); }
    .ball-rotate-2 { transform: rotate(180deg); }
    .ball-rotate-3 { transform: rotate(270deg); }
    
    .bridge-rotate-0 { transform: rotate(0deg); }
    .bridge-rotate-1 { transform: rotate(90deg); }
    .bridge-rotate-2 { transform: rotate(180deg); }
    .bridge-rotate-3 { transform: rotate(270deg); }
    
    .zone-rotate-0 { transform: rotate(0deg); }
    .zone-rotate-1 { transform: rotate(90deg); }
    .zone-rotate-2 { transform: rotate(180deg); }
    .zone-rotate-3 { transform: rotate(270deg); }
    
    /* Zone Color styles - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏≠‡∏ö‡∏°‡∏ô */
    .zone-block {
      position: relative;
      opacity: 0.8;
      border-radius: 0 !important;
      overflow: hidden;
    }
    
    /* Border styles for zones */
    .zone-block.zone-border-left {
      border: none;
      border-left: 4px solid #000 !important;
    }
    
    .zone-block.zone-border-three-sides {
      border: 4px solid #000 !important;
      border-right: none !important;
    }
    
    .zone-block.zone-border-all {
      border: 4px solid #000 !important;
    }
    
    .zone-block:hover {
      opacity: 1;
    }
    
    .zone-block.block-placed {
      opacity: 0.4;
    }
    
    .zone-label {
      position: absolute;
      bottom: 1px;
      left: 2px;
      font-size: 8px;
      font-weight: bold;
      color: #333;
      text-shadow: 1px 1px 2px white;
      z-index: 1;
      display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏µ */
    }
    
    /* START block - ‡∏û‡∏∑‡πâ‡∏ô‡∏Ç‡∏≤‡∏ß ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏™‡∏µ‡πÅ‡∏î‡∏á */
    .start-block {
      position: relative;
      background-color: #FFFFFF;  /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏Ç‡∏≤‡∏ß */
      opacity: 1;  /* ‡πÑ‡∏°‡πà‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á */
      border: none !important;
      border-radius: 0 !important;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .start-block:hover {
      opacity: 1;
      background-color: #f5f5f5;  /* ‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡∏ô‡∏ß‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠ hover */
    }
    
    .start-block.block-placed {
      opacity: 0.5;
    }
    
    .start-label {
      position: absolute;
      font-size: 12px;
      font-weight: bold;
      color: #f44336;  /* ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏™‡∏µ‡πÅ‡∏î‡∏á */
      z-index: 1;
    }
    
    .start-rotate-0 { transform: rotate(0deg); }
    .start-rotate-1 { transform: rotate(90deg); }
    .start-rotate-2 { transform: rotate(180deg); }
    .start-rotate-3 { transform: rotate(270deg); }
    
    .field-grid-wrapper {
      display: flex;
      justify-content: center;
      padding: 20px;
    }
    
    /* ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏µ‡∏° - ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡πÅ‡∏•‡∏∞ responsive */
    .team-card {
      transition: all 0.3s ease;
      border-radius: 8px !important;
      overflow: hidden;
    }
    
    .team-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.2) !important;
    }
    
    .team-card.editable-card:hover {
      border: 2px solid #1976D2;
    }
    
    .team-card .v-card__title {
      border-radius: 8px 8px 0 0;
    }
    /* Make the three metric columns equal-width and centered */
    .team-metrics {
      display: flex;
      width: 100%;
    }
    .team-metrics > .v-col {
      flex: 1 1 33.3333%;
      max-width: 33.3333%;
      padding-left: 4px !important;
      padding-right: 4px !important;
      box-sizing: border-box;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    /* Team card metric alignment */
    .team-card .v-card-text .d-flex.dense .v-col,
    .team-card .v-card-text .v-row .v-col {
      text-align: center;
      padding-left: 4px;
      padding-right: 4px;
    }
    .team-card .v-card-text .v-row > .v-col[cols="4"] {
      width: 33.3333%;
    }

    /* Responsive styles for mobile - ‡∏•‡∏î padding/margin ‡∏Ç‡∏≠‡∏á‡∏ä‡∏≤‡∏£‡πå‡∏ï‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
    @media (max-width: 600px) {
      /* ‡∏•‡∏î padding ‡∏Ç‡∏≠‡∏á v-sheet ‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô */
      .v-sheet.pa-4 {
        padding: 8px !important;
      }
      
      /* ‡∏•‡∏î padding ‡∏Ç‡∏≠‡∏á v-card ‡∏ó‡∏µ‡πà‡∏´‡∏∏‡πâ‡∏°‡∏ä‡∏≤‡∏£‡πå‡∏ï */
      .v-card.pa-4 {
        padding: 4px !important;
      }
      
      /* ‡∏•‡∏î margin-bottom ‡∏Ç‡∏≠‡∏á card ‡∏ä‡∏≤‡∏£‡πå‡∏ï */
      .v-card.mb-6 {
        margin-bottom: 8px !important;
      }
      
      /* ‡∏•‡∏î margin ‡∏Ç‡∏≠‡∏á divider */
      .v-divider.my-4 {
        margin-top: 8px !important;
        margin-bottom: 8px !important;
      }
      
      .v-divider.my-6 {
        margin-top: 12px !important;
        margin-bottom: 12px !important;
      }
      
      /* ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
      .v-card-title.text-h4 {
        font-size: 1.25rem !important;
      }
      
      /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î icon ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πá‡∏Å‡∏•‡∏á‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
      .v-card-title .v-icon.large {
        font-size: 28px !important;
      }
    }
  </style>
</head>
<body>
  <div id="app">
    <v-app>
      <v-app-bar app :color="appBarColor" dark>
        <v-app-bar-nav-icon @click="drawer = !drawer"></v-app-bar-nav-icon>
        <v-toolbar-title>‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå ‡∏™‡∏û‡∏ê ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á </v-toolbar-title>
        <v-spacer></v-spacer>
        <!-- Countdown on AppBar -->
        <v-btn v-if="isCountdownActive" text style="font-size:1.3rem; font-weight:bold; color:#fff; min-width: 90px;" @click="goToCountdownPage">
          <v-icon left color="yellow lighten-3">mdi-timer-outline</v-icon>
          <span style="letter-spacing:1px;">{{ countdownTime }}</span>
        </v-btn>
        <span class="ml-2">‡∏à‡∏¥‡∏£‡∏±‡∏é‡∏ê‡πå ‡∏™‡∏∏‡∏î‡πÉ‡∏à </span>
        <v-btn icon @click="toggleFullscreen">
          <v-icon>mdi-fullscreen</v-icon>
        </v-btn>
      </v-app-bar>

      <v-navigation-drawer 
        v-model="drawer" 
        app 
        :mobile-breakpoint="600" 
        :width="280"
      >
        <v-list nav dense>
          <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å -->
          <v-list-item @click="$router.push({name: 'home'})" :class="{'v-list-item--active primary--text': tab === 'home'}">
            <v-list-item-icon>
              <v-icon :color="tab === 'home' ? 'primary' : ''">mdi-home</v-icon>
            </v-list-item-icon>
            <v-list-item-content>
              <v-list-item-title>‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</v-list-item-title>
            </v-list-item-content>
          </v-list-item>

          <!-- ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç -->
          <v-list-item @click="$router.push({name: 'random'})" :class="{'v-list-item--active primary--text': tab === 'random'}">
            <v-list-item-icon>
              <v-icon :color="tab === 'random' ? 'primary' : ''">mdi-dice-multiple</v-icon>
            </v-list-item-icon>
            <v-list-item-content>
              <v-list-item-title>‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç</v-list-item-title>
            </v-list-item-content>
          </v-list-item>

          <!-- ‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ -->
          <v-list-item @click="$router.push({name: 'timer'})" :class="{'v-list-item--active primary--text': tab === 'timer'}">
            <v-list-item-icon>
              <v-icon :color="tab === 'timer' ? 'primary' : ''">mdi-timer</v-icon>
            </v-list-item-icon>
            <v-list-item-content>
              <v-list-item-title>‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤</v-list-item-title>
            </v-list-item-content>
          </v-list-item>

          <!-- ‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á -->
          <v-list-item @click="$router.push({name: 'countdown'})" :class="{'v-list-item--active primary--text': tab === 'countdown'}">
            <v-list-item-icon>
              <v-icon :color="tab === 'countdown' ? 'primary' : ''">mdi-timer-outline</v-icon>
            </v-list-item-icon>
            <v-list-item-content>
              <v-list-item-title>‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á</v-list-item-title>
            </v-list-item-content>
          </v-list-item>

            <!-- ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á -->
            <v-list-group
              :value="expandedMid"
              @click="expandedMid = !expandedMid"
              no-action
            >
              <template v-slot:activator>
                <v-list-item-icon>
                  <v-icon>mdi-robot</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                  <v-list-item-title>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á</v-list-item-title>
                </v-list-item-content>
              </template>

              <v-list-item @click="$router.push({name: 'mid-rules'})" :class="{'v-list-item--active primary--text': tab === 'mid-rules'}">
                <v-list-item-icon>
                  <v-icon :color="tab === 'mid-rules' ? 'primary' : ''">mdi-file-document</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                  <v-list-item-title>‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤</v-list-item-title>
                </v-list-item-content>
              </v-list-item>

              <v-list-item @click="$router.push({name: 'mid-field'})" :class="{'v-list-item--active primary--text': tab === 'mid-field'}">
                <v-list-item-icon>
                  <v-icon :color="tab === 'mid-field' ? 'primary' : ''">mdi-grid</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                  <v-list-item-title>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏ô‡∏≤‡∏°</v-list-item-title>
                </v-list-item-content>
              </v-list-item>

              <v-list-item @click="$router.push({name: 'mid-timer'})" :class="{'v-list-item--active primary--text': tab === 'mid-timer'}">
                <v-list-item-icon>
                  <v-icon :color="tab === 'mid-timer' ? 'primary' : ''">mdi-clock-fast</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                  <v-list-item-title>‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ 3 ‡∏ô‡∏≤‡∏ó‡∏µ</v-list-item-title>
                </v-list-item-content>
              </v-list-item>

              <v-list-item @click="$router.push({name: 'mid-teams'})" :class="{'v-list-item--active primary--text': tab === 'mid-teams'}">
                <v-list-item-icon>
                  <v-icon :color="tab === 'mid-teams' ? 'primary' : ''">mdi-account-group</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                  <v-list-item-title>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏°</v-list-item-title>
                </v-list-item-content>
              </v-list-item>

              <v-list-item @click="$router.push({name: 'mid-results'})" :class="{'v-list-item--active primary--text': tab === 'mid-results'}">
                <v-list-item-icon>
                  <v-icon :color="tab === 'mid-results' ? 'primary' : ''">mdi-trophy</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                  <v-list-item-title>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</v-list-item-title>
                </v-list-item-content>
              </v-list-item>
            </v-list-group>

            <!-- ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á -->
            <v-list-group
              :value="expandedHigh"
              @click="expandedHigh = !expandedHigh"
              no-action
            >
              <template v-slot:activator>
                <v-list-item-icon>
                  <v-icon>mdi-robot-industrial</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                  <v-list-item-title>‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á</v-list-item-title>
                </v-list-item-content>
              </template>

              <v-list-item @click="$router.push({name: 'high-rules'})" :class="{'v-list-item--active primary--text': tab === 'high-rules'}">
                <v-list-item-icon>
                  <v-icon :color="tab === 'high-rules' ? 'primary' : ''">mdi-file-document</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                  <v-list-item-title>‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤</v-list-item-title>
                </v-list-item-content>
              </v-list-item>

              <v-list-item @click="$router.push({name: 'high-field'})" :class="{'v-list-item--active primary--text': tab === 'high-field'}">
                <v-list-item-icon>
                  <v-icon :color="tab === 'high-field' ? 'primary' : ''">mdi-grid</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                  <v-list-item-title>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏ô‡∏≤‡∏°</v-list-item-title>
                </v-list-item-content>
              </v-list-item>

              <v-list-item @click="$router.push({name: 'high-timer'})" :class="{'v-list-item--active primary--text': tab === 'high-timer'}">
                <v-list-item-icon>
                  <v-icon :color="tab === 'high-timer' ? 'primary' : ''">mdi-clock-fast</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                  <v-list-item-title>‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ 5 ‡∏ô‡∏≤‡∏ó‡∏µ</v-list-item-title>
                </v-list-item-content>
              </v-list-item>

              <v-list-item @click="$router.push({name: 'high-teams'})" :class="{'v-list-item--active primary--text': tab === 'high-teams'}">
                <v-list-item-icon>
                  <v-icon :color="tab === 'high-teams' ? 'primary' : ''">mdi-account-group</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                  <v-list-item-title>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏°</v-list-item-title>
                </v-list-item-content>
              </v-list-item>

              <v-list-item @click="$router.push({name: 'high-results'})" :class="{'v-list-item--active primary--text': tab === 'high-results'}">
                <v-list-item-icon>
                  <v-icon :color="tab === 'high-results' ? 'primary' : ''">mdi-trophy</v-icon>
                </v-list-item-icon>
                <v-list-item-content>
                  <v-list-item-title>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</v-list-item-title>
                </v-list-item-content>
              </v-list-item>
            </v-list-group>
        </v-list>
      </v-navigation-drawer>

      <v-main>
        <v-container fluid>
          <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å -->
          <v-sheet v-if="tab === 'home'" class="d-flex flex-column align-center justify-center fill-height pa-4">
            
              <v-row justify="center">
                <v-col cols="12" md="8">
                  <v-card class="pa-8">
                    <v-card-title class="text-h3 justify-center mb-4">
                      <v-icon large color="primary" class="mr-3">mdi-robot</v-icon>
                      ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå ‡∏™‡∏û‡∏ê.
                    </v-card-title>
                    <v-card-subtitle class="text-h5 text-center mb-6">
                      ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á
                    </v-card-subtitle>
                    <v-divider class="mb-6"></v-divider>
                    <v-card-text class="text-h6">
                      <p class="mb-4">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå</p>
                      <p class="mb-2">‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥:</p>
                      <ul>
                        <li>‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á</li>
                        <li>‡∏™‡∏∏‡πà‡∏°‡∏™‡∏ô‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</li>
                        <li>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏°</li>
                        <li>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</li>
                        <li><a href ="https://www.youtube.com/shorts/5O4e_nQ2o9s" target="_blank">‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á</a></li>
                      </ul>
                    </v-card-text>
                  </v-card>
                </v-col>
              </v-row>
            </v-container>
          </v-sheet>

          <!-- ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç -->
          <v-sheet v-if="tab === 'random'" class="pa-4">
            <v-container fluid>
              <v-row justify="center" class="mb-4">
                <v-col cols="12" class="text-center">
                  <h2 class="text-h4 mb-4">‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç 1-32</h2>
                  <v-btn 
                    color="purple" 
                    @click="shuffleWheelNumbers"
                    :disabled="isRandomRunning"
                    outlined
                  >
                    <v-icon left>mdi-shuffle</v-icon>
                    ‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏•‡∏Ç‡∏ö‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠
                  </v-btn>
                </v-col>
              </v-row>

              <v-row justify="center" align="center">
                <!-- ‡∏ß‡∏á‡∏•‡πâ‡∏≠‡∏´‡∏°‡∏∏‡∏ô -->
                <v-col cols="12" md="6" class="d-flex flex-column align-center">
                  <div class="wheel-container" @click="startRoulette">
                    <div class="wheel-pointer"></div>
                    <canvas 
                      id="wheelCanvas" 
                      width="400" 
                      height="400"
                      ref="wheelCanvas"
                    ></canvas>
                  </div>
                  <div class="text-center mt-4">
                    <div class="text-h3 red--text font-weight-bold" v-if="rouletteNumber">
                      ‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà: {{ rouletteNumber }}
                    </div>
                    <div class="text-subtitle-1 grey--text" v-if="!isRandomRunning">
                      ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ß‡∏á‡∏•‡πâ‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°
                    </div>
                    <div class="text-subtitle-1 primary--text" v-else>
                      ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏∏‡πà‡∏°...
                    </div>
                  </div>
                </v-col>

                <!-- Grid ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ -->
                <v-col cols="12" md="6" class="d-flex justify-center align-center">
                  <div class="grid-container">
                    <v-card 
                      v-for="cell in grid" 
                      :key="cell"
                      :color="getRouletteColor(cell)"
                      class="grid-cell"
                      :class="{'elevation-8': selectedNumbers.includes(cell)}"
                    >
                      {{ cell }}
                    </v-card>
                  </div>
                </v-col>
              </v-row>
            </v-container>
          </v-sheet>

          <!-- ‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ -->
          <v-sheet v-if="tab === 'timer'" class="d-flex flex-column align-center justify-center fill-height pa-4">
            <div class="text-center">
              <div 
                contenteditable="true"
                @blur="updateFullscreenText"
                @input="onTimerTextInput"
                @focus="onTimerTextFocus"
                class="mb-4 grey--text text--darken-1"
                :style="isFullScreen ? 'font-size: 3rem; outline: none; min-height: 3.5rem;' : 'font-size: 1.2rem; outline: none; min-height: 1.5rem;'"
                style="cursor: text;"
                ref="editableTimerText"
              >{{ fullscreenText || '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°' }}</div>
              
              <div 
                v-if="isPreparing"
                :class="isFullScreen ? 'display-1' : 'headline'"
                class="orange--text text--darken-2 font-weight-bold mb-4"
                :style="isFullScreen ? 'font-size: 15vh;' : 'font-size: 5rem;'"
              >
                {{ timerPrepareCountdown }}
              </div>
              
              <div :class="['timer-box', isFullScreen ? 'timer-box-fullscreen' : '']">
                <div :class="['fixed-number', isFullScreen ? 'fullscreen-time' : 'display-3']">
                  {{ formattedTime }}
                </div>
              </div>
              <p>
              <div class="d-inline-flex">
                <v-btn 
                  color="green" 
                  @click="toggleTimer"
                >
                  {{ timerRunning ? '‡∏´‡∏¢‡∏∏‡∏î' : '‡πÄ‡∏£‡∏¥‡πà‡∏°' }}
                </v-btn>
                <v-btn 
                  color="red" 
                  @click="resetTimer"
                >
                  ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
                </v-btn>
              </div>
              </p>

            </div>
          </v-sheet>

          <!-- ‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á -->
          <v-sheet v-if="tab === 'countdown'" class="d-flex flex-column align-center justify-center fill-height pa-4" style="position: relative;">
            <div class="text-center">
              <div 
                contenteditable="true"
                @blur="updateFullscreenText2"
                @input="onTextInput"
                @focus="onTextFocus"
                class="mb-4 grey--text text--darken-1"
                :style="isFullScreen ? 'font-size: 3rem; outline: none; min-height: 3.5rem;' : 'font-size: 1.2rem; outline: none; min-height: 1.5rem;'"
                style="cursor: text;"
                ref="editableText"
              >{{ fullscreenText2 || '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°' }}</div>
              
              <div 
                v-if="isTimeUp && isBlinking"
                :class="isFullScreen ? 'display-2' : 'display-1'"
                class="red--text font-weight-bold mb-4"
                :style="isFullScreen ? 'font-size: 5rem;' : ''"
              >
                ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
              </div>
              
              <div 
                v-if="isCountdownPreparing"
                :class="isFullScreen ? 'display-1' : 'headline'"
                class="orange--text text--darken-2 font-weight-bold mb-4"
                :style="isFullScreen ? 'font-size: 15vh;' : 'font-size: 5rem;'"
              >
                {{ countdownPrepareCountdown }}
              </div>
              
              <div :class="['timer-box', isFullScreen ? 'timer-box-fullscreen' : '']">
                <div 
                  :class="['fixed-number', isFullScreen ? 'fullscreen-time' : 'display-3', countdownColor]"
                >
                  {{ countdownTime }}
                </div>
              </div>
              
              <v-btn 
                icon 
                @click="showTimeInputs = !showTimeInputs"
                class="mt-2"
                :large="isFullScreen"
                :x-large="isFullScreen"
              >
                <v-icon :style="isFullScreen ? 'font-size: 3rem;' : ''">
                  {{ showTimeInputs ? 'mdi-chevron-up' : 'mdi-chevron-down' }}
                </v-icon>
              </v-btn>
              
              <v-row v-if="showTimeInputs" justify="center" :class="isFullScreen ? 'mt-4' : 'mt-4'">
                <v-col cols="auto">
                  <v-text-field
                    v-model.number="inputHours"
                    label="‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á"
                    type="number"
                    min="0"
                    max="23"
                    outlined
                    :dense="!isFullScreen"
                    :style="isFullScreen ? 'width: 200px; font-size: 2rem;' : 'width: 100px;'"
                    :class="isFullScreen ? 'text-h4' : ''"
                  ></v-text-field>
                </v-col>
                <v-col cols="auto">
                  <v-text-field
                    v-model.number="inputMinutes"
                    label="‡∏ô‡∏≤‡∏ó‡∏µ"
                    type="number"
                    min="0"
                    max="59"
                    outlined
                    :dense="!isFullScreen"
                    :style="isFullScreen ? 'width: 200px; font-size: 2rem;' : 'width: 100px;'"
                    :class="isFullScreen ? 'text-h4' : ''"
                  ></v-text-field>
                </v-col>
              </v-row>
              
              <div v-if="showTimeInputs" class="d-inline-flex">
                <v-btn 
                  color="green" 
                  @click="startCountdownFromInput"
                  :large="isFullScreen"
                  :x-large="isFullScreen"
                >
                  ‡πÄ‡∏£‡∏¥‡πà‡∏°
                </v-btn>
                <v-btn 
                  color="red" 
                  @click="resetCountdown"
                  :large="isFullScreen"
                  :x-large="isFullScreen"
                >
                  ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
                </v-btn>
              </div>
            </div>
            
            <!-- Progress Bar ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á -->
            <div 
              v-if="totalCountdownSeconds > 0 && !isCountdownPreparing"
              :style="isFullScreen ? 'position: fixed; bottom: 0; left: 0; right: 0; z-index: 1000;' : 'position: absolute; bottom: 0; left: 0; right: 0;'"
            >
              <v-progress-linear
                :value="countdownProgress"
                :color="countdownProgressColor"
                height="30"
                striped
                reverse
              >
                <template v-slot:default>
                  <strong :style="isFullScreen ? 'font-size: 1.2rem;' : ''">
                    {{ Math.round(countdownProgress) }}%
                  </strong>
                </template>
              </v-progress-linear>
            </div>
          </v-sheet>

          <!-- ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á -->
          <v-sheet v-if="tab === 'mid-rules'" class="pa-4">
            <v-container>
              <v-card class="pa-6">
                <v-card-title class="text-h4 justify-center">
                  <v-icon large color="primary" class="mr-3">mdi-file-document</v-icon>
                  ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á
                </v-card-title>
                <v-divider class="my-4"></v-divider>
                
                <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î PDF -->
                <v-card-text class="text-center mb-4">
                  <v-btn
                    color="primary"
                    large
                    href="https://www.sillapa.net/rule70/robot-70.pdf"
                    target="_blank"
                  >
                    <v-icon left>mdi-file-pdf-box</v-icon>
                    ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤ PDF ‡∏´‡∏ô‡πâ‡∏≤ 27
                  </v-btn>
                </v-card-text>
              <v-card-title class="text-h4 justify-center">
                  <v-icon large color="primary" class="mr-3">mdi-check-circle</v-icon>
                  ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° 
                </v-card-title>

                <v-divider class="my-6"></v-divider>

                <!-- ‡∏ó‡∏≥‡πÑ‡∏î‡πâ -->
                <v-card-text>
                  <h2 class="text-h5 text-center mb-4 green--text text--darken-2">
                    <v-icon color="green darken-2" large>mdi-check-circle</v-icon>
                    DO
                  </h2>
                  <v-row>
                    <v-col cols="12" sm="4">
                      <v-card elevation="2">
                        <v-img src="pic/mgood1.png" aspect-ratio="1.5"></v-img>
                        <v-card-text>1.‡∏ñ‡∏∏‡∏á‡∏¢‡∏±‡∏á‡∏ä‡∏µ‡∏û‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß ‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÑ‡∏î‡πâ 15 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</v-card-text>
                      </v-card>
                    </v-col>
                  
                    <v-col cols="12" sm="4">
                      <v-card elevation="2">
                        <v-img src="pic/mgood2.png" aspect-ratio="1.5"></v-img>
                        <v-card-text>2.‡πÄ‡∏ï‡∏¥‡∏°‡∏ñ‡∏∏‡∏á‡∏¢‡∏±‡∏á‡∏ä‡∏µ‡∏û ‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 10 ‡∏•‡∏π‡∏Å ‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏Ç‡πà‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å ‡∏´‡∏≤‡∏Å ‡∏°‡∏µ‡∏Å‡∏≤‡∏£ ‡∏£‡∏µ‡πÑ‡∏ó‡∏£‡πå ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏•‡πà‡∏ô ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏´‡∏¢‡∏¥‡∏ö‡∏•‡∏π‡∏Å‡∏ó‡∏µ‡πà‡∏´‡∏•‡πà‡∏ô‡∏°‡∏≤‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà ‡∏´‡∏•‡πà‡∏ô‡∏Å‡πà‡∏≠‡∏ô retry ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ</v-card-text>
                      </v-card>
                    </v-col>
                  
                    <v-col cols="12" sm="4">
                      <v-card elevation="2">
                        <v-img src="pic/mgood3.png" aspect-ratio="1.5"></v-img>
                        <v-card-text>3.‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ñ‡∏∏‡∏á‡∏¢‡∏±‡∏á‡∏ä‡∏µ‡∏û ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏∞ 15 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡∏°‡∏µ 4 ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà  ‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏û‡πâ‡∏≠‡∏¢ 15 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡∏°‡∏µ 2 ‡∏à‡∏∏‡∏î ‡∏£‡∏ß‡∏° 90 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏ö‡∏ô‡∏±‡∏™ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏ö 90 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏´‡∏≤‡∏Å‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏à‡∏∞‡πÑ‡∏î‡πâ +10 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô </v-card-text>
                      </v-card>
                    </v-col>
                  
                    <v-col cols="12" sm="4">
                      <v-card elevation="2">
                        <v-img src="pic/mgood4.png" aspect-ratio="1.5"></v-img>
                        <v-card-text>4.‡πÅ‡∏Ç‡πà‡∏á2‡∏£‡∏≠‡∏ö ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î  ‡∏ï‡∏≠‡∏ô‡πÅ‡∏Ç‡πà‡∏á ‡∏à‡∏∞‡∏°‡∏µ‡πÉ‡∏´‡πâ‡∏ã‡πâ‡∏≠‡∏° 1 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏Ç‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á 3 ‡∏ô‡∏≤‡∏ó‡∏µ </v-card-text>
                      </v-card>
                    </v-col>
                  
                    <v-col cols="12" sm="4">
                      <v-card elevation="2">
                        <v-img src="pic/mgood5.png" aspect-ratio="1.5"></v-img>
                        <v-card-text>5.‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏Ç‡πà‡∏á ‡πÅ‡∏¢‡∏Å‡∏ä‡∏¥‡πâ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ ‡∏î‡∏¥‡∏ô‡∏™‡∏≠ ‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤ pc notebook tablet‡∏ó‡∏µ‡πà‡∏ñ‡∏≠‡∏î‡∏ã‡∏¥‡∏° ‡πÑ‡∏î‡πâ  ‡∏´‡πâ‡∏≤‡∏°‡∏ô‡∏≥‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© ‡∏ä‡∏µ‡∏ó ‡∏™‡∏°‡∏∏‡∏î ‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÉ‡∏î‡πÜ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏ô‡∏≤‡∏°</v-card-text>
                      </v-card>
                    </v-col>
                  
                    <v-col cols="12" sm="4">
                      <v-card elevation="2">
                        <v-img src="pic/mgood6.png" aspect-ratio="1.5"></v-img>
                        <v-card-text>6.‡πÅ‡∏ö‡πà‡∏á‡∏á‡∏≤‡∏ô 3 ‡∏Ñ‡∏ô ‡∏°‡∏µ‡∏Ñ‡∏ô‡∏ó‡∏±‡∏Å‡∏ó‡πâ‡∏ß‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô 1 ‡∏Ñ‡∏ô ‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ 1 ‡∏Ñ‡∏ô ‡∏õ‡∏•‡πà‡∏≠‡∏¢ ‡∏´‡∏∏‡πà‡∏ô 1 ‡∏Ñ‡∏ô ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏´‡∏∏‡πà‡∏ô‡πÅ‡∏•‡πâ‡∏ß 3‡∏Ñ‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏°‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡∏Å‡∏±‡∏ô ‡∏î‡∏π‡∏™‡∏ô‡∏≤‡∏°‡πÑ‡∏î‡πâ </v-card-text>
                      </v-card>
                    </v-col>
                  </v-row>
                </v-card-text>

                <v-divider class="my-6"></v-divider>

                <!-- ‡∏ó‡∏≥‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ -->
                <v-card-text>
                  <h2 class="text-h5 text-center mb-4 red--text text--darken-2">
                    <v-icon color="red darken-2" large>mdi-close-circle</v-icon>
                    DONT
                  </h2>
                  <v-row>
                    <v-col cols="12" sm="4">
                      <v-card elevation="2">
                        <v-img src="pic/mbad1.png" aspect-ratio="1.5"></v-img>
                        <v-card-text>1.‡πÄ‡∏´‡∏¢‡∏µ‡∏¢‡∏ö‡∏™‡∏µ‡∏î‡∏≥ ‡∏ô‡∏≤‡∏ô 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ <br>‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö Retry ‡∏ß‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</v-card-text>
                      </v-card>
                    </v-col>
                  
                    <v-col cols="12" sm="4">
                      <v-card elevation="2">
                        <v-img src="pic/mbad2.png" aspect-ratio="1.5"></v-img>
                        <v-card-text>2.‡πÄ‡∏™‡πâ‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡∏´‡∏∏‡πà‡∏ô ‡πÄ‡∏™‡πâ‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡πÑ‡∏°‡πà‡πÇ‡∏î‡∏ô‡∏•‡πâ‡∏≠‡∏î‡πâ‡∏≤‡∏ô‡πÉ‡∏ô   <br>‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö Retry ‡∏ß‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</v-card-text>
                      </v-card>
                    </v-col>
                  
                    <v-col cols="12" sm="4">
                      <v-card elevation="2">
                        <v-img src="pic/mbad3.png" aspect-ratio="1.5"></v-img>
                         <v-card-text>3.‡∏ß‡∏¥‡πà‡∏á‡∏Ç‡πâ‡∏≤‡∏°‡∏™‡∏µ‡∏î‡∏≥‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏ß‡πà‡∏≤ 50% ‡∏Ç‡∏≠‡∏á‡∏´‡∏∏‡πà‡∏ô   <br>‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö Retry ‡∏ß‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</v-card-text>
                      </v-card>
                    </v-col>
                  
                    <v-col cols="12" sm="4">
                      <v-card elevation="2">
                        <v-img src="pic/mbad4.png" aspect-ratio="1.5"></v-img>
                         <v-card-text>4.‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ñ‡∏∏‡∏á‡∏¢‡∏±‡∏á‡∏ä‡∏µ‡∏û ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡∏Å‡∏•‡∏¥‡πâ‡∏á ‡πÑ‡∏°‡πà‡∏ô‡∏¥‡πà‡∏á  <br>‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</v-card-text>
                      </v-card>
                    </v-col>
                  
                    <v-col cols="12" sm="4">
                      <v-card elevation="2">
                        <v-img src="pic/mbad5.png" aspect-ratio="1.5"></v-img>
                         <v-card-text>5.‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ñ‡∏∏‡∏á‡∏¢‡∏±‡∏á‡∏ä‡∏µ‡∏û ‡∏Ç‡πâ‡∏≤‡∏°‡πÄ‡∏™‡πâ‡∏ô‡∏î‡∏≥‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÅ‡∏°‡πâ‡∏à‡∏∞‡∏•‡∏á‡∏ö‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß  <br>‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</v-card-text>
                      </v-card>
                      
                    </v-col>
                    <v-col cols="12" sm="4">
                      <v-card elevation="2">
                        <v-img src="pic/mbad6.png" aspect-ratio="1.5"></v-img>
                        <v-card-text>6.‡∏°‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô ‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏ú‡πà‡∏≤‡∏ô‡∏à‡∏∏‡∏î‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á ‡∏à‡∏∂‡∏á‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô  <br>‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</v-card-text>
                      </v-card>
                    </v-col>
                    <v-col cols="12" sm="4">
                      <v-card elevation="2">
                        <v-img src="pic/mbad7.png" aspect-ratio="1.5"></v-img>
                        <v-card-text>7.‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ 90 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏ï‡πà‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ ‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÅ‡∏ú‡πà‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå   <br>‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö+10 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</v-card-text>
                      </v-card>
                    </v-col>
                    <!-- <v-col cols="12" sm="4">
                      <v-card elevation="2">
                        <v-img src="https://placehold.co/200x150?text=BAD6" aspect-ratio="1.5"></v-img>
                        <v-card-text>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡∏ó‡∏µ‡πà 6</v-card-text>
                      </v-card>
                    </v-col> -->

                  </v-row>
                </v-card-text>
              </v-card>
            </v-container>
          </v-sheet>

          <!-- ‡∏™‡∏∏‡πà‡∏°‡∏™‡∏ô‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á -->
          <v-sheet v-if="tab === 'mid-field'" class="pa-2">
            <v-container fluid>
              <v-card class="pa-4">
                <!-- Header -->
                <div class="d-flex justify-space-between align-center mb-3">
                  <div>
                    <h3 class="text-h6 mb-1">
                      <v-icon color="primary" class="mr-2">mdi-grid</v-icon>
                      ‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô 4x8 (‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á)
                    </h3>
                    <p class="text-caption grey--text mb-0" style="font-size: 10px;">
                      üí° ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ã‡πâ‡∏≤‡∏¢=‡∏´‡∏°‡∏∏‡∏ô | ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤=‡∏•‡∏ö | ‡∏•‡∏≤‡∏Å=‡∏ß‡∏≤‡∏á | 
                      CP: <strong :class="midCheckpointCount >= maxCheckpoints ? 'red--text' : 'green--text'">{{ midCheckpointCount }}/{{ maxCheckpoints }}</strong>
                    </p>
                  </div>
                </div>

                <!-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏™‡∏ô‡∏≤‡∏° -->
                <v-card outlined class="mb-4 pa-4">
                  <!-- Radio Toggle Buttons ‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á -->
                  <v-row justify="center" class="mb-3">
                    <v-col cols="auto">
                      <v-btn-toggle
                        v-model="midSelectedGrade"
                        mandatory
                        color="primary"
                        class="elevation-2"
                      >
                        <v-tooltip bottom>
                          <template v-slot:activator="{ on, attrs }">
                            <v-btn value="primary" x-large color="white" v-bind="attrs" v-on="on">
                              <span class="font-weight-bold primary--text text-h5">‡∏õ‡∏£‡∏∞‡∏ñ‡∏°</span>
                            </v-btn>
                          </template>
                          <span>+ ‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥</span>
                        </v-tooltip>
                        
                        <v-tooltip bottom>
                          <template v-slot:activator="{ on, attrs }">
                            <v-btn value="secondary" x-large color="white" v-bind="attrs" v-on="on">
                              <span class="font-weight-bold success--text text-h5">‡∏°.‡∏ï‡πâ‡∏ô</span>
                            </v-btn>
                          </template>
                          <span>+ ‡∏•‡∏π‡∏Å‡∏£‡∏∞‡∏ô‡∏≤‡∏î</span>
                        </v-tooltip>
                        
                        <v-tooltip bottom>
                          <template v-slot:activator="{ on, attrs }">
                            <v-btn value="high-secondary" x-large color="white" v-bind="attrs" v-on="on">
                              <span class="font-weight-bold deep-orange--text text-h5">‡∏°.‡∏õ‡∏•‡∏≤‡∏¢</span>
                            </v-btn>
                          </template>
                          <span>+ ‡∏™‡∏∞‡∏û‡∏≤‡∏ô</span>
                        </v-tooltip>
                      </v-btn-toggle>
                    </v-col>
                  </v-row>
                  
                  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡∏ï ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å -->
                  <v-row justify="center" align="center">
                    <v-col cols="auto">
                      <v-btn 
                        color="primary" 
                        @click="randomField('mid', midSelectedGrade)"
                        :disabled="!midSelectedGrade"
                        small
                      >
                        <v-icon small left>mdi-dice-multiple</v-icon>
                        ‡∏™‡∏∏‡πà‡∏°‡∏™‡∏ô‡∏≤‡∏°
                      </v-btn>
                      <v-btn color="warning" @click="resetField('mid')" class="ml-2" small>
                        <v-icon small left>mdi-refresh</v-icon>
                        ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
                      </v-btn>
                      
                      <!-- ‡∏õ‡∏∏‡πà‡∏° ? ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ -->
                      <v-tooltip bottom>
                        <template v-slot:activator="{ on, attrs }">
                          <v-btn 
                            icon 
                            small 
                            v-bind="attrs" 
                            v-on="on"
                            class="ml-2"
                          >
                            <v-icon small color="grey">mdi-help-circle</v-icon>
                          </v-btn>
                        </template>
                        <span>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Z ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°</span>
                      </v-tooltip>
                    </v-col>
                  </v-row>
                </v-card>

                <!-- Layout: ‡∏™‡∏ô‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á, ‡∏ö‡∏•‡πä‡∏≠‡∏Ñ 2 ‡∏ù‡∏±‡πà‡∏á -->
                <div style="display: flex; gap: 12px; align-items: flex-start;">
                  
                  <!-- ‡∏ö‡∏•‡πä‡∏≠‡∏Ñ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (‡∏ã‡πâ‡∏≤‡∏¢) -->
                  <div style="width: 200px; flex-shrink: 0;">
                    <h4 class="text-subtitle-2 mb-2 grey--text text--darken-2">
                      <v-icon small>mdi-border-all</v-icon> ‡∏ö‡∏•‡πä‡∏≠‡∏Ñ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
                    </h4>
                    <div class="blocks-container" style="flex-wrap: wrap; gap: 4px; max-height: 500px; overflow-y: auto; padding: 8px; background: #fafafa; border-radius: 4px;">
                      <!-- Field Blocks (10) -->
                      <div 
                        v-for="(block, index) in midFieldBlocks" 
                        :key="index"
                        class="field-block"
                        :class="[
                          'block-border-' + getRotatedBorders(block.borders, block.rotation),
                          {'block-placed': block.placed}
                        ]"
                        @click="rotateBlock(index, 'mid')"
                        @dragstart="startDrag($event, index, 'field', 'mid')"
                        @dragend="endDrag"
                        draggable="true"
                      >
                        <span class="block-number">{{ block.id }}</span>
                      </div>

                      <!-- Checkpoint Blocks (4) -->
                      <div 
                        v-for="(block, index) in midCheckpointBlocks" 
                        :key="'cp-' + index"
                        class="field-block checkpoint-block"
                        :class="[
                          'block-border-' + getRotatedBorders(block.borders, block.rotation),
                          {'block-placed': block.placed}
                        ]"
                        @click="rotateCheckpointBlock(index, 'mid')"
                        @dragstart="startDrag($event, index, 'checkpoint', 'mid')"
                        @dragend="endDrag"
                        draggable="true"
                      >
                      </div>
                    </div>
                  </div>

                  <!-- Grid 4x8 (‡∏Å‡∏•‡∏≤‡∏á) -->
                  <div style="flex: 1; display: flex; justify-content: center;">
                    <div class="field-grid-wrapper" style="padding: 0;">
                      <div class="field-grid-container">
                        <div 
                          v-for="row in 4" 
                          :key="'row-' + row" 
                          class="field-grid-row"
                        >
                          <div
                            v-for="col in 8"
                            :key="'cell-' + row + '-' + col"
                            class="field-grid-cell"
                            :class="{'cell-occupied': isCellOccupied(row - 1, col - 1, 'mid')}"
                            :style="getCellStyle(row - 1, col - 1, 'mid')"
                            @click="rotateBlockInGrid(row - 1, col - 1, 'mid')"
                            @contextmenu.prevent="removeBlockFromGrid(row - 1, col - 1, 'mid')"
                            @dragover.prevent
                            @drop="dropBlock($event, row - 1, col - 1, 'mid')"
                          >
                            <span class="cell-label">{{ (row - 1) * 8 + col }}</span>
                            <!-- ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏•‡∏Ç block ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏•‡πä‡∏≠‡∏Ñ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (field/ball) ‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏° zone -->
                            <span 
                              v-if="midFieldGrid[row - 1][col - 1] && ['field', 'ball'].includes(midFieldGrid[row - 1][col - 1].type)" 
                              style="position: absolute; top: 2px; left: 2px; font-size: 9px; font-weight: bold; color: #999; background: rgba(255, 255, 255, 0.8); padding: 1px 3px; border-radius: 2px; z-index: 10;"
                            >
                              {{ midFieldGrid[row - 1][col - 1].type === 'field' ? midFieldBlocks[midFieldGrid[row - 1][col - 1].index].id : 
                                 midFieldGrid[row - 1][col - 1].type === 'ball' ? midBallBlocks[midFieldGrid[row - 1][col - 1].index].id : '' }}
                            </span>
                            <div v-if="midFieldGrid[row - 1][col - 1] && midFieldGrid[row - 1][col - 1].type === 'checkpoint'" 
                                 style="position: absolute; width: 20px; height: 20px; background: #FFD700; border-radius: 50%; box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);">
                            </div>
                            <!-- ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° Stick -->
                            <div v-if="midFieldGrid[row - 1][col - 1] && midFieldGrid[row - 1][col - 1].type === 'bridge'" 
                                 style="position: absolute; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #333; font-size: 10px;">
                              ‡∏™‡∏∞‡∏û‡∏≤‡∏ô
                            </div>
                            <!-- ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏µ‡πÉ‡∏ô Zone -->
                            <div v-if="midFieldGrid[row - 1][col - 1] && midFieldGrid[row - 1][col - 1].type === 'start'" 
                                 style="position: absolute; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #f44336; font-size: 12px;">
                              START
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- ‡∏ö‡∏•‡πä‡∏≠‡∏Ñ‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡∏Ç‡∏ß‡∏≤) -->
                  <div style="width: 200px; flex-shrink: 0;">
                    <h4 class="text-subtitle-2 mb-2 grey--text text--darken-2">
                      <v-icon small>mdi-star</v-icon> ‡∏ö‡∏•‡πä‡∏≠‡∏Ñ‡∏û‡∏¥‡πÄ‡∏®‡∏©
                    </h4>
                    <div class="blocks-container" style="flex-wrap: wrap; gap: 4px; max-height: 500px; overflow-y: auto; padding: 8px; background: #fafafa; border-radius: 4px;">
                      
                      <!-- Zone Colors (4) -->
                      <div 
                        v-for="(block, index) in midZoneBlocks" 
                        :key="'zone-' + index"
                        class="field-block zone-block"
                        :class="[
                          {'block-placed': block.placed}, 
                          'zone-rotate-' + block.rotation,
                          block.border ? 'zone-border-' + block.border : ''
                        ]"
                        :style="block.shape === 'half-left' ? 
                          { background: 'linear-gradient(to right, ' + block.color + ' 0%, ' + block.color + ' 50%, white 50%, white 100%)' } : 
                          { backgroundColor: block.color }"
                        @click="rotateZoneBlock(index, 'mid')"
                        @dragstart="startDrag($event, index, 'zone', 'mid')"
                        @dragend="endDrag"
                        draggable="true"
                      >
                      </div>

                      <!-- Black Hole (1) -->
                      <div 
                        v-for="(block, index) in midObstacleBlocks" 
                        :key="'obs-' + index"
                        class="field-block blackhole-block"
                        :class="['blackhole-rotate-' + block.rotation, {'block-placed': block.placed}]"
                        @click="rotateObstacleBlock(index, 'mid')"
                        @dragstart="startDrag($event, index, 'obstacle', 'mid')"
                        @dragend="endDrag"
                        draggable="true"
                      >
                      </div>

                      <!-- Stick (1) -->
                      <div 
                        v-for="(block, index) in midBallBlocks" 
                        :key="'ball-' + index"
                        class="field-block ball-block"
                        :class="['ball-rotate-' + block.rotation, {'block-placed': block.placed}]"
                        @click="rotateBallBlock(index, 'mid')"
                        @dragstart="startDrag($event, index, 'ball', 'mid')"
                        @dragend="endDrag"
                        draggable="true"
                      >
                      </div>

                      <!-- Bridge (1) - 3 ‡∏ä‡πà‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô -->
                      <div 
                        v-for="(block, index) in midBridgeBlocks" 
                        :key="'bridge-' + index"
                        class="bridge-block"
                        :class="['bridge-rotate-' + block.rotation, {'block-placed': block.placed}]"
                        @click="rotateBridgeBlock(index, 'mid')"
                        @dragstart="startDrag($event, index, 'bridge', 'mid')"
                        @dragend="endDrag"
                        draggable="true"
                      >
                      </div>

                      <!-- START Block (1) -->
                      <div 
                        v-for="(block, index) in midStartBlock" 
                        :key="'start-' + index"
                        class="field-block start-block"
                        :class="['start-rotate-' + block.rotation, {'block-placed': block.placed}]"
                        @click="rotateStartBlock(index, 'mid')"
                        @dragstart="startDrag($event, index, 'start', 'mid')"
                        @dragend="endDrag"
                        draggable="true"
                      >
                        <span class="start-label">{{ block.name }}</span>
                      </div>
                    </div>
                  </div>

                </div>
              </v-card>
            </v-container>
          </v-sheet>

          <!-- ‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ 3 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á -->
          <v-sheet v-if="tab === 'mid-timer'" dark class="d-flex flex-column align-center justify-center fill-height" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: #000000; padding: 0; margin: 0; padding-top: 64px; z-index: 1;">
            <v-container fluid class="fill-height d-flex flex-column align-center justify-center" style="max-width: 100%;">
              
              <!-- ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏´‡∏•‡∏±‡∏Å ‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ -->
              <div style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                
                <!-- ‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ -->
                <div v-if="midTimerIsPreparing" class="text-center">
                  <p class="text-h6 mb-4" style="color: #FFA726; opacity: 0.7;">‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°...</p>
                  <div class="fixed-number" 
                       :style="isFullScreen ? 'font-size: 35vh; color: #FFA726; font-weight: bold; line-height: 1;' : 'font-size: 20rem; color: #FFA726; font-weight: bold; line-height: 1;'">
                    {{ midTimerPrepareCountdown }}
                  </div>
                </div>

                <!-- ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ (‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏ç‡πà) - ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≠‡∏ô‡∏´‡∏¢‡∏∏‡∏î -->
                <div v-if="!midTimerIsPreparing && !midTimerRunning" class="text-center">
                  <div style="margin-bottom: 12px;">
                    <v-chip color="green" dark large>
                      <v-icon left small>mdi-clock-check</v-icon>
                      ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ
                    </v-chip>
                  </div>
                  <div class="fixed-number" 
                       :style="isFullScreen ? 'font-size: 35vh; color: #4CAF50; font-weight: 300; line-height: 1;' : 'font-size: 20rem; color: #4CAF50; font-weight: 300; line-height: 1;'">
                    {{ String(midTimerElapsedMinutes).padStart(2, '0') }}:{{ String(midTimerElapsedSeconds).padStart(2, '0') }}<span :style="isFullScreen ? 'font-size: 20vh; opacity: 0.7;' : 'font-size: 12rem; opacity: 0.7;'">.{{ String(midTimerElapsedMilliseconds).padStart(2, '0') }}</span>
                  </div>
                </div>

                <!-- ‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏ç‡πà) - ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≠‡∏ô‡∏£‡∏±‡∏ô -->
                <div v-if="!midTimerIsPreparing && midTimerRunning" class="text-center">
                  <div style="margin-bottom: 12px;">
                    <v-chip v-if="midTimerIsPractice" color="purple darken-2" dark large>
                      <v-icon left small>mdi-timer-sand</v-icon>
                      ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ã‡πâ‡∏≠‡∏°
                    </v-chip>
                    <v-chip v-else color="green darken-2" dark large>
                      <v-icon left small>mdi-trophy</v-icon>
                      ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏Ç‡πà‡∏á ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á
                    </v-chip>
                  </div>
                  <div class="fixed-number" 
                       :style="isFullScreen ? 'font-size: 35vh; color: ' + (midTimerIsOvertime ? '#FF0000' : '#FFFFFF') + '; font-weight: 300; line-height: 1;' : 'font-size: 20rem; color: ' + (midTimerIsOvertime ? '#FF0000' : '#FFFFFF') + '; font-weight: 300; line-height: 1;'">
                    <span v-if="midTimerIsOvertime">-</span>{{ String(midTimerMinutes).padStart(2, '0') }}:{{ String(midTimerSeconds).padStart(2, '0') }}<span :style="isFullScreen ? 'font-size: 20vh; opacity: 0.7;' : 'font-size: 12rem; opacity: 0.7;'">.{{ String(midTimerMilliseconds).padStart(2, '0') }}</span>
                  </div>
                </div>

                <!-- Badges ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á - ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤ -->
                <div v-if="!midTimerIsPreparing" class="text-center mt-4" style="position: absolute; bottom: 120px; left: 0; right: 0;">
                  <v-chip color="green darken-2" dark small class="mx-1">
                    <v-icon left x-small>mdi-clock-check</v-icon>
                    ‡πÉ‡∏ä‡πâ‡πÑ‡∏õ: {{ String(midTimerElapsedMinutes).padStart(2, '0') }}:{{ String(midTimerElapsedSeconds).padStart(2, '0') }}.{{ String(midTimerElapsedMilliseconds).padStart(2, '0') }}
                  </v-chip>
                  <v-chip color="orange darken-2" dark small class="mx-1">
                    <v-icon left x-small>mdi-timer-sand</v-icon>
                    ‡πÄ‡∏´‡∏•‡∏∑‡∏≠: {{ String(midTimerMinutes).padStart(2, '0') }}:{{ String(midTimerSeconds).padStart(2, '0') }}.{{ String(midTimerMilliseconds).padStart(2, '0') }}
                  </v-chip>
                  <v-chip color="grey darken-3" dark class="mx-1">
                    <v-icon left small>mdi-keyboard</v-icon>
                    <strong>Space</strong>: ‡πÄ‡∏£‡∏¥‡πà‡∏°/‡∏´‡∏¢‡∏∏‡∏î | <strong>1</strong>: ‡∏ã‡πâ‡∏≠‡∏° 1 ‡∏ô‡∏≤‡∏ó‡∏µ | <strong>3</strong>: ‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ 3 ‡∏ô‡∏≤‡∏ó‡∏µ | <strong>0</strong>: ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
                  </v-chip>
                </div>

              </div>

              <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á (‡πÅ‡∏Ñ‡πà‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô) -->
              <div style="position: absolute; bottom: 60px; left: 0; right: 0; text-align: center;">
                <v-btn
                  v-if="!midTimerRunning && !midTimerIsPreparing"
                  fab
                  color="green"
                  dark
                  @click="startMidTimer"
                >
                  <v-icon>mdi-play</v-icon>
                </v-btn>
                <v-btn
                  v-if="midTimerRunning"
                  fab
                  small
                  color="orange"
                  dark
                  @click="pauseMidTimer"
                >
                  <v-icon small>mdi-pause</v-icon>
                </v-btn>
                <v-btn
                  fab
                  small
                  color="red"
                  dark
                  @click="resetMidTimer"
                  class="ml-3"
                  :disabled="midTimerIsPreparing"
                >
                  <v-icon small>mdi-refresh</v-icon>
                </v-btn>
              </div>

 
              
            </v-container>

            <!-- Progress Bar - ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏à‡∏≠ -->
            <v-progress-linear
              v-if="!midTimerIsPreparing"
              :value="((midTimerElapsedMinutes * 60 + midTimerElapsedSeconds) / 180) * 100"
              height="6"
              :color="midTimerMinutes === 0 && midTimerSeconds <= 10 ? 'red' : 'green'"
              background-color="grey darken-4"
              style="position: fixed; bottom: 0; left: 0; right: 0; z-index: 10;"
            ></v-progress-linear>
          </v-sheet>

          <!-- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á -->
          <v-sheet v-if="tab === 'mid-teams'" >
            
              <!-- Header ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏õ‡∏∏‡πà‡∏° -->
              <div class="d-flex justify-space-between align-center mb-4">
                <div>
                  <h2 class="text-h5">
                    <v-icon large color="green darken-1" class="mr-2">mdi-account-group</v-icon>
                    ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏°<span v-if="filterCompetition" class="ml-2 text-subtitle-1">({{ filterCompetition }})</span>
                  </h2>
                  <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å -->
                  <div class="mt-2 d-flex flex-wrap align-center" style="gap: 8px;">
                    <v-chip color="green darken-1" dark>
                      <v-icon left small>mdi-account-multiple</v-icon>
                      <strong>{{ filteredTeams.length }}/{{ midTeams.length }}</strong> ‡∏ó‡∏µ‡∏°
                    </v-chip>
                    <v-chip v-if="filterZone !== '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'" color="blue darken-1" dark>
                      <v-icon left small>mdi-map-marker</v-icon>
                      ‡πÄ‡∏Ç‡∏ï {{ filterZone }}
                    </v-chip>
                    <v-chip 
                      @click="toggleFilterLevel" 
                      color="purple darken-1" 
                      dark 
                      class="cursor-pointer"
                      style="cursor: pointer;"
                    >
                      <v-icon left small>mdi-school</v-icon>
                      {{ filterLevel }}
                      <v-icon right small>mdi-chevron-down</v-icon>
                    </v-chip>
                    <v-chip 
                      @click="toggleFilterField" 
                      color="teal darken-1" 
                      dark 
                      class="cursor-pointer"
                      style="cursor: pointer;"
                    >
                      <v-icon left small>mdi-stadium</v-icon>
                      ‡∏™‡∏ô‡∏≤‡∏° {{ filterField }}
                      <v-icon right small>mdi-chevron-down</v-icon>
                    </v-chip>
                    <v-chip v-if="filterCompetition" color="orange darken-1" dark>
                      <v-icon left small>mdi-trophy</v-icon>
                      {{ filterCompetition }}
                    </v-chip>
                    <v-chip v-if="filterZone === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' && filterLevel === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' && filterField === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' && !filterCompetition" color="grey" outlined>
                      <v-icon left small>mdi-filter-off</v-icon>
                      ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    </v-chip>
                  </div>
                </div>
                <div>
                  <v-btn
                    icon
                    color="green darken-1"
                    @click="openFilterDialogMid"
                    class="mr-2"
                  >
                    <v-icon>mdi-filter</v-icon>
                  </v-btn>
                  <v-btn
                    icon
                    color="green darken-1"
                    @click="currentLevel = 'mid'; openAuthDialog()"
                    class="mr-2"
                    v-if="!isAuthenticated || !canEditMid"
                  >
                    <v-icon>mdi-lock-open</v-icon>
                  </v-btn>
                  <v-btn
                    icon
                    color="grey"
                    @click="logout"
                    class="mr-2"
                    v-else
                  >
                    <v-icon>mdi-logout</v-icon>
                  </v-btn>
                  <v-btn
                    icon
                    color="green darken-1"
                    @click="openAddTeamDialog"
                    :disabled="!canEditMid"
                  >
                    <v-icon>mdi-plus</v-icon>
                  </v-btn>
                </div>
              </div>

              <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏° (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô Grid) -->
              <v-row v-if="filteredTeams.length > 0">
                <v-col
                  v-for="(item, index) in filteredTeams"
                  :key="item.school_id"
                  cols="12"
                  md="6"
                  lg="4"
                  xl="3"
                >
                  <v-card
                    class="team-card"
                    elevation="2"
                    hover
                    height="100%"
                    :class="{ 'editable-card': canEditMid }"
                  >
                    <!-- Header ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î -->
                    <v-card-title class="pb-2 white--text" :class="getFieldHeaderColor(item.field)" style="padding: 8px 12px !important;">
                      <div style="width: 100%;">
                        <!-- ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà 1: ID, ‡∏™‡∏ô‡∏≤‡∏°, ‡∏£‡∏∞‡∏î‡∏±‡∏ö, ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô -->
                        <div class="text-caption d-flex align-center flex-wrap" style="gap: 4px; line-height: 1.2; opacity: 0.95;">
                          <v-chip x-small color="white" :text-color="getFieldTextColor(item.field)">
                             
                            <strong>{{ item.school_id }}</strong>
                          </v-chip>
                          <v-chip x-small :color="getFieldChipColor(item.field)" dark>
                            <v-icon x-small left>mdi-stadium</v-icon>
                            ‡∏™‡∏ô‡∏≤‡∏° {{ item.field }}
                          </v-chip>
                          <span><v-icon x-small color="white">mdi-school</v-icon> {{ item.level }}</span>
                          <span v-if="item.competition">|</span>
                          <span v-if="item.competition"><v-icon x-small color="white">mdi-trophy-outline</v-icon> {{ item.competition }}</span>
                        </div>
                        
                        <!-- ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà 2: ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô + ‡πÄ‡∏Ç‡∏ï + ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å -->
                        <div class="mt-1 d-flex align-center justify-space-between">
                          <span class="text-subtitle-2 font-weight-bold" style="line-height: 1.3;">{{ item.school_name }}</span>
                          <div class="d-flex align-center" style="gap: 4px;">
                            <v-chip x-small dark color="white" :text-color="getFieldTextColor(item.field)">
                              <v-icon x-small left>mdi-map-marker</v-icon>
                              ‡πÄ‡∏Ç‡∏ï {{ item.zone }}
                            </v-chip>
                            <v-btn
                              v-if="canEditMid"
                              icon
                              large
                              color="white"
                              @click="saveTeam(item)"
                              :loading="item.updating"
                            >
                              <v-icon >mdi-content-save</v-icon>
                            </v-btn>
                          </div>
                        </div>
                      </div>
                    </v-card-title>

                    <!-- ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° -->
                    <v-card-text class="py-2 px-2">
                      <v-row dense no-gutters class="align-center">
                        <v-col cols="auto" class="pr-2" style="width: 42px;">
                          <v-icon color="warning" style="font-size: 28px;">mdi-star</v-icon>
                        </v-col>
                        <v-col style="padding: 0;">
                          <v-row dense no-gutters class="team-metrics">
                            <v-col cols="4" class="px-1">
                              <div class="d-flex align-center justify-center">
                                <v-icon small color="success" class="mr-1">mdi-trophy</v-icon>
                                <span class="font-weight-bold success--text" style="font-size: 1.1rem;">{{ getBestScore(item) }}</span>
                              </div>
                            </v-col>
                            <v-col cols="4" class="px-1">
                              <div class="d-flex align-center justify-center">
                                <v-icon small :color="getBestRetry(item) === 0 ? 'success' : 'warning'" class="mr-1">mdi-refresh</v-icon>
                                <span class="font-weight-bold" :class="getBestRetry(item) === 0 ? 'success--text' : 'warning--text'" style="font-size: 1rem;">{{ getBestRetry(item) }}</span>
                              </div>
                            </v-col>
                            <v-col cols="4" class="px-1">
                              <div class="d-flex align-center justify-center">
                                <v-icon small color="info" class="mr-1">mdi-clock-outline</v-icon>
                                <span class="info--text" style="font-size: 0.95rem;">{{ getBestTime(item) }}</span>
                              </div>
                            </v-col>
                          </v-row>
                        </v-col>
                      </v-row>
                    </v-card-text>

                    <v-divider></v-divider>

                    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô -->
                    <v-card-text class="pa-2">
                      <!-- ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 1 -->
                      <v-row dense no-gutters class="mb-2 align-center">
                        <v-col cols="auto" class="pr-2" style="width: 42px;">
                          <span class="text-h6 primary--text font-weight-bold">1</span>
                        </v-col>
                        <v-col style="padding: 0;">
                          <v-row dense no-gutters class="team-metrics">
                            <v-col cols="4" class="px-1">
                              <v-text-field
                                v-model.number="item.score1"
                                type="number"
                                dense
                                hide-details
                                solo
                                flat
                                  :readonly="!canEditMid"
                              >
                                <template v-slot:prepend-inner>
                                  <v-icon small color="success">mdi-trophy</v-icon>
                                </template>
                              </v-text-field>
                            </v-col>
                            <v-col cols="4" class="px-1">
                              <v-text-field
                                v-model.number="item.retry1"
                                type="number"
                                dense
                                hide-details
                                solo
                                flat
                                  :readonly="!canEditMid"
                              >
                                <template v-slot:prepend-inner>
                                  <v-icon small color="orange">mdi-refresh</v-icon>
                                </template>
                              </v-text-field>
                            </v-col>
                            <v-col cols="4" class="px-1">
                              <v-text-field
                                v-model="item.time1"
                                dense
                                hide-details
                                solo
                                flat
                                  :readonly="!canEditMid"
                                  placeholder="0:43:84"
                                  @input="formatTimeInput($event, item, 'time1')"
                                  @blur="validateTimeFormat(item, 'time1')"
                              >
                                <template v-slot:prepend-inner>
                                  <v-icon small color="blue">mdi-clock-outline</v-icon>
                                </template>
                              </v-text-field>
                            </v-col>
                          </v-row>
                        </v-col>
                      </v-row>

                      <!-- ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 2 -->
                      <v-row dense no-gutters class="mb-1 align-center">
                        <v-col cols="auto" class="pr-2" style="width: 42px;">
                          <span class="text-h6 primary--text font-weight-bold">2</span>
                        </v-col>
                        <v-col style="padding: 0;">
                          <v-row dense no-gutters class="team-metrics">
                            <v-col cols="4" class="px-1">
                              <v-text-field
                                v-model.number="item.score2"
                                type="number"
                                dense
                                hide-details
                                solo
                                flat
                                  :readonly="!canEditMid"
                              >
                                <template v-slot:prepend-inner>
                                  <v-icon small color="success">mdi-trophy</v-icon>
                                </template>
                              </v-text-field>
                            </v-col>
                            <v-col cols="4" class="px-1">
                              <v-text-field
                                v-model.number="item.retry2"
                                type="number"
                                dense
                                hide-details
                                solo
                                flat
                                  :readonly="!canEditMid"
                              >
                                <template v-slot:prepend-inner>
                                  <v-icon small color="orange">mdi-refresh</v-icon>
                                </template>
                              </v-text-field>
                            </v-col>
                            <v-col cols="4" class="px-1">
                              <v-text-field
                                v-model="item.time2"
                                dense
                                hide-details
                                solo
                                flat
                                  :readonly="!canEditMid"
                                  placeholder="0:43:84"
                                  @input="formatTimeInput($event, item, 'time2')"
                                  @blur="validateTimeFormat(item, 'time2')"
                              >
                                <template v-slot:prepend-inner>
                                  <v-icon small color="blue">mdi-clock-outline</v-icon>
                                </template>
                              </v-text-field>
                            </v-col>
                          </v-row>
                        </v-col>
                      </v-row>
                    </v-card-text>

                   

                  </v-card>
                </v-col>
              </v-row>
              
              <v-alert v-else type="info" text class="mt-4">
                <v-icon left>mdi-information</v-icon>
                ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏° ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡∏°‡πÉ‡∏´‡∏°‡πà
              </v-alert>
              
              <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Google Sheets -->
              <v-btn
                class="mt-4"
                color="green darken-1"
                block
                outlined
                @click="loadTeamsFromGAS"
                :loading="isLoadingTeams"
              >
                <v-icon left>mdi-refresh</v-icon>
                refresh 
              </v-btn>
           
          </v-sheet>

          <!-- ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á -->
            <v-dialog v-model="authDialog" max-width="450px" persistent>
              <v-card>
                <v-card-title class="text-h5 primary white--text">
                  <v-icon left color="white">mdi-lock</v-icon>
                  ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô - {{ currentLevel === 'mid' ? '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á' : '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á' }}
                </v-card-title>
                <v-card-text class="pt-6">
                  <v-text-field
                    v-model="username"
                    label="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ"
                    outlined
                    prepend-inner-icon="mdi-account"
                    :error-messages="authError"
                    @keyup.enter="authenticate"
                  ></v-text-field>
                  
                  <v-text-field
                    v-model="password"
                    label="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"
                    :type="showPassword ? 'text' : 'password'"
                    outlined
                    prepend-inner-icon="mdi-lock"
                    @keyup.enter="authenticate"
                    :error-messages="authError"
                    style="font-size: 1.5rem;"
                    class="large-password-field"
                    :append-icon="showPassword ? 'mdi-eye' : 'mdi-eye-off'"
                    @click:append="showPassword = !showPassword"
                  ></v-text-field>
                  
                  <v-alert v-if="authError" type="error" dense text class="mt-2">
                    {{ authError }}
                  </v-alert>
                  
                  <v-alert type="info" dense text class="mt-2">
                    <div class="text-caption">
                      <strong>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ:</strong><br>
                      ‚Ä¢ superadmin (‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö)<br>
                      ‚Ä¢ admin1, admin2 ({{ currentLevel === 'mid' ? '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á' : '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á' }})
                    </div>
                  </v-alert>
                </v-card-text>
                <v-card-actions>
                  <v-spacer></v-spacer>
                  <v-btn
                    text
                    @click="closeAuthDialog"
                  >
                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                  </v-btn>
                  <v-btn
                    color="primary"
                    @click="authenticate"
                    :loading="isAuthenticating"
                  >
                    ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                  </v-btn>
                </v-card-actions>
              </v-card>
            </v-dialog>

            <!-- Dialog ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡∏° -->
            <v-dialog v-model="addTeamDialog" max-width="600px" persistent>
              <v-card>
                <v-card-title class="text-h5 primary white--text">
                  <v-icon left color="white">mdi-account-plus</v-icon>
                  ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡∏°‡πÉ‡∏´‡∏°‡πà
                </v-card-title>
                <v-card-text class="pt-6">
                  <v-form ref="teamForm">
                    <v-text-field
                      v-model="newTeam.school_id"
                      label="‡∏£‡∏´‡∏±‡∏™‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô *"
                      outlined
                      dense
                      :rules="[v => !!v || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô']"
                    ></v-text-field>
                    
                    <v-text-field
                      v-model="newTeam.school_name"
                      label="‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô *"
                      outlined
                      dense
                      :rules="[v => !!v || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô']"
                    ></v-text-field>
                    
                    <v-text-field
                      v-model="newTeam.zone"
                      label="‡πÄ‡∏Ç‡∏ï *"
                      outlined
                      dense
                      :rules="[v => !!v || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏Ç‡∏ï']"
                    ></v-text-field>
                    
                    <v-select
                      v-model="newTeam.level"
                      :items="['‡∏°.‡∏ï‡πâ‡∏ô', '‡∏°.‡∏õ‡∏•‡∏≤‡∏¢']"
                      label="‡∏£‡∏∞‡∏î‡∏±‡∏ö *"
                      outlined
                      dense
                      :rules="[v => !!v || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö']"
                    ></v-select>
                    
                    <v-text-field
                      v-model="newTeam.competition"
                      label="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á *"
                      outlined
                      dense
                      :rules="[v => !!v || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á']"
                    ></v-text-field>
                    
                    <v-select
                      v-model="newTeam.field"
                      :items="['A', 'B', 'C', 'D']"
                      label="‡∏™‡∏ô‡∏≤‡∏° *"
                      outlined
                      dense
                      :rules="[v => !!v || '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ô‡∏≤‡∏°']"
                    ></v-select>
                  </v-form>

                  <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å -->
                  <v-alert v-if="saveStatus" :type="saveStatus.type" text class="mt-3">
                    {{ saveStatus.message }}
                  </v-alert>
                </v-card-text>
                <v-card-actions>
                  <v-spacer></v-spacer>
                  <v-btn
                    text
                    @click="closeAddTeamDialog"
                    :disabled="isSaving"
                  >
                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                  </v-btn>
                  <v-btn
                    color="primary"
                    @click="saveTeam"
                    :loading="isSaving"
                    :disabled="isSaving"
                  >
                    ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                  </v-btn>
                </v-card-actions>
              </v-card>
            </v-dialog>

            <!-- Dialog ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á -->
            <v-dialog v-model="filterDialogMid" max-width="600px">
              <v-card>
                <v-card-title class="text-h5 green darken-1 white--text d-flex align-center">
                  <v-icon left color="white">mdi-filter</v-icon>
                  ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á)
                  <v-spacer></v-spacer>
                  <v-btn
                    v-if="isAuthenticated"
                    icon
                    dark
                    @click="saveDefaultFilter('mid')"
                    :loading="isSavingDefaultFilter"
                  >
                    <v-icon>mdi-content-save</v-icon>
                  </v-btn>
                </v-card-title>
                <v-card-text class="pt-6">
                  <!-- ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á -->
                  <div class="mb-4">
                    <v-text-field
                      v-model="filterCompetition"
                      label="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á"
                      placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á ‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏û‡∏°.‡∏ô‡∏®68"
                      outlined
                      dense
                      clearable
                      prepend-inner-icon="mdi-trophy"
                    ></v-text-field>
                  </div>
                  
                  <!-- ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏Ç‡∏ï -->
                  <div class="mb-3">
                    <label class="text-subtitle-2 mb-2 d-block">‡πÄ‡∏Ç‡∏ï</label>
                    <v-chip-group v-model="filterZone" column mandatory>
                      <v-chip small filter outlined value="‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î">
                        <v-icon small left>mdi-map-marker</v-icon>
                        ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                      </v-chip>
                      <v-chip 
                        v-for="zone in availableZones" 
                        :key="zone"
                        small 
                        filter 
                        outlined
                        :value="zone"
                      >
                        ‡πÄ‡∏Ç‡∏ï {{ zone }}
                      </v-chip>
                    </v-chip-group>
                  </div>
                  
                  <!-- ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö -->
                  <div class="mb-3">
                    <label class="text-subtitle-2 mb-2 d-block">‡∏£‡∏∞‡∏î‡∏±‡∏ö</label>
                    <v-chip-group v-model="filterLevel" column mandatory>
                      <v-chip small filter outlined value="‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î">
                        <v-icon small left>mdi-school</v-icon>
                        ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                      </v-chip>
                      <v-chip small filter outlined value="‡∏õ‡∏£‡∏∞‡∏ñ‡∏°">‡∏õ‡∏£‡∏∞‡∏ñ‡∏°</v-chip>
                      <v-chip small filter outlined value="‡∏°.‡∏ï‡πâ‡∏ô">‡∏°.‡∏ï‡πâ‡∏ô</v-chip>
                      <v-chip small filter outlined value="‡∏°.‡∏õ‡∏•‡∏≤‡∏¢">‡∏°.‡∏õ‡∏•‡∏≤‡∏¢</v-chip>
                    </v-chip-group>
                  </div>
                  
                  <!-- ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏ô‡∏≤‡∏° -->
                  <div class="mb-3">
                    <label class="text-subtitle-2 mb-2 d-block">‡∏™‡∏ô‡∏≤‡∏°</label>
                    <v-chip-group v-model="filterField" column mandatory>
                      <v-chip small filter outlined value="‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î">
                        <v-icon small left>mdi-stadium</v-icon>
                        ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                      </v-chip>
                      <v-chip 
                        v-for="field in availableFields" 
                        :key="field"
                        small 
                        filter 
                        outlined
                        :value="field"
                      >
                        ‡∏™‡∏ô‡∏≤‡∏° {{ field }}
                      </v-chip>
                    </v-chip-group>
                  </div>
                  
                  <v-divider class="my-3"></v-divider>
                  <div class="text-center">
                    <v-chip color="green darken-1" class="px-4">
                      ‡πÅ‡∏™‡∏î‡∏á <strong class="mx-1">{{ filteredTeams.length }}</strong> ‡∏à‡∏≤‡∏Å {{ midTeams.length }} ‡∏ó‡∏µ‡∏°
                    </v-chip>
                  </div>
                </v-card-text>
                <v-card-actions>
                  <v-btn
                    text
                    @click="resetFilters"
                  >
                    <v-icon left>mdi-refresh</v-icon>
                    ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
                  </v-btn>
                  <v-spacer></v-spacer>
                  <v-btn
                    color="green darken-1"
                    @click="filterDialogMid = false"
                  >
                    ‡∏õ‡∏¥‡∏î
                  </v-btn>
                </v-card-actions>
              </v-card>
            </v-dialog>

            <!-- Filter dialog ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á -->
            <v-dialog v-model="filterDialogHigh" max-width="600px">
              <v-card>
                <v-card-title class="text-h5 orange white--text d-flex align-center">
                  <v-icon left color="white">mdi-filter</v-icon>
                  ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á)
                  <v-spacer></v-spacer>
                  <v-btn
                    v-if="isAuthenticated"
                    icon
                    dark
                    @click="saveDefaultFilter('high')"
                    :loading="isSavingDefaultFilter"
                  >
                    <v-icon>mdi-content-save</v-icon>
                  </v-btn>
                  <v-tooltip v-else bottom>
                    <template v-slot:activator="{ on }">
                      <v-btn icon dark disabled v-on="on">
                        <v-icon>mdi-content-save</v-icon>
                      </v-btn>
                    </template>
                    <span>‡∏ï‡πâ‡∏≠‡∏á Login ‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏î‡πâ</span>
                  </v-tooltip>
                </v-card-title>
                <v-card-text class="pt-6">
                  <!-- ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á -->
                  <div class="mb-4">
                    <v-text-field
                      v-model="filterCompetition_high"
                      label="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á"
                      placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á ‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏û‡∏°.‡∏ô‡∏®68"
                      outlined
                      dense
                      clearable
                      prepend-inner-icon="mdi-trophy"
                    ></v-text-field>
                  </div>
                  
                  <!-- ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏Ç‡∏ï -->
                  <div class="mb-3">
                    <label class="text-subtitle-2 mb-2 d-block">‡πÄ‡∏Ç‡∏ï</label>
                    <v-chip-group v-model="filterZone_high" column mandatory>
                      <v-chip small filter outlined value="‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î">
                        <v-icon small left>mdi-map-marker</v-icon>
                        ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                      </v-chip>
                      <v-chip 
                        v-for="zone in availableZones_high" 
                        :key="zone"
                        small 
                        filter 
                        outlined
                        :value="zone"
                      >
                        ‡πÄ‡∏Ç‡∏ï {{ zone }}
                      </v-chip>
                    </v-chip-group>
                  </div>
                  
                  <!-- ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö -->
                  <div class="mb-3">
                    <label class="text-subtitle-2 mb-2 d-block">‡∏£‡∏∞‡∏î‡∏±‡∏ö</label>
                    <v-chip-group v-model="filterLevel_high" column mandatory>
                      <v-chip small filter outlined value="‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î">
                        <v-icon small left>mdi-school</v-icon>
                        ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                      </v-chip>
                      <v-chip small filter outlined value="‡∏õ‡∏£‡∏∞‡∏ñ‡∏°">‡∏õ‡∏£‡∏∞‡∏ñ‡∏°</v-chip>
                      <v-chip small filter outlined value="‡∏°.‡∏ï‡πâ‡∏ô">‡∏°.‡∏ï‡πâ‡∏ô</v-chip>
                      <v-chip small filter outlined value="‡∏°.‡∏õ‡∏•‡∏≤‡∏¢">‡∏°.‡∏õ‡∏•‡∏≤‡∏¢</v-chip>
                    </v-chip-group>
                  </div>
                  
                  <!-- ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏ô‡∏≤‡∏° -->
                  <div class="mb-3">
                    <label class="text-subtitle-2 mb-2 d-block">‡∏™‡∏ô‡∏≤‡∏°</label>
                    <v-chip-group v-model="filterField_high" column mandatory>
                      <v-chip small filter outlined value="‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î">
                        <v-icon small left>mdi-stadium</v-icon>
                        ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                      </v-chip>
                      <v-chip 
                        v-for="field in availableFields_high" 
                        :key="field"
                        small 
                        filter 
                        outlined
                        :value="field"
                      >
                        ‡∏™‡∏ô‡∏≤‡∏° {{ field }}
                      </v-chip>
                    </v-chip-group>
                  </div>
                  
                  <v-divider class="my-3"></v-divider>
                  <div class="text-center">
                    <v-chip color="orange" class="px-4">
                      ‡πÅ‡∏™‡∏î‡∏á <strong class="mx-1">{{ filteredTeams_high.length }}</strong> ‡∏à‡∏≤‡∏Å {{ highTeams.length }} ‡∏ó‡∏µ‡∏°
                    </v-chip>
                  </div>
                </v-card-text>
                <v-card-actions>
                  <v-btn
                    text
                    @click="resetFilters_high"
                  >
                    <v-icon left>mdi-refresh</v-icon>
                    ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
                  </v-btn>
                  <v-spacer></v-spacer>
                  <v-btn
                    color="orange"
                    @click="filterDialogHigh = false"
                  >
                    ‡∏õ‡∏¥‡∏î
                  </v-btn>
                </v-card-actions>
              </v-card>
            </v-dialog>
          </v-sheet>

          <!-- ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á -->
          <v-sheet v-if="tab === 'mid-results'" class="pa-4">
           
              
                <v-card-title class="d-flex flex-wrap flex-row align-center justify-space-between py-2 px-1" style="gap: 8px; min-height: unset;">
                  <div class="d-flex align-center flex-grow-1 min-width-0" style="gap: 8px;">
                    <v-icon color="green darken-1" class="mr-2" :size="$vuetify.breakpoint.smAndDown ? 28 : 44">mdi-trophy</v-icon>
                    <span class="font-weight-bold text-truncate"
                          :style="$vuetify.breakpoint.smAndDown ? 'font-size: 1.1rem; max-width: 70vw;' : 'font-size: 2.1rem; max-width: 70vw;'">
                      ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á
                      <span v-if="filterCompetition"> ({{ filterLevel }} - {{ filterCompetition }})</span>
                    </span>
                  </div>
                  <div class="d-flex align-center flex-wrap" style="gap: 4px;">
                    <v-chip x-small class="mr-1" color="green darken-1" dark>{{ sortedTeams.length }}/{{ midTeams.length }} ‡∏ó‡∏µ‡∏°</v-chip>
                    <v-chip v-if="filterZone !== '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'" x-small color="blue darken-1" dark>‡πÄ‡∏Ç‡∏ï {{ filterZone }}</v-chip>
                    <v-chip @click="toggleFilterLevel" x-small color="purple darken-1" dark style="cursor: pointer;">
                      {{ filterLevel }}
                      <v-icon right x-small>mdi-chevron-down</v-icon>
                    </v-chip>
                    <v-chip @click="toggleFilterField" x-small color="teal darken-1" dark style="cursor: pointer;">
                      ‡∏™‡∏ô‡∏≤‡∏° {{ filterField }}
                      <v-icon right x-small>mdi-chevron-down</v-icon>
                    </v-chip>
                    <v-chip v-if="filterCompetition" x-small color="orange darken-1" dark>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: {{ filterCompetition }}</v-chip>
                    <span v-if="filterZone === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' && filterLevel === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' && filterField === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' && !filterCompetition">‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                    <v-btn icon color="green darken-1" @click="openFilterDialogMid" class="ml-1">
                      <v-icon>mdi-filter</v-icon>
                    </v-btn>
                    <v-btn icon color="green darken-1" @click="loadTeamsFromGAS" :loading="isLoadingTeams">
                      <v-icon>mdi-refresh</v-icon>
                    </v-btn>
                  </div>
                </v-card-title>
                <v-divider class="my-4"></v-divider>
                
                
                  <div v-if="sortedTeams.length > 0">
                    <!-- ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô -->
                  
                    
                    <v-card outlined>
                      <canvas id="resultsChart" :style="'height: ' + (sortedTeams.length * 40 + 100) + 'px;'"></canvas>
                    </v-card>
                    
                    <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î -->
                    <v-divider class="my-6"></v-divider>
                    <h3 class="text-h6 mb-3">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</h3>
                    <v-data-table
                      :headers="resultsHeaders"
                      :items="sortedTeams"
                      :items-per-page="20"
                      class="elevation-1"
                      dense
                    >
                      <template v-slot:item.rank="{ item, index }">
                        <v-chip
                          small
                          :color="getRankColor(index)"
                          dark
                        >
                          {{ index + 1 }}
                        </v-chip>
                      </template>
                      
                      <template v-slot:item.school_name="{ item }">
                        <strong>{{ item.school_name }}</strong>
                      </template>
                      
                      <template v-slot:item.score="{ item }">
                        <strong class="primary--text" style="font-size: 1.1rem;">{{ getBestScore(item) }}</strong>
                      </template>
                      
                      <template v-slot:item.retry="{ item }">
                        <v-chip
                          small
                          :color="getRetryChipColor(getBestRetry(item))"
                          dark
                        >
                          {{ getBestRetry(item) }}
                        </v-chip>
                      </template>
                      
                      <template v-slot:item.time="{ item }">
                        <strong>{{ getBestTime(item) }}</strong>
                      </template>
                    </v-data-table>
                  </div>
                  
                  <v-alert v-else type="info" text prominent>
                    <v-row align="center">
                      <v-col class="grow">
                        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Google Sheets
                      </v-col>
                      <v-col class="shrink">
                        <v-btn
                          color="primary"
                          @click="loadTeamsFromGAS"
                          :loading="isLoadingTeams"
                        >
                          <v-icon left>mdi-refresh</v-icon>
                          ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        </v-btn>
                      </v-col>
                    </v-row>
                  </v-alert>
                
              
           
          </v-sheet>

          <!-- ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á -->
          <v-sheet v-if="tab === 'high-rules'" class="pa-4">
            <v-container>
              <v-card class="pa-6">
                <v-card-title class="text-h4 justify-center">
                  <v-icon large color="primary" class="mr-3">mdi-file-document</v-icon>
                  ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á
                </v-card-title>
                <v-divider class="my-4"></v-divider>
                
                <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î PDF -->
                <v-card-text class="text-center mb-4">
                  <v-btn
                    color="primary"
                    large
                    href="https://www.sillapa.net/rule70/robot-70.pdf"
                    target="_blank"
                  >
                    <v-icon left>mdi-file-pdf-box</v-icon>
                    ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤ PDF 
                  </v-btn>
                </v-card-text>

                <v-divider class="my-6"></v-divider>

                
            </v-container>
          </v-sheet>

          <!-- ‡∏™‡∏∏‡πà‡∏°‡∏™‡∏ô‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á -->
          <v-sheet v-if="tab === 'high-field'" class="pa-2">
            <v-container fluid>
              <v-card class="pa-4">
                <!-- Header -->
                <div class="d-flex justify-space-between align-center mb-3">
                  <div>
                    <h3 class="text-h6 mb-1">
                      <v-icon color="orange" class="mr-2">mdi-grid</v-icon>
                      ‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô 4x8 (‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á)
                    </h3>
                    <p class="text-caption grey--text mb-0" style="font-size: 10px;">
                      üí° ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ã‡πâ‡∏≤‡∏¢=‡∏´‡∏°‡∏∏‡∏ô | ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤=‡∏•‡∏ö | ‡∏•‡∏≤‡∏Å=‡∏ß‡∏≤‡∏á | 
                      CP: <strong :class="highCheckpointCount >= maxCheckpoints ? 'red--text' : 'green--text'">{{ highCheckpointCount }}/{{ maxCheckpoints }}</strong>
                    </p>
                  </div>
                </div>

                <!-- ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏™‡∏ô‡∏≤‡∏° -->
                <v-card outlined class="mb-4 pa-4">
                  <!-- Radio Toggle Buttons ‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á -->
                  <v-row justify="center" class="mb-3">
                    <v-col cols="auto">
                      <v-btn-toggle
                        v-model="highSelectedGrade"
                        mandatory
                        color="orange"
                        class="elevation-2"
                      >
                        <v-tooltip bottom>
                          <template v-slot:activator="{ on, attrs }">
                            <v-btn value="primary" x-large color="white" v-bind="attrs" v-on="on">
                              <span class="font-weight-bold primary--text text-h5">‡∏õ‡∏£‡∏∞‡∏ñ‡∏°</span>
                            </v-btn>
                          </template>
                          <span>+ ‡∏´‡∏•‡∏∏‡∏°‡∏î‡∏≥</span>
                        </v-tooltip>
                        
                        <v-tooltip bottom>
                          <template v-slot:activator="{ on, attrs }">
                            <v-btn value="secondary" x-large color="white" v-bind="attrs" v-on="on">
                              <span class="font-weight-bold success--text text-h5">‡∏°.‡∏ï‡πâ‡∏ô</span>
                            </v-btn>
                          </template>
                          <span>+ ‡∏•‡∏π‡∏Å‡∏£‡∏∞‡∏ô‡∏≤‡∏î</span>
                        </v-tooltip>
                        
                        <v-tooltip bottom>
                          <template v-slot:activator="{ on, attrs }">
                            <v-btn value="high-secondary" x-large color="white" v-bind="attrs" v-on="on">
                              <span class="font-weight-bold deep-orange--text text-h5">‡∏°.‡∏õ‡∏•‡∏≤‡∏¢</span>
                            </v-btn>
                          </template>
                          <span>+ ‡∏™‡∏∞‡∏û‡∏≤‡∏ô</span>
                        </v-tooltip>
                      </v-btn-toggle>
                    </v-col>
                  </v-row>
                  
                  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏µ‡πÄ‡∏ã‡∏ï ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å -->
                  <v-row justify="center" align="center">
                    <v-col cols="auto">
                      <v-btn 
                        color="orange" 
                        @click="randomField('high', highSelectedGrade)"
                        :disabled="!highSelectedGrade"
                        small
                      >
                        <v-icon small left>mdi-dice-multiple</v-icon>
                        ‡∏™‡∏∏‡πà‡∏°‡∏™‡∏ô‡∏≤‡∏°
                      </v-btn>
                      <v-btn color="warning" @click="resetField('high')" class="ml-2" small>
                        <v-icon small left>mdi-refresh</v-icon>
                        ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
                      </v-btn>
                      
                      <!-- ‡∏õ‡∏∏‡πà‡∏° ? ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ -->
                      <v-tooltip bottom>
                        <template v-slot:activator="{ on, attrs }">
                          <v-btn 
                            icon 
                            small 
                            v-bind="attrs" 
                            v-on="on"
                            class="ml-2"
                          >
                            <v-icon small color="grey">mdi-help-circle</v-icon>
                          </v-btn>
                        </template>
                        <span>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° Z ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°</span>
                      </v-tooltip>
                    </v-col>
                  </v-row>
                </v-card>

                <!-- Layout: ‡∏™‡∏ô‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á, ‡∏ö‡∏•‡πä‡∏≠‡∏Ñ 2 ‡∏ù‡∏±‡πà‡∏á -->
                <div style="display: flex; gap: 12px; align-items: flex-start;">
                  
                  <!-- ‡∏ö‡∏•‡πä‡∏≠‡∏Ñ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (‡∏ã‡πâ‡∏≤‡∏¢) -->
                  <div style="width: 200px; flex-shrink: 0;">
                    <h4 class="text-subtitle-2 mb-2 grey--text text--darken-2">
                      <v-icon small>mdi-border-all</v-icon> ‡∏ö‡∏•‡πä‡∏≠‡∏Ñ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô
                    </h4>
                    <div class="blocks-container" style="flex-wrap: wrap; gap: 4px; max-height: 500px; overflow-y: auto; padding: 8px; background: #fafafa; border-radius: 4px;">
                      <!-- Field Blocks (10) -->
                      <div 
                        v-for="(block, index) in highFieldBlocks" 
                        :key="index"
                        class="field-block"
                        :class="[
                          'block-border-' + getRotatedBorders(block.borders, block.rotation),
                          {'block-placed': block.placed}
                        ]"
                        @click="rotateBlock(index, 'high')"
                        @dragstart="startDrag($event, index, 'field', 'high')"
                        @dragend="endDrag"
                        draggable="true"
                      >
                        <span class="block-number">{{ block.id }}</span>
                      </div>

                      <!-- Checkpoint Blocks (4) -->
                      <div 
                        v-for="(block, index) in highCheckpointBlocks" 
                        :key="'cp-' + index"
                        class="field-block checkpoint-block"
                        :class="[
                          'block-border-' + getRotatedBorders(block.borders, block.rotation),
                          {'block-placed': block.placed}
                        ]"
                        @click="rotateCheckpointBlock(index, 'high')"
                        @dragstart="startDrag($event, index, 'checkpoint', 'high')"
                        @dragend="endDrag"
                        draggable="true"
                      >
                      </div>
                    </div>
                  </div>

                  <!-- Grid 4x8 (‡∏Å‡∏•‡∏≤‡∏á) -->
                  <div style="flex: 1; display: flex; justify-content: center;">
                    <div class="field-grid-wrapper" style="padding: 0;">
                      <div class="field-grid-container">
                        <div 
                          v-for="row in 4" 
                          :key="'row-' + row" 
                          class="field-grid-row"
                        >
                          <div
                            v-for="col in 8"
                            :key="'cell-' + row + '-' + col"
                            class="field-grid-cell"
                            :class="{'cell-occupied': isCellOccupied(row - 1, col - 1, 'high')}"
                            :style="getCellStyle(row - 1, col - 1, 'high')"
                            @click="rotateBlockInGrid(row - 1, col - 1, 'high')"
                            @contextmenu.prevent="removeBlockFromGrid(row - 1, col - 1, 'high')"
                            @dragover.prevent
                            @drop="dropBlock($event, row - 1, col - 1, 'high')"
                          >
                            <span class="cell-label">{{ (row - 1) * 8 + col }}</span>
                            <div v-if="highFieldGrid[row - 1][col - 1] && highFieldGrid[row - 1][col - 1].type === 'checkpoint'" 
                                 style="position: absolute; width: 20px; height: 20px; background: #FFD700; border-radius: 50%; box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);">
                            </div>
                            <!-- ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° Stick -->
                            <div v-if="highFieldGrid[row - 1][col - 1] && highFieldGrid[row - 1][col - 1].type === 'bridge'" 
                                 style="position: absolute; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #333; font-size: 10px;">
                              ‡∏™‡∏∞‡∏û‡∏≤‡∏ô
                            </div>
                            <!-- ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏µ‡πÉ‡∏ô Zone -->
                            <div v-if="highFieldGrid[row - 1][col - 1] && highFieldGrid[row - 1][col - 1].type === 'start'" 
                                 style="position: absolute; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: #f44336; font-size: 12px;">
                              START
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- ‡∏ö‡∏•‡πä‡∏≠‡∏Ñ‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡∏Ç‡∏ß‡∏≤) -->
                  <div style="width: 200px; flex-shrink: 0;">
                    <h4 class="text-subtitle-2 mb-2 grey--text text--darken-2">
                      <v-icon small>mdi-star</v-icon> ‡∏ö‡∏•‡πä‡∏≠‡∏Ñ‡∏û‡∏¥‡πÄ‡∏®‡∏©
                    </h4>
                    <div class="blocks-container" style="flex-wrap: wrap; gap: 4px; max-height: 500px; overflow-y: auto; padding: 8px; background: #fafafa; border-radius: 4px;">
                      
                      <!-- Zone Colors (4) -->
                      <div 
                        v-for="(block, index) in highZoneBlocks" 
                        :key="'zone-' + index"
                        class="field-block zone-block"
                        :class="[
                          {'block-placed': block.placed}, 
                          'zone-rotate-' + block.rotation,
                          block.border ? 'zone-border-' + block.border : ''
                        ]"
                        :style="block.shape === 'half-left' ? 
                          { background: 'linear-gradient(to right, ' + block.color + ' 0%, ' + block.color + ' 50%, white 50%, white 100%)' } : 
                          { backgroundColor: block.color }"
                        @click="rotateZoneBlock(index, 'high')"
                        @dragstart="startDrag($event, index, 'zone', 'high')"
                        @dragend="endDrag"
                        draggable="true"
                      >
                      </div>

                      <!-- Black Hole (1) -->
                      <div 
                        v-for="(block, index) in highObstacleBlocks" 
                        :key="'obs-' + index"
                        class="field-block blackhole-block"
                        :class="['blackhole-rotate-' + block.rotation, {'block-placed': block.placed}]"
                        @click="rotateObstacleBlock(index, 'high')"
                        @dragstart="startDrag($event, index, 'obstacle', 'high')"
                        @dragend="endDrag"
                        draggable="true"
                      >
                      </div>

                      <!-- Stick (1) -->
                      <div 
                        v-for="(block, index) in highBallBlocks" 
                        :key="'ball-' + index"
                        class="field-block ball-block"
                        :class="['ball-rotate-' + block.rotation, {'block-placed': block.placed}]"
                        @click="rotateBallBlock(index, 'high')"
                        @dragstart="startDrag($event, index, 'ball', 'high')"
                        @dragend="endDrag"
                        draggable="true"
                      >
                      </div>

                      <!-- Bridge (1) - 3 ‡∏ä‡πà‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô -->
                      <div 
                        v-for="(block, index) in highBridgeBlocks" 
                        :key="'bridge-' + index"
                        class="bridge-block"
                        :class="['bridge-rotate-' + block.rotation, {'block-placed': block.placed}]"
                        @click="rotateBridgeBlock(index, 'high')"
                        @dragstart="startDrag($event, index, 'bridge', 'high')"
                        @dragend="endDrag"
                        draggable="true"
                      >
                      </div>

                      <!-- START Block (1) -->
                      <div 
                        v-for="(block, index) in highStartBlock" 
                        :key="'start-' + index"
                        class="field-block start-block"
                        :class="['start-rotate-' + block.rotation, {'block-placed': block.placed}]"
                        @click="rotateStartBlock(index, 'high')"
                        @dragstart="startDrag($event, index, 'start', 'high')"
                        @dragend="endDrag"
                        draggable="true"
                      >
                        <span class="start-label">{{ block.name }}</span>
                      </div>
                    </div>
                  </div>

                </div>
              </v-card>
            </v-container>
          </v-sheet>

          <!-- ‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ 5 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á -->
          <v-sheet v-if="tab === 'high-timer'" dark class="d-flex flex-column align-center justify-center fill-height" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: #000000; padding: 0; margin: 0; padding-top: 64px; z-index: 1;">
            <v-container fluid class="fill-height d-flex flex-column align-center justify-center" style="max-width: 100%;">
              
              <!-- ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏´‡∏•‡∏±‡∏Å ‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ -->
              <div style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                
                <!-- ‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ -->
                <div v-if="highTimerIsPreparing" class="text-center">
                  <p class="text-h6 mb-4" style="color: #FFA726; opacity: 0.7;">‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°...</p>
                  <div class="fixed-number" 
                       :style="isFullScreen ? 'font-size: 35vh; color: #FFA726; font-weight: bold; line-height: 1;' : 'font-size: 20rem; color: #FFA726; font-weight: bold; line-height: 1;'">
                    {{ highTimerPrepareCountdown }}
                  </div>
                </div>

                <!-- ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ (‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏ç‡πà) - ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≠‡∏ô‡∏´‡∏¢‡∏∏‡∏î -->
                <div v-if="!highTimerIsPreparing && !highTimerRunning" class="text-center">
                  <div style="margin-bottom: 12px;">
                    <v-chip color="orange" dark large>
                      <v-icon left small>mdi-clock-check</v-icon>
                      ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ
                    </v-chip>
                  </div>
                  <div class="fixed-number" 
                       :style="isFullScreen ? 'font-size: 35vh; color: #FF9800; font-weight: 300; line-height: 1;' : 'font-size: 20rem; color: #FF9800; font-weight: 300; line-height: 1;'">
                    {{ String(highTimerElapsedMinutes).padStart(2, '0') }}:{{ String(highTimerElapsedSeconds).padStart(2, '0') }}<span :style="isFullScreen ? 'font-size: 20vh; opacity: 0.7;' : 'font-size: 12rem; opacity: 0.7;'">.{{ String(highTimerElapsedMilliseconds).padStart(2, '0') }}</span>
                  </div>
                </div>

                <!-- ‡πÄ‡∏ß‡∏•‡∏≤‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠ (‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏ç‡πà) - ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≠‡∏ô‡∏£‡∏±‡∏ô -->
                <div v-if="!highTimerIsPreparing && highTimerRunning" class="text-center">
                  <div style="margin-bottom: 12px;">
                    <v-chip v-if="highTimerIsPractice" color="purple darken-2" dark large>
                      <v-icon left small>mdi-timer-sand</v-icon>
                      ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏ã‡πâ‡∏≠‡∏°
                    </v-chip>
                    <v-chip v-else color="orange darken-2" dark large>
                      <v-icon left small>mdi-trophy</v-icon>
                      ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏Ç‡πà‡∏á ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á
                    </v-chip>
                  </div>
                  <div class="fixed-number" 
                       :style="isFullScreen ? 'font-size: 35vh; color: ' + (highTimerIsOvertime ? '#FF0000' : '#FFFFFF') + '; font-weight: 300; line-height: 1;' : 'font-size: 20rem; color: ' + (highTimerIsOvertime ? '#FF0000' : '#FFFFFF') + '; font-weight: 300; line-height: 1;'">
                    <span v-if="highTimerIsOvertime">-</span>{{ String(highTimerMinutes).padStart(2, '0') }}:{{ String(highTimerSeconds).padStart(2, '0') }}<span :style="isFullScreen ? 'font-size: 20vh; opacity: 0.7;' : 'font-size: 12rem; opacity: 0.7;'">.{{ String(highTimerMilliseconds).padStart(2, '0') }}</span>
                  </div>
                </div>

                <!-- Badges ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á - ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤ -->
                <div v-if="!highTimerIsPreparing" class="text-center mt-4" style="position: absolute; bottom: 120px; left: 0; right: 0;">
                  <v-chip color="orange darken-2" dark small class="mx-1">
                    <v-icon left x-small>mdi-clock-check</v-icon>
                    ‡πÉ‡∏ä‡πâ‡πÑ‡∏õ: {{ String(highTimerElapsedMinutes).padStart(2, '0') }}:{{ String(highTimerElapsedSeconds).padStart(2, '0') }}.{{ String(highTimerElapsedMilliseconds).padStart(2, '0') }}
                  </v-chip>
                  <v-chip color="green darken-2" dark small class="mx-1">
                    <v-icon left x-small>mdi-timer-sand</v-icon>
                    ‡πÄ‡∏´‡∏•‡∏∑‡∏≠: {{ String(highTimerMinutes).padStart(2, '0') }}:{{ String(highTimerSeconds).padStart(2, '0') }}.{{ String(highTimerMilliseconds).padStart(2, '0') }}
                  </v-chip>
                  <v-chip color="grey darken-3" dark class="mx-1">
                    <v-icon left small>mdi-keyboard</v-icon>
                    <strong>Space</strong>: ‡πÄ‡∏£‡∏¥‡πà‡∏°/‡∏´‡∏¢‡∏∏‡∏î | <strong>1</strong>: ‡∏ã‡πâ‡∏≠‡∏° 1 ‡∏ô‡∏≤‡∏ó‡∏µ | <strong>5</strong>: ‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ 5 ‡∏ô‡∏≤‡∏ó‡∏µ | <strong>0</strong>: ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
                  </v-chip>
                </div>

              </div>

              <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á (‡πÅ‡∏Ñ‡πà‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô) -->
              <div style="position: absolute; bottom: 60px; left: 0; right: 0; text-align: center;">
                <v-btn
                  v-if="!highTimerRunning && !highTimerIsPreparing"
                  fab
                  color="orange"
                  dark
                  @click="startHighTimer"
                >
                  <v-icon>mdi-play</v-icon>
                </v-btn>
                <v-btn
                  v-if="highTimerRunning"
                  fab
                  small
                  color="orange darken-2"
                  dark
                  @click="pauseHighTimer"
                >
                  <v-icon small>mdi-pause</v-icon>
                </v-btn>
                <v-btn
                  fab
                  small
                  color="red"
                  dark
                  @click="resetHighTimer"
                  class="ml-3"
                  :disabled="highTimerIsPreparing"
                >
                  <v-icon small>mdi-refresh</v-icon>
                </v-btn>
              </div>

              
            </v-container>

            <!-- Progress Bar - ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏à‡∏≠ -->
            <v-progress-linear
              v-if="!highTimerIsPreparing"
              :value="((highTimerElapsedMinutes * 60 + highTimerElapsedSeconds) / 300) * 100"
              height="6"
              :color="highTimerMinutes === 0 && highTimerSeconds <= 10 ? 'red' : 'orange'"
              background-color="grey darken-4"
              style="position: fixed; bottom: 0; left: 0; right: 0; z-index: 10;"
            ></v-progress-linear>
          </v-sheet>

          <!-- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á -->
          <v-sheet v-if="tab === 'high-teams'" class="pa-4">
           
              <!-- Header ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏õ‡∏∏‡πà‡∏° -->
              <div class="d-flex justify-space-between align-center mb-4">
                <div>
                  <h2 class="text-h5">
                    <v-icon large color="orange" class="mr-2">mdi-account-group</v-icon>
                    ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏° (‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á)<span v-if="filterCompetition_high" class="ml-2 text-subtitle-1">({{ filterCompetition_high }})</span>
                  </h2>
                  <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å -->
                  <div class="mt-2 d-flex flex-wrap align-center" style="gap: 8px;">
                    <v-chip color="orange darken-1" dark>
                      <v-icon left small>mdi-account-multiple</v-icon>
                      <strong>{{ filteredTeams_high.length }}/{{ highTeams.length }}</strong> ‡∏ó‡∏µ‡∏°
                    </v-chip>
                    <v-chip v-if="filterZone_high !== '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'" color="blue darken-1" dark>
                      <v-icon left small>mdi-map-marker</v-icon>
                      ‡πÄ‡∏Ç‡∏ï {{ filterZone_high }}
                    </v-chip>
                    <v-chip 
                      @click="toggleFilterLevel_high" 
                      color="purple darken-1" 
                      dark
                      style="cursor: pointer;"
                    >
                      <v-icon left small>mdi-school</v-icon>
                      {{ filterLevel_high }}
                      <v-icon right small>mdi-chevron-down</v-icon>
                    </v-chip>
                    <v-chip 
                      @click="toggleFilterField_high" 
                      color="teal darken-1" 
                      dark
                      style="cursor: pointer;"
                    >
                      <v-icon left small>mdi-stadium</v-icon>
                      ‡∏™‡∏ô‡∏≤‡∏° {{ filterField_high }}
                      <v-icon right small>mdi-chevron-down</v-icon>
                    </v-chip>
                    <v-chip v-if="filterCompetition_high" color="green darken-1" dark>
                      <v-icon left small>mdi-trophy</v-icon>
                      {{ filterCompetition_high }}
                    </v-chip>
                    <v-chip v-if="filterZone_high === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' && filterLevel_high === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' && filterField_high === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' && !filterCompetition_high" color="grey" outlined>
                      <v-icon left small>mdi-filter-off</v-icon>
                      ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    </v-chip>
                  </div>
                </div>
                <div>
                  <v-btn
                    icon
                    color="orange"
                    @click="openFilterDialogHigh"
                    class="mr-2"
                  >
                    <v-icon>mdi-filter</v-icon>
                  </v-btn>
                  <v-btn
                    icon
                    color="orange"
                    @click="currentLevel = 'high'; openAuthDialog()"
                    class="mr-2"
                    v-if="!isAuthenticated || !canEditHigh"
                  >
                    <v-icon>mdi-lock-open</v-icon>
                  </v-btn>
                  <v-btn
                    icon
                    color="grey"
                    @click="logout"
                    class="mr-2"
                    v-if="isAuthenticated"
                  >
                    <v-icon>mdi-logout</v-icon>
                  </v-btn>
                  <v-btn
                    icon
                    color="orange"
                    @click="openAddTeamDialog"
                    :disabled="!canEditHigh"
                  >
                    <v-icon>mdi-plus</v-icon>
                  </v-btn>
                </div>
              </div>

              <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏° (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô Grid) -->
              <v-row v-if="filteredTeams_high.length > 0">
                <v-col
                  v-for="(item, index) in filteredTeams_high"
                  :key="item.school_id"
                  cols="12"
                  md="6"
                  lg="4"
                  xl="3"
                >
                  <v-card
                    class="team-card"
                    elevation="2"
                    hover
                    height="100%"
                    :class="{ 'editable-card': canEditHigh }"
                  >
                    <!-- Header ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î -->
                    <v-card-title class="pb-2 white--text" :class="getFieldHeaderColor(item.field)" style="padding: 8px 12px !important;">
                      <div style="width: 100%;">
                        <!-- ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà 1: ID, ‡∏™‡∏ô‡∏≤‡∏°, ‡∏£‡∏∞‡∏î‡∏±‡∏ö, ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô -->
                        <div class="text-caption d-flex align-center flex-wrap" style="gap: 4px; line-height: 1.2; opacity: 0.95;">
                          <v-chip x-small color="white" :text-color="getFieldTextColor(item.field)">
                            <strong>{{ item.school_id }}</strong>
                          </v-chip>
                          <v-chip x-small :color="getFieldChipColor(item.field)" dark>
                            <v-icon x-small left>mdi-stadium</v-icon>
                            ‡∏™‡∏ô‡∏≤‡∏° {{ item.field }}
                          </v-chip>
                          <span><v-icon x-small color="white">mdi-school</v-icon> {{ item.level }}</span>
                          <span v-if="item.competition">|</span>
                          <span v-if="item.competition"><v-icon x-small color="white">mdi-trophy-outline</v-icon> {{ item.competition }}</span>
                        </div>
                        
                        <!-- ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà 2: ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô + ‡πÄ‡∏Ç‡∏ï + ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å -->
                        <div class="mt-1 d-flex align-center justify-space-between">
                          <span class="text-subtitle-2 font-weight-bold" style="line-height: 1.3;">{{ item.school_name }}</span>
                          <div class="d-flex align-center" style="gap: 4px;">
                            <v-chip x-small dark color="white" :text-color="getFieldTextColor(item.field)">
                              <v-icon x-small left>mdi-map-marker</v-icon>
                              ‡πÄ‡∏Ç‡∏ï {{ item.zone }}
                            </v-chip>
                            <v-btn
                              v-if="canEditHigh"
                              icon
                              large
                              color="white"
                              @click="saveTeam_high(item)"
                              :loading="item.updating"
                            >
                              <v-icon >mdi-content-save</v-icon>
                            </v-btn>
                          </div>
                        </div>
                      </div>
                    </v-card-title>

                    <!-- ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° -->
                    <v-card-text class="py-2 px-2">
                      <v-row dense no-gutters class="align-center">
                        <v-col cols="auto" class="pr-2">
                          <v-icon color="warning" style="font-size: 28px;">mdi-star</v-icon>
                        </v-col>
                        <v-col>
                          <v-row dense no-gutters>
                            <v-col cols="4" class="px-1 text-center">
                              <div class="d-flex align-center justify-center">
                                <v-icon small color="success" class="mr-1">mdi-trophy</v-icon>
                                <span class="font-weight-bold success--text" style="font-size: 1.1rem;">{{ getBestScore(item) }}</span>
                              </div>
                            </v-col>
                            <v-col cols="4" class="px-1 text-center">
                              <div class="d-flex align-center justify-center">
                                <v-icon small :color="getBestRetry(item) === 0 ? 'success' : 'warning'" class="mr-1">mdi-refresh</v-icon>
                                <span class="font-weight-bold" :class="getBestRetry(item) === 0 ? 'success--text' : 'warning--text'" style="font-size: 1rem;">{{ getBestRetry(item) }}</span>
                              </div>
                            </v-col>
                            <v-col cols="4" class="px-1 text-center">
                              <div class="d-flex align-center justify-center">
                                <v-icon small color="info" class="mr-1">mdi-clock-outline</v-icon>
                                <span class="info--text" style="font-size: 0.95rem;">{{ getBestTime(item) }}</span>
                              </div>
                            </v-col>
                          </v-row>
                        </v-col>
                      </v-row>
                    </v-card-text>

                    <v-divider></v-divider>

                    <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô -->
                    <v-card-text class="pa-2">
                      <!-- ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 1 -->
                      <v-row dense no-gutters class="mb-2 align-center">
                        <v-col cols="auto" class="pr-2">
                          <span class="text-h6 orange--text font-weight-bold">1</span>
                        </v-col>
                        <v-col>
                          <v-row dense no-gutters>
                            <v-col cols="4" class="px-1">
                              <v-text-field
                                class="time-input"
                                v-model.number="item.score1"
                                type="number"
                                dense
                                hide-details
                                solo
                                flat
                                  :readonly="!canEditHigh"
                              >
                                <template v-slot:prepend-inner>
                                  <v-icon small color="success">mdi-trophy</v-icon>
                                </template>
                              </v-text-field>
                            </v-col>
                            <v-col cols="4" class="px-1">
                              <v-text-field
                                class="time-input"
                                v-model.number="item.retry1"
                                type="number"
                                dense
                                hide-details
                                solo
                                flat
                                  :readonly="!canEditHigh"
                              >
                                <template v-slot:prepend-inner>
                                  <v-icon small color="orange">mdi-refresh</v-icon>
                                </template>
                              </v-text-field>
                            </v-col>
                            <v-col cols="4" class="px-1">
                              <v-text-field
                                class="time-input"
                                v-model="item.time1"
                                dense
                                hide-details
                                solo
                                flat
                                  :readonly="!canEditHigh"
                                  placeholder="0:43:84"
                                  @input="formatTimeInput($event, item, 'time1')"
                                  @blur="validateTimeFormat(item, 'time1')"
                              >
                                <template v-slot:prepend-inner>
                                  <v-icon small color="blue">mdi-clock-outline</v-icon>
                                </template>
                              </v-text-field>
                            </v-col>
                          </v-row>
                        </v-col>
                      </v-row>

                      <!-- ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà 2 -->
                      <v-row dense no-gutters class="mb-1 align-center">
                        <v-col cols="auto" class="pr-2">
                          <span class="text-h6 orange--text font-weight-bold">2</span>
                        </v-col>
                        <v-col>
                          <v-row dense no-gutters>
                            <v-col cols="4" class="px-1">
                              <v-text-field
                                class="time-input"
                                v-model.number="item.score2"
                                type="number"
                                dense
                                hide-details
                                solo
                                flat
                                  :readonly="!canEditHigh"
                              >
                                <template v-slot:prepend-inner>
                                  <v-icon small color="success">mdi-trophy</v-icon>
                                </template>
                              </v-text-field>
                            </v-col>
                            <v-col cols="4" class="px-1">
                              <v-text-field
                                class="time-input"
                                v-model.number="item.retry2"
                                type="number"
                                dense
                                hide-details
                                solo
                                flat
                                  :readonly="!canEditHigh"
                              >
                                <template v-slot:prepend-inner>
                                  <v-icon small color="orange">mdi-refresh</v-icon>
                                </template>
                              </v-text-field>
                            </v-col>
                            <v-col cols="4" class="px-1">
                              <v-text-field
                                class="time-input"
                                v-model="item.time2"
                                dense
                                hide-details
                                solo
                                flat
                                  :readonly="!canEditHigh"
                                  placeholder="0:43:84"
                                  @input="formatTimeInput($event, item, 'time2')"
                                  @blur="validateTimeFormat(item, 'time2')"
                              >
                                <template v-slot:prepend-inner>
                                  <v-icon small color="blue">mdi-clock-outline</v-icon>
                                </template>
                              </v-text-field>
                            </v-col>
                          </v-row>
                        </v-col>
                      </v-row>
                    </v-card-text>

               


                  </v-card>
                </v-col>
              </v-row>
              
              <v-alert v-else type="info" text class="mt-4">
                <v-icon left>mdi-information</v-icon>
                ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡∏° ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡∏°‡πÉ‡∏´‡∏°‡πà
              </v-alert>
              
              <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Google Sheets -->
              <v-btn
                class="mt-4"
                color="orange"
                block
                outlined
                @click="loadTeamsFromGAS"
                :loading="isLoadingTeams"
              >
                <v-icon left>mdi-refresh</v-icon>
                ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Google Sheets
              </v-btn>
            
          </v-sheet>

          <!-- ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á -->
          <!-- ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á -->
          <v-sheet v-if="tab === 'high-results'" class="pa-4">
           
              
                <v-card-title class="d-flex flex-wrap flex-row align-center justify-space-between py-2 px-1" style="gap: 8px; min-height: unset;">
                  <div class="d-flex align-center flex-grow-1 min-width-0" style="gap: 8px;">
                    <v-icon color="orange" class="mr-2" :size="$vuetify.breakpoint.smAndDown ? 28 : 44">mdi-trophy</v-icon>
                    <span class="font-weight-bold text-truncate"
                          :style="$vuetify.breakpoint.smAndDown ? 'font-size: 1.1rem; max-width: 70vw;' : 'font-size: 2.1rem; max-width: 70vw;'">
                      ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á
                      <span v-if="filterCompetition_high"> ({{ filterLevel_high }} - {{ filterCompetition_high }})</span>
                    </span>
                  </div>
                  <div class="d-flex align-center flex-wrap" style="gap: 4px;">
                    <v-chip x-small class="mr-1" color="orange" dark>{{ sortedTeams_high.length }}/{{ highTeams.length }} ‡∏ó‡∏µ‡∏°</v-chip>
                    <v-chip v-if="filterZone_high !== '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'" x-small color="blue darken-1" dark>‡πÄ‡∏Ç‡∏ï {{ filterZone_high }}</v-chip>
                    <v-chip @click="toggleFilterLevel_high" x-small color="purple darken-1" dark style="cursor: pointer;">
                      {{ filterLevel_high }}
                      <v-icon right x-small>mdi-chevron-down</v-icon>
                    </v-chip>
                    <v-chip @click="toggleFilterField_high" x-small color="teal darken-1" dark style="cursor: pointer;">
                      ‡∏™‡∏ô‡∏≤‡∏° {{ filterField_high }}
                      <v-icon right x-small>mdi-chevron-down</v-icon>
                    </v-chip>
                    <v-chip v-if="filterCompetition_high" x-small color="green darken-1" dark>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£: {{ filterCompetition_high }}</v-chip>
                    <span v-if="filterZone_high === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' && filterLevel_high === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' && filterField_high === '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' && !filterCompetition_high">‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                    <v-btn icon color="orange" @click="openFilterDialogHigh" class="ml-1">
                      <v-icon>mdi-filter</v-icon>
                    </v-btn>
                    <v-btn icon color="orange" @click="loadTeamsFromGAS" :loading="isLoadingTeams">
                      <v-icon>mdi-refresh</v-icon>
                    </v-btn>
                  </div>
                </v-card-title>
                <v-divider class="my-4"></v-divider>
                
                
                  <div v-if="sortedTeams_high.length > 0">
                    <!-- ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô -->
                   
                    
                    <v-card outlined class="pa-4 mb-6">
                      <canvas id="resultsChartHigh" :style="'height: ' + (sortedTeams_high.length * 40 + 100) + 'px;'"></canvas>
                    </v-card>
                    
                    <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î -->
                    <v-divider class="my-6"></v-divider>
                    <h3 class="text-h6 mb-3">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô</h3>
                    <v-data-table
                      :headers="resultsHeaders"
                      :items="sortedTeams_high"
                      :items-per-page="20"
                      class="elevation-1"
                      dense
                    >
                      <template v-slot:item.rank="{ item, index }">
                        <v-chip
                          small
                          :color="getRankColor(index)"
                          dark
                        >
                          {{ index + 1 }}
                        </v-chip>
                      </template>
                      
                      <template v-slot:item.school_name="{ item }">
                        <strong>{{ item.school_name }}</strong>
                      </template>
                      
                      <template v-slot:item.score="{ item }">
                        <strong class="orange--text" style="font-size: 1.1rem;">{{ getBestScore(item) }}</strong>
                      </template>
                      
                      <template v-slot:item.retry="{ item }">
                        <v-chip
                          small
                          :color="getRetryChipColor(getBestRetry(item))"
                          dark
                        >
                          {{ getBestRetry(item) }}
                        </v-chip>
                      </template>
                      
                      <template v-slot:item.time="{ item }">
                        <strong>{{ getBestTime(item) }}</strong>
                      </template>
                    </v-data-table>
                  </div>
                  
                  <v-alert v-else type="info" text prominent>
                    <v-row align="center">
                      <v-col class="grow">
                        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Google Sheets
                      </v-col>
                      <v-col class="shrink">
                        <v-btn
                          color="orange"
                          @click="loadTeamsFromGAS"
                          :loading="isLoadingTeams"
                        >
                          <v-icon left>mdi-refresh</v-icon>
                          ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        </v-btn>
                      </v-col>
                    </v-row>
                  </v-alert>
                
              
           
          </v-sheet>
        </v-container>
      </v-main>
      
      <!-- Snackbar ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô -->
      <v-snackbar
        v-model="snackbar"
        :color="snackbarColor"
        :timeout="3000"
        top
        right
      >
        {{ snackbarText }}
        <template v-slot:action="{ attrs }">
          <v-btn
            text
            v-bind="attrs"
            @click="snackbar = false"
          >
            ‡∏õ‡∏¥‡∏î
          </v-btn>
        </template>
      </v-snackbar>
    </v-app>
  </div>

  <script>
    // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î routes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÅ‡∏ó‡πá‡∏ö
    const routes = [
      { path: '/', redirect: '/home' },
      { path: '/home', name: 'home' },
      { path: '/random', name: 'random' },
      { path: '/timer', name: 'timer' },
      { path: '/countdown', name: 'countdown' },
      { path: '/mid/rules', name: 'mid-rules' },
      { path: '/mid/field', name: 'mid-field' },
      { path: '/mid/timer', name: 'mid-timer' },
      { path: '/mid/teams', name: 'mid-teams' },
      { path: '/mid/results', name: 'mid-results' },
      { path: '/high/rules', name: 'high-rules' },
      { path: '/high/field', name: 'high-field' },
      { path: '/high/timer', name: 'high-timer' },
      { path: '/high/teams', name: 'high-teams' },
      { path: '/high/results', name: 'high-results' }
    ];

    const router = new VueRouter({
      mode: 'hash', // ‡πÉ‡∏ä‡πâ hash mode ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö static file
      routes
    });

    new Vue({
      el: '#app',
      router,
      vuetify: new Vuetify(),
      data() {
        return {
          drawer: true,
          tab: this.$route.name || 'home', // ‡πÉ‡∏ä‡πâ route name ‡πÄ‡∏õ‡πá‡∏ô tab ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
          expandedMid: false,
          expandedHigh: false,
          grid: Array.from({ length: 32 }, (_, i) => i + 1),
          current: null,
          highlighted: null,
          timer: null,
          dialog: false,
          isRandomRunning: false,
          randomSpeed: 500,
          timerRunning: false,
          time: 0,
          fullscreenText: "",
          fullscreenText2: "",
          isFullScreen: false,
          timerPrepareCountdown: 0,
          isPreparing: false,
          countdown: null,
          countdownValue: 0,
          inputHours: 0,
          inputMinutes: 30,
          showTimeInputs: true,
          isTimeUp: false,
          isBlinking: false,
          totalCountdownSeconds: 0,
          countdownPrepareCountdown: 0,
          isCountdownPreparing: false,
          rouletteNumber: null,
          selectedNumbers: [],
          wheelAngle: 0,
          wheelCanvas: null,
          wheelCtx: null,
          spinAnimation: null,
          wheelNumbers: Array.from({ length: 32 }, (_, i) => i + 1),
          lastSliceIndex: -1,
          audioContext: null,
          
          // Mid Timer (3 minutes)
          midTimerRunning: false,
          midTimerMinutes: 3,
          midTimerSeconds: 0,
          midTimerMilliseconds: 0,
          midTimerElapsedMinutes: 0,
          midTimerElapsedSeconds: 0,
          midTimerElapsedMilliseconds: 0,
          midTimerInterval: null,
          midTimerPrepareCountdown: 0,
          midTimerIsPreparing: false,
          midTimerIsPractice: false, // flag ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏ã‡πâ‡∏≠‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
          midTimerIsOvertime: false, // flag ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß (‡∏ï‡∏¥‡∏î‡∏•‡∏ö)
          
          // High Timer (5 minutes)
          highTimerRunning: false,
          highTimerMinutes: 5,
          highTimerSeconds: 0,
          highTimerMilliseconds: 0,
          highTimerElapsedMinutes: 0,
          highTimerElapsedSeconds: 0,
          highTimerElapsedMilliseconds: 0,
          highTimerInterval: null,
          highTimerPrepareCountdown: 0,
          highTimerIsPreparing: false,
          highTimerIsPractice: false, // flag ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏ã‡πâ‡∏≠‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
          highTimerIsOvertime: false, // flag ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß (‡∏ï‡∏¥‡∏î‡∏•‡∏ö)
          
          // Field Grid Data - ‡πÅ‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á
          // ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á (Mid Level)
          midSelectedGrade: 'primary', // ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡∏ñ‡∏°
          midFieldGrid: Array(4).fill(null).map(() => Array(8).fill(null)),
          midFieldBlocks: [
            { id: 1, borders: 'all', placed: false, position: null, rotation: 0 },
            { id: 2, borders: 'bottom', placed: false, position: null, rotation: 0 },
            { id: 3, borders: 'right', placed: false, position: null, rotation: 0 },
            { id: 4, borders: 'top-right', placed: false, position: null, rotation: 0 },
            { id: 5, borders: 'bottom-right', placed: false, position: null, rotation: 0 },
            { id: 6, borders: 'left', placed: false, position: null, rotation: 0 },
            { id: 7, borders: 'top-left', placed: false, position: null, rotation: 0 },
            { id: 8, borders: 'bottom-left', placed: false, position: null, rotation: 0 },
            { id: 9, borders: 'top', placed: false, position: null, rotation: 0 },
            { id: 10, borders: 'top-bottom', placed: false, position: null, rotation: 0 }
          ],
          midCheckpointBlocks: [
            { id: 'C1', borders: 'none', placed: false, position: null, rotation: 0, hasCheckpoint: true },
            { id: 'C2', borders: 'bottom', placed: false, position: null, rotation: 0, hasCheckpoint: true },
            { id: 'C3', borders: 'bottom-left', placed: false, position: null, rotation: 0, hasCheckpoint: true },
            { id: 'C4', borders: 'top-bottom', placed: false, position: null, rotation: 0, hasCheckpoint: true }
          ],
          midObstacleBlocks: [
            { id: 'H1', type: 'blackhole', placed: false, position: null, rotation: 0 }
          ],
          midBallBlocks: [
            { id: 'B1', color: 'orange', name: 'Stick', placed: false, position: null, rotation: 0 }
          ],
          midBridgeBlocks: [
            { id: 'BR1', placed: false, position: null, rotation: 0, size: 3 }
          ],
          midZoneBlocks: [
            { id: '1', color: '#4CAF50', name: '‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß', shape: 'half-left', border: 'left', placed: false, position: null, rotation: 0 },
            { id: '2', color: '#4CAF50', name: '‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß', shape: 'half-left', border: 'left', placed: false, position: null, rotation: 0 },
            { id: '3', color: '#4CAF50', name: '‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß', shape: 'half-left', border: 'three-sides', placed: false, position: null, rotation: 0 },
            { id: '4', color: '#4CAF50', name: '‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß', shape: 'half-left', border: 'three-sides', placed: false, position: null, rotation: 0 }
          ],
          midStartBlock: [
            { id: 'START', color: '#CCCCCC', name: 'START', placed: false, position: null, rotation: 0 }
          ],
          
          // ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á (High Level)
          highSelectedGrade: 'primary', // ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡∏ñ‡∏°
          highFieldGrid: Array(4).fill(null).map(() => Array(8).fill(null)),
          highFieldBlocks: [
            { id: 1, borders: 'all', placed: false, position: null, rotation: 0 },
            { id: 2, borders: 'bottom', placed: false, position: null, rotation: 0 },
            { id: 3, borders: 'right', placed: false, position: null, rotation: 0 },
            { id: 4, borders: 'top-right', placed: false, position: null, rotation: 0 },
            { id: 5, borders: 'bottom-right', placed: false, position: null, rotation: 0 },
            { id: 6, borders: 'left', placed: false, position: null, rotation: 0 },
            { id: 7, borders: 'top-left', placed: false, position: null, rotation: 0 },
            { id: 8, borders: 'bottom-left', placed: false, position: null, rotation: 0 },
            { id: 9, borders: 'top', placed: false, position: null, rotation: 0 },
            { id: 10, borders: 'top-bottom', placed: false, position: null, rotation: 0 }
          ],
          highCheckpointBlocks: [
            { id: 'C1', borders: 'none', placed: false, position: null, rotation: 0, hasCheckpoint: true },
            { id: 'C2', borders: 'bottom', placed: false, position: null, rotation: 0, hasCheckpoint: true },
            { id: 'C3', borders: 'bottom-left', placed: false, position: null, rotation: 0, hasCheckpoint: true },
            { id: 'C4', borders: 'top-bottom', placed: false, position: null, rotation: 0, hasCheckpoint: true }
          ],
          highObstacleBlocks: [
            { id: 'H1', type: 'blackhole', placed: false, position: null, rotation: 0 }
          ],
          highBallBlocks: [
            { id: 'B1', color: 'orange', name: 'Stick', placed: false, position: null, rotation: 0 }
          ],
          highBridgeBlocks: [
            { id: 'BR1', placed: false, position: null, rotation: 0, size: 3 }
          ],
          highZoneBlocks: [
            { id: '1', color: '#FF0000', name: '‡πÅ‡∏î‡∏á', shape: 'half-left', border: 'three-sides', placed: false, position: null, rotation: 0 },
            { id: '2', color: '#0066FF', name: '‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô', shape: 'half-left', border: 'three-sides', placed: false, position: null, rotation: 0 },
            { id: '3', color: '#FFD700', name: '‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á', shape: 'half-left', border: 'three-sides', placed: false, position: null, rotation: 0 },
            { id: '4', color: '#00CC66', name: '‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß', shape: 'half-left', border: 'three-sides', placed: false, position: null, rotation: 0 }
          ],
          highStartBlock: [
            { id: 'START', color: '#CCCCCC', name: 'START', placed: false, position: null, rotation: 0 }
          ],
          
          // Shared variables
          draggedBlockIndex: null,
          draggedBlockType: null,
          draggedLevel: null,
          maxCheckpoints: 2,
          midCheckpointCount: 0,
          highCheckpointCount: 0,
          
          // Teams Management - Mid Level
          midTeams: [],
          
          // Teams Management - High Level
          highTeams: [],
          
          addTeamDialog: false,
          newTeam: {
            school_id: '',
            school_name: '',
            zone: '',
            level: '',
            competition: '',
            field: '',
            score1: 0,
            retry1: 0,
            time1: '0:00:00',
            score2: 0,
            retry2: 0,
            time2: '0:00:00'
          },
          isSaving: false,
          saveStatus: null,
          isLoadingTeams: false,
          
          // Filters - Mid Level
          filterZone: '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
          filterLevel: '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
          filterField: '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
          filterCompetition: '',
          
          // Filters - High Level
          filterZone_high: '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
          filterLevel_high: '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
          filterField_high: '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
          filterCompetition_high: '',
          
          showFilters: [0], // ‡πÄ‡∏õ‡∏¥‡∏î expansion panel ‡πÅ‡∏£‡∏Å (index 0)
          filterDialogMid: false,
          filterDialogHigh: false,
          availableZones: [],
          availableFields: [],
          availableZones_high: [],
          availableFields_high: [],
          
          // Snackbar
          snackbar: false,
          snackbarText: '',
          snackbarColor: 'success',
          
          // Authentication - Multi-user system
          isAuthenticated: false,
          authDialog: false,
          username: '',
          password: '',
          authError: '',
          isAuthenticating: false,
          showPassword: false,
          isSavingDefaultFilter: false,
          currentUser: null, // { username, role, level }
          currentLevel: 'mid', // ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏π (mid/high)
          settings: {}, // ‡πÄ‡∏Å‡πá‡∏ö settings ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å Google Sheets (key-value)
          
          // Team Headers
          teamHeaders: [
            { text: '‡∏£‡∏´‡∏±‡∏™', value: 'school_id', width: '100px' },
            { text: '‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', value: 'school_name', width: '200px' },
            { text: '‡πÄ‡∏Ç‡∏ï', value: 'zone', width: '80px' },
            { text: '‡∏™‡∏ô‡∏≤‡∏°', value: 'field', width: '80px' },
            { text: '# score1', value: 'score1', width: '100px' },
            { text: '# retry1', value: 'retry1', width: '90px' },
            { text: 'time1', value: 'time1', width: '110px' },
            { text: '# score2', value: 'score2', width: '100px' },
            { text: '# retry2', value: 'retry2', width: '90px' },
            { text: 'time2', value: 'time2', width: '110px' },
            { text: 'score', value: 'score', width: '90px' },
            { text: 'retry', value: 'retry', width: '80px' },
            { text: 'time', value: 'time', width: '110px' },
            { text: '‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£', value: 'actions', sortable: false, width: '120px' }
          ],
          
          // Results Headers
          resultsHeaders: [
            { text: '‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö', value: 'rank', width: '80px' },
            { text: '‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', value: 'school_name' },
            { text: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô', value: 'score', width: '100px' },
            { text: 'retry', value: 'retry', width: '100px' },
            { text: '‡πÄ‡∏ß‡∏•‡∏≤', value: 'time', width: '120px' },
            { text: '‡πÄ‡∏Ç‡∏ï', value: 'zone', width: '80px' },
            { text: '‡∏™‡∏ô‡∏≤‡∏°', value: 'field', width: '80px' }
          ],
          
          // Chart.js instance
          resultsChartInstance: null,
          resultsChartHighInstance: null,
          
          // URL ‡∏Ç‡∏≠‡∏á Google Apps Script - ‡πÉ‡∏™‡πà URL ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
          gasUrl: 'https://script.google.com/macros/s/AKfycbwSfGi7G_eqCQh02sKBeF8-JnwOIyc0WPL7Dnntj_9EXPfEiwekHsahJZsP5BsOTYuUMg/exec'
        };
      },
      computed: {
        formattedTime() {
          const minutes = String(Math.floor(this.time / 6000)).padStart(1, "0");
          const seconds = String(Math.floor((this.time % 6000) / 100)).padStart(2, "0");
          const centiseconds = String(this.time % 100).padStart(2, "0");
          return `${minutes}:${seconds}:${centiseconds}`;
        },
        isCountdownActive() {
          // ‡πÅ‡∏™‡∏î‡∏á countdown ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
          return this.countdown != null && this.totalCountdownSeconds > 0 && !this.isCountdownPreparing && !this.isTimeUp;
        },
        countdownTime() {
          const hours = String(Math.floor(this.countdownValue / 3600)).padStart(2, "0");
          const minutes = String(Math.floor((this.countdownValue % 3600) / 60)).padStart(2, "0");
          const seconds = String(this.countdownValue % 60).padStart(2, "0");
          return `${hours}:${minutes}:${seconds}`;
        },
        countdownColor() {
          if (this.isTimeUp) return 'red--text';
          if (this.totalCountdownSeconds === 0) return '';
          
          const percentage = (this.countdownValue / this.totalCountdownSeconds) * 100;
          
          if (percentage <= 3) {
            return 'deep-orange--text text--darken-4'; // ‡∏™‡∏µ‡∏™‡πâ‡∏°‡πÄ‡∏Ç‡πâ‡∏°
          } else if (percentage <= 10) {
            return 'purple--text text--darken-2'; // ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á
          } else if (percentage <= 50) {
            return 'blue--text text--darken-4'; // ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏°
          }
          
          return ''; // ‡∏™‡∏µ‡∏õ‡∏Å‡∏ï‡∏¥
        },
        countdownProgress() {
          if (this.totalCountdownSeconds === 0) return 0;
          return (this.countdownValue / this.totalCountdownSeconds) * 100;
        },
        countdownProgressColor() {
          const percentage = this.countdownProgress;
          
          if (percentage <= 3) {
            return 'deep-orange darken-4'; // ‡∏™‡∏µ‡∏™‡πâ‡∏°‡πÄ‡∏Ç‡πâ‡∏°
          } else if (percentage <= 10) {
            return 'purple darken-2'; // ‡∏™‡∏µ‡∏°‡πà‡∏ß‡∏á
          } else if (percentage <= 50) {
            return 'blue darken-4'; // ‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏°
          }
          
          return 'green'; // ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏õ‡∏Å‡∏ï‡∏¥
        },
        
        // ‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏° filter
        filteredTeams() {
          let teams = this.midTeams;
          
          // ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏Ç‡∏ï
          if (this.filterZone !== '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î') {
            teams = teams.filter(t => String(t.zone) === String(this.filterZone));
          }
          
          // ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö
          if (this.filterLevel !== '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î') {
            teams = teams.filter(t => t.level === this.filterLevel);
          }
          
          // ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏ô‡∏≤‡∏°
          if (this.filterField !== '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î') {
            teams = teams.filter(t => t.field === this.filterField);
          }
          
          // ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á (text search)
          if (this.filterCompetition && this.filterCompetition.trim() !== '') {
            const searchText = this.filterCompetition.trim().toLowerCase();
            teams = teams.filter(t => {
              const competition = (t.competition || '').toLowerCase();
              return competition.includes(searchText);
            });
          }
          
          return teams;
        },
        
        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡∏°‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (Mid Level)
        sortedTeams() {
          return [...this.filteredTeams].sort((a, b) => {
            const scoreA = this.getBestScore(a);
            const scoreB = this.getBestScore(b);
            
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏°‡∏≤‡∏Å‡πÑ‡∏õ‡∏ô‡πâ‡∏≠‡∏¢
            if (scoreB !== scoreA) {
              return scoreB - scoreA;
            }
            
            // ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° retry (‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤)
            const retryA = this.getBestRetry(a);
            const retryB = this.getBestRetry(b);
            if (retryA !== retryB) {
              return retryA - retryB;
            }
            
            // ‡∏ñ‡πâ‡∏≤ retry ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤)
            const timeA = this.timeToSeconds(this.getBestTime(a));
            const timeB = this.timeToSeconds(this.getBestTime(b));
            return timeA - timeB;
          });
        },
        
        // High Level - ‡∏Å‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡∏°‡∏ï‡∏≤‡∏°‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç
        filteredTeams_high() {
          let teams = this.highTeams;
          
          // ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏Ç‡∏ï
          if (this.filterZone_high && this.filterZone_high !== '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î') {
            teams = teams.filter(t => t.zone === this.filterZone_high);
          }
          
          // ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö
          if (this.filterLevel_high && this.filterLevel_high !== '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î') {
            teams = teams.filter(t => t.level === this.filterLevel_high);
          }
          
          // ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏™‡∏ô‡∏≤‡∏°
          if (this.filterField_high && this.filterField_high !== '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î') {
            teams = teams.filter(t => t.field === this.filterField_high);
          }
          
          // ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á
          if (this.filterCompetition_high && this.filterCompetition_high.trim() !== '') {
            const searchTerm = this.filterCompetition_high.toLowerCase();
            teams = teams.filter(t => 
              t.competition && t.competition.toLowerCase().includes(searchTerm)
            );
          }
          
          return teams;
        },
        
        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡∏°‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (High Level)
        sortedTeams_high() {
          return [...this.filteredTeams_high].sort((a, b) => {
            const scoreA = this.getBestScore(a);
            const scoreB = this.getBestScore(b);
            
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏°‡∏≤‡∏Å‡πÑ‡∏õ‡∏ô‡πâ‡∏≠‡∏¢
            if (scoreB !== scoreA) {
              return scoreB - scoreA;
            }
            
            // ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏° retry (‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤)
            const retryA = this.getBestRetry(a);
            const retryB = this.getBestRetry(b);
            if (retryA !== retryB) {
              return retryA - retryB;
            }
            
            // ‡∏ñ‡πâ‡∏≤ retry ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤)
            const timeA = this.timeToSeconds(this.getBestTime(a));
            const timeB = this.timeToSeconds(this.getBestTime(b));
            return timeA - timeB;
          });
        },
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
        canEdit() {
          if (!this.isAuthenticated || !this.currentUser) return false;
          if (this.currentUser.role === 'superadmin') return true;
          // admin ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
          return this.currentUser.level === this.currentLevel;
        },
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á
        canEditMid() {
          if (!this.isAuthenticated || !this.currentUser) return false;
          if (this.currentUser.role === 'superadmin') return true;
          // admin ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á
          return this.currentUser.level === 'mid';
        },
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á
        canEditHigh() {
          if (!this.isAuthenticated || !this.currentUser) return false;
          if (this.currentUser.role === 'superadmin') return true;
          // admin ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á
          return this.currentUser.level === 'high';
        },
        
        // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏µ App Bar ‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô
        appBarColor() {
          const routeName = this.$route.name;
          
          // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß
          if (routeName && routeName.startsWith('mid-')) {
            return 'green';
          }
          
          // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏™‡πâ‡∏°
          if (routeName && routeName.startsWith('high-')) {
            return 'orange';
          }
          
          // ‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÄ‡∏î‡∏¥‡∏° (primary/blue)
          return 'primary';
        }
      },
      methods: {
                goToCountdownPage() {
                  this.$router.push({ name: 'countdown' });
                },
        getRouletteColor(cell) {
          if (this.selectedNumbers.includes(cell)) return 'red lighten-1';
          return 'grey lighten-3';
        },
        getCellColor(cell) {
          if (this.highlighted === cell) return 'green lighten-1';
          if (this.current === cell) return 'yellow lighten-1';
          return 'grey lighten-3';
        },
        startRandom() {
          if (this.isRandomRunning) return;
          
          this.isRandomRunning = true;
          this.highlighted = null;
          this.current = null;
          
          let count = 0;
          const maxCount = 30;
          
          this.timer = setInterval(() => {
            this.current = this.grid[Math.floor(Math.random() * this.grid.length)];
            count++;
            
            if (count >= maxCount) {
              clearInterval(this.timer);
              this.highlighted = this.current;
              this.dialog = true;
              this.isRandomRunning = false;
            }
          }, this.randomSpeed);
        },
        initWheel() {
          this.wheelCanvas = this.$refs.wheelCanvas;
          if (!this.wheelCanvas) return;
          
          this.wheelCtx = this.wheelCanvas.getContext('2d');
          this.drawWheel();
        },
        drawWheel() {
          if (!this.wheelCtx) return;
          
          const ctx = this.wheelCtx;
          const canvas = this.wheelCanvas;
          const centerX = canvas.width / 2;
          const centerY = canvas.height / 2;
          const radius = canvas.width / 2 - 10;
          const numbers = 32;
          const anglePerSlice = (Math.PI * 2) / numbers;
          
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          
          // ‡∏™‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á (‡∏™‡∏•‡∏±‡∏ö‡∏™‡∏µ)
          const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#FFD93D'];
          
          for (let i = 0; i < numbers; i++) {
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô (90 ‡∏≠‡∏á‡∏®‡∏≤) ‡πÅ‡∏•‡∏∞‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏Ç‡πá‡∏°‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤
            const startAngle = this.wheelAngle + (i * anglePerSlice) - Math.PI / 2;
            const endAngle = startAngle + anglePerSlice;
            
            // ‡∏ß‡∏≤‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏ß‡∏á‡∏Å‡∏•‡∏°
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.arc(centerX, centerY, radius, startAngle, endAngle);
            ctx.closePath();
            ctx.fillStyle = colors[i % colors.length];
            ctx.fill();
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 2;
            ctx.stroke();
            
            // ‡∏ß‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç - ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏Ç‡∏à‡∏≤‡∏Å wheelNumbers array
            ctx.save();
            ctx.translate(centerX, centerY);
            ctx.rotate(startAngle + anglePerSlice / 2 + Math.PI / 2);
            ctx.textAlign = 'center';
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 20px Arial';
            ctx.fillText(this.wheelNumbers[i], 0, -radius + 30);
            ctx.restore();
          }
          
          // ‡∏ß‡∏≤‡∏î‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á
          ctx.beginPath();
          ctx.arc(centerX, centerY, 30, 0, Math.PI * 2);
          ctx.fillStyle = '#333';
          ctx.fill();
          ctx.strokeStyle = '#fff';
          ctx.lineWidth = 3;
          ctx.stroke();
        },
        startRoulette() {
          if (this.isRandomRunning) return;
          
          // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡∏•‡πâ‡∏≤‡∏á‡∏ú‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏Å‡πà‡∏≠‡∏ô (‡πÅ‡∏Ñ‡πà‡πÄ‡∏≠‡∏≤‡∏™‡∏µ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏≠‡∏Å)
          if (this.rouletteNumber !== null) {
            this.rouletteNumber = null;
            this.selectedNumbers = [];
          }
          
          this.isRandomRunning = true;
          
          // ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Å‡πà‡∏≠‡∏ô (1-32)
          const targetNumber = Math.floor(Math.random() * 32) + 1;
          
          // ‡∏´‡∏≤ index ‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡∏Ç‡∏ô‡∏±‡πâ‡∏ô‡πÉ‡∏ô wheelNumbers array
          const targetIndex = this.wheelNumbers.indexOf(targetNumber);
          
          // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡∏Ç‡∏≠‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏ô‡∏±‡πâ‡∏ô
          const anglePerSlice = (Math.PI * 2) / 32;
          
          // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏°‡∏∏‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ó‡∏µ‡πà normalize ‡πÅ‡∏•‡πâ‡∏ß (‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á 0 ‡∏ñ‡∏∂‡∏á 2œÄ)
          const currentNormalizedAngle = ((this.wheelAngle % (Math.PI * 2)) + (Math.PI * 2)) % (Math.PI * 2);
          
          // ‡∏°‡∏∏‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏®‡∏£‡∏ä‡∏µ‡πâ (‡∏ä‡∏µ‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏ä‡πà‡∏≠‡∏á targetIndex)
          // ‡∏ä‡πà‡∏≠‡∏á index 0 ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á 0, ‡∏ä‡πà‡∏≠‡∏á index 1 ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà anglePerSlice, ...
          const targetAngle = -(targetIndex * anglePerSlice) - (anglePerSlice / 2);
          const normalizedTargetAngle = ((targetAngle % (Math.PI * 2)) + (Math.PI * 2)) % (Math.PI * 2);
          
          // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
          let rotationNeeded = normalizedTargetAngle - currentNormalizedAngle;
          if (rotationNeeded > 0) {
            rotationNeeded -= Math.PI * 2; // ‡∏´‡∏°‡∏∏‡∏ô‡∏ó‡∏ß‡∏ô‡πÄ‡∏Ç‡πá‡∏°‡∏ô‡∏≤‡∏¨‡∏¥‡∏Å‡∏≤
          }
          
          // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≠‡∏ö (5-8 ‡∏£‡∏≠‡∏ö)
          const spins = 5 + Math.floor(Math.random() * 4);
          const totalRotation = (spins * Math.PI * 2) + rotationNeeded;
          
          const duration = 4000; // 4 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
          const startTime = Date.now();
          const startAngle = this.wheelAngle;
          this.lastSliceIndex = -1; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏≠‡∏á
          
          const animate = () => {
            const currentTime = Date.now();
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            
            // Easing function (ease out cubic)
            const easeOut = 1 - Math.pow(1 - progress, 3);
            
            this.wheelAngle = startAngle + totalRotation * easeOut;
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏µ‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡πà‡∏≠‡∏á)
            const currentNormalized = ((this.wheelAngle % (Math.PI * 2)) + (Math.PI * 2)) % (Math.PI * 2);
            const currentSliceIndex = Math.floor(currentNormalized / anglePerSlice);
            
            if (this.lastSliceIndex !== -1 && currentSliceIndex !== this.lastSliceIndex) {
              this.playTickSound();
            }
            this.lastSliceIndex = currentSliceIndex;
            
            this.drawWheel();
            
            if (progress < 1) {
              this.spinAnimation = requestAnimationFrame(animate);
            } else {
              // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ
              this.rouletteNumber = targetNumber;
              
              if (!this.selectedNumbers.includes(targetNumber)) {
                this.selectedNumbers.push(targetNumber);
              }
              
              this.isRandomRunning = false;
              this.lastSliceIndex = -1;
            }
          };
          
          animate();
        },
        shuffleWheelNumbers() {
          // ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏ö‡∏ö Fisher-Yates shuffle
          const shuffled = [...this.wheelNumbers];
          for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
          }
          this.wheelNumbers = shuffled;
          this.drawWheel();
        },
        resetRoulette() {
          if (this.spinAnimation) {
            cancelAnimationFrame(this.spinAnimation);
          }
          this.rouletteNumber = null;
          this.selectedNumbers = [];
          this.isRandomRunning = false;
          this.wheelAngle = 0;
          this.wheelNumbers = Array.from({ length: 32 }, (_, i) => i + 1);
          this.drawWheel();
        },
        toggleTimer() {
          if (this.timerRunning || this.isPreparing) {
            // ‡∏´‡∏¢‡∏∏‡∏î‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°
            clearInterval(this.timer);
            cancelAnimationFrame(this.timer);
            this.timerRunning = false;
            this.isPreparing = false;
          } else {
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 4 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            this.isPreparing = true;
            this.timerPrepareCountdown = 4;
            
            // ‡πÄ‡∏õ‡∏¥‡∏î fullscreen ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
            if (!document.fullscreenElement) {
              document.documentElement.requestFullscreen();
              this.isFullScreen = true;
            }
            
            // ‡πÉ‡∏ä‡πâ performance.now() ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏™‡∏π‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 4 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            const prepareStartTime = performance.now();
            let lastPrepareSecond = 4;
            
            const updatePrepareTimer = () => {
              const now = performance.now();
              const elapsed = now - prepareStartTime;
              const remainingMs = 4000 - elapsed;
              
              if (remainingMs > 0) {
                const remainingSeconds = Math.ceil(remainingMs / 1000);
                this.timerPrepareCountdown = remainingSeconds;
                
                // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á beep ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                if (remainingSeconds !== lastPrepareSecond && remainingSeconds > 0) {
                  this.playCountdownBeep();
                  lastPrepareSecond = remainingSeconds;
                }
                
                this.timer = requestAnimationFrame(updatePrepareTimer);
              } else {
                // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô 0 ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏π‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡∏¢
                this.playStartBeep();
                if (this.timer) {
                  cancelAnimationFrame(this.timer);
                }
                this.timerPrepareCountdown = 0;
                this.isPreparing = false;
                this.timerRunning = true;
                
                // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏î‡πâ‡∏ß‡∏¢ requestAnimationFrame
                const timerStartTime = performance.now();
                const updateStopwatch = () => {
                  if (!this.timerRunning) return;
                  const now = performance.now();
                  const elapsed = now - timerStartTime;
                  this.time = Math.floor(elapsed / 10); // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô centiseconds (1/100 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
                  this.timer = requestAnimationFrame(updateStopwatch);
                };
                this.timer = requestAnimationFrame(updateStopwatch);
              }
            };
            
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á prepare
            this.timer = requestAnimationFrame(updatePrepareTimer);
          }
        },
        resetTimer() {
          clearInterval(this.timer);
          cancelAnimationFrame(this.timer);
          this.time = 0;
          this.timerRunning = false;
          this.isPreparing = false;
          this.timerPrepareCountdown = 0;
        },
        toggleFullscreen() {
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
            this.isFullScreen = true;
            drawer = false;
          } else {
            document.exitFullscreen();
            this.isFullScreen = false;
          }
        },
        startCountdown(seconds) {
          // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô interval ‡∏ã‡πâ‡∏≠‡∏ô
          if (this.countdown) {
            clearInterval(this.countdown);
            this.countdown = null;
          }
          this.countdownValue = seconds;
          this.totalCountdownSeconds = seconds;
          this.isTimeUp = false;
          this.isBlinking = false;
          
          // ‡πÉ‡∏ä‡πâ performance.now() ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏™‡∏π‡∏á
          const startTime = performance.now();
          const durationMs = seconds * 1000;
          let lastSecond = seconds;
          let hasPlayedAlarm = false;
          
          const updateTimer = () => {
            const now = performance.now();
            const elapsed = now - startTime;
            const remainingMs = durationMs - elapsed;
            
            if (remainingMs > 0) {
              const remainingSeconds = Math.ceil(remainingMs / 1000);
              this.countdownValue = remainingSeconds;
              
              // ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
              if (remainingSeconds !== lastSecond) {
                // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÅ‡∏£‡∏Å (5, 4, 3, 2, 1)
                if (remainingSeconds <= 5 && remainingSeconds > 0) {
                  this.playCountdownBeep();
                }
                // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏à‡∏£‡∏¥‡∏á
                if (remainingSeconds === 0 && seconds > 5) {
                  this.playStartBeep();
                }
                lastSecond = remainingSeconds;
              }
              
              // ‡πÉ‡∏ä‡πâ requestAnimationFrame ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î
              this.countdown = requestAnimationFrame(updateTimer);
            } else {
              // ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß - ‡∏ô‡∏±‡∏ö‡∏ï‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏¥‡∏î‡∏•‡∏ö
              const overtimeMs = Math.abs(remainingMs);
              const overtimeSeconds = Math.floor(overtimeMs / 1000);
              this.countdownValue = -overtimeSeconds; // ‡∏ï‡∏¥‡∏î‡∏•‡∏ö
              
              // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
              if (!hasPlayedAlarm) {
                this.isTimeUp = true;
                this.playAlarmSound();
                hasPlayedAlarm = true;
              }
              
              // ‡∏ô‡∏±‡∏ö‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ
              this.countdown = requestAnimationFrame(updateTimer);
            }
          };
          
          // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
          this.countdown = requestAnimationFrame(updateTimer);
        },
        playCountdownBeep() {
          // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á beep ‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          oscillator.frequency.value = 600;
          oscillator.type = 'sine';
          
          gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
          
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.2);
        },
        playStartBeep() {
          // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏£‡∏¥‡∏á
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          oscillator.frequency.value = 1500; // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å
          oscillator.type = 'sine';
          
          gainNode.gain.setValueAtTime(0.4, audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.8);
          
          oscillator.start(audioContext.currentTime);
          oscillator.stop(audioContext.currentTime + 0.8);
        },
        playAlarmSound() {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          let beepCount = 0;
          const totalBeeps = 10;
          
          const playBeep = () => {
            if (beepCount >= totalBeeps) return;
            
            // ‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
            this.isBlinking = true;
            setTimeout(() => {
              this.isBlinking = false;
            }, 400);
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á beep
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
            
            beepCount++;
            
            if (beepCount < totalBeeps) {
              setTimeout(playBeep, 800);
            }
          };
          
          playBeep();
        },
        playTickSound() {
          // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á tick ‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡∏Ñ‡∏°‡πÜ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡∏µ‡∏î
          if (!this.audioContext) return;
          
          try {
            const oscillator = this.audioContext.createOscillator();
            const gainNode = this.audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(this.audioContext.destination);
            
            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.2, this.audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.02);
            
            oscillator.start(this.audioContext.currentTime);
            oscillator.stop(this.audioContext.currentTime + 0.02);
          } catch (e) {
            console.error('Error playing tick sound:', e);
          }
        },
        playBeepSound(count = 1) {
          // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á beep ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          let beepIndex = 0;
          
          const playBeep = () => {
            if (beepIndex >= count) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
            
            beepIndex++;
            if (beepIndex < count) {
              setTimeout(playBeep, 500);
            }
          };
          
          playBeep();
        },
        startCountdownFromInput() {
          const totalSeconds = (this.inputHours * 3600) + (this.inputMinutes * 60);
          // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô interval ‡∏ã‡πâ‡∏≠‡∏ô
          if (this.countdown) {
            clearInterval(this.countdown);
            cancelAnimationFrame(this.countdown);
            this.countdown = null;
          }
          // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 4 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
          this.isCountdownPreparing = true;
          this.countdownPrepareCountdown = 4;
          // ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î fullscreen ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
            this.isFullScreen = true;
          }
          
          // ‡πÉ‡∏ä‡πâ performance.now() ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏™‡∏π‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 4 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
          const prepareStartTime = performance.now();
          let lastPrepareSecond = 4;
          
          const updatePrepareCountdown = () => {
            const now = performance.now();
            const elapsed = now - prepareStartTime;
            const remainingMs = 4000 - elapsed;
            
            if (remainingMs > 0) {
              const remainingSeconds = Math.ceil(remainingMs / 1000);
              this.countdownPrepareCountdown = remainingSeconds;
              
              // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á beep ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
              if (remainingSeconds !== lastPrepareSecond && remainingSeconds > 0) {
                this.playCountdownBeep();
                lastPrepareSecond = remainingSeconds;
              }
              
              this.countdown = requestAnimationFrame(updatePrepareCountdown);
            } else {
              // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô 0 ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏™‡∏π‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏à‡∏£‡∏¥‡∏á
              this.playStartBeep();
              if (this.countdown) {
                cancelAnimationFrame(this.countdown);
                this.countdown = null;
              }
              this.countdownPrepareCountdown = 0;
              this.isCountdownPreparing = false;
              this.startCountdown(totalSeconds);
            }
          };
          
          // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á prepare
          this.countdown = requestAnimationFrame(updatePrepareCountdown);
        },
        resetCountdown() {
          // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡πà‡∏≠‡∏ô
          this.isTimeUp = false;
          this.isBlinking = false;
          this.isCountdownPreparing = false;
          
          // ‡∏´‡∏¢‡∏∏‡∏î interval/animation frame
          if (this.countdown) {
            // ‡∏•‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á interval ‡πÅ‡∏•‡∏∞ animation frame
            clearInterval(this.countdown);
            cancelAnimationFrame(this.countdown);
            this.countdown = null;
          }
          
          // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡πà‡∏≤
          this.countdownValue = 0;
          this.totalCountdownSeconds = 0;
          this.countdownPrepareCountdown = 0;
        },
        updateFullscreenText2(event) {
          const text = event.target.innerText;
          if (text === '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°') {
            this.fullscreenText2 = '';
            event.target.innerText = '';
          } else {
            this.fullscreenText2 = text;
          }
        },
        onTextInput(event) {
          const text = event.target.innerText;
          if (text !== '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°') {
            this.fullscreenText2 = text;
          }
        },
        onTextFocus(event) {
          if (event.target.innerText === '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°') {
            event.target.innerText = '';
            this.fullscreenText2 = '';
          }
        },
        updateFullscreenText(event) {
          const text = event.target.innerText;
          if (text === '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°') {
            this.fullscreenText = '';
            event.target.innerText = '';
          } else {
            this.fullscreenText = text;
          }


        },
        onTimerTextInput(event) {
          const text = event.target.innerText;
          if (text !== '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°') {
            this.fullscreenText = text;
          }
        },
        onTimerTextFocus(event) {
          if (event.target.innerText === '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°') {
            event.target.innerText = '';
            this.fullscreenText = '';
          }
        },
        
        // Mid Timer Methods (3 minutes)
        startMidTimer() {
          this.midTimerIsPractice = false; // ‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Ç‡πà‡∏á (3 ‡∏ô‡∏≤‡∏ó‡∏µ)
          this.midTimerIsPreparing = true;
          this.midTimerPrepareCountdown = 4;
          // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô interval ‡∏ã‡πâ‡∏≠‡∏ô
          if (this.midTimerPrepareInterval) {
            clearInterval(this.midTimerPrepareInterval);
            cancelAnimationFrame(this.midTimerPrepareInterval);
            this.midTimerPrepareInterval = null;
          }
          // ‡πÄ‡∏õ‡∏¥‡∏î fullscreen ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
            this.isFullScreen = true;
          }
          
          // ‡πÉ‡∏ä‡πâ performance.now() ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á prepare
          const prepareStartTime = performance.now();
          let lastPrepareSecond = 4;
          
          const updatePrepare = () => {
            const now = performance.now();
            const elapsed = now - prepareStartTime;
            const remainingMs = 4000 - elapsed;
            
            if (remainingMs > 0) {
              const remainingSeconds = Math.ceil(remainingMs / 1000);
              this.midTimerPrepareCountdown = remainingSeconds;
              
              if (remainingSeconds !== lastPrepareSecond && remainingSeconds > 0) {
                this.playCountdownBeep();
                lastPrepareSecond = remainingSeconds;
              }
              
              this.midTimerPrepareInterval = requestAnimationFrame(updatePrepare);
            } else {
              this.playStartBeep();
              if (this.midTimerPrepareInterval) {
                cancelAnimationFrame(this.midTimerPrepareInterval);
                this.midTimerPrepareInterval = null;
              }
              this.midTimerPrepareCountdown = 0;
              this.midTimerIsPreparing = false;
              this.midTimerRunning = true;
              
              // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏î‡πâ‡∏ß‡∏¢ performance.now()
              const timerStartTime = performance.now();
              const totalDuration = (this.midTimerMinutes * 60 + this.midTimerSeconds) * 1000 + this.midTimerMilliseconds * 10;
              let hasPlayedLastTenSeconds = false;
              let hasPlayedAlarm = false;
              
              const updateTimer = () => {
                if (!this.midTimerRunning) return;
                
                const now = performance.now();
                const elapsed = now - timerStartTime;
                const remaining = totalDuration - elapsed;
                
                if (remaining > 0) {
                  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
                  this.midTimerIsOvertime = false; // ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
                  const totalCentiseconds = Math.ceil(remaining / 10);
                  this.midTimerMilliseconds = totalCentiseconds % 100;
                  const totalSeconds = Math.floor(totalCentiseconds / 100);
                  this.midTimerSeconds = totalSeconds % 60;
                  this.midTimerMinutes = Math.floor(totalSeconds / 60);
                  
                  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ
                  const elapsedCentiseconds = Math.floor(elapsed / 10);
                  this.midTimerElapsedMilliseconds = elapsedCentiseconds % 100;
                  const elapsedSeconds = Math.floor(elapsedCentiseconds / 100);
                  this.midTimerElapsedSeconds = elapsedSeconds % 60;
                  this.midTimerElapsedMinutes = Math.floor(elapsedSeconds / 60);
                  
                  // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢
                  if (!hasPlayedLastTenSeconds && this.midTimerMinutes === 0 && this.midTimerSeconds <= 10 && this.midTimerSeconds > 0) {
                    this.playCountdownBeep();
                    hasPlayedLastTenSeconds = true;
                  }
                  // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï flag ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡πâ‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤
                  if (this.midTimerSeconds > 10 || this.midTimerMinutes > 0) {
                    hasPlayedLastTenSeconds = false;
                  }
                  
                  this.midTimerInterval = requestAnimationFrame(updateTimer);
                } else {
                  // ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ - ‡∏ô‡∏±‡∏ö‡∏ï‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏¥‡∏î‡∏•‡∏ö
                  this.midTimerIsOvertime = true; // ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß
                  const overtimeMs = Math.abs(remaining);
                  const totalCentiseconds = Math.floor(overtimeMs / 10);
                  this.midTimerMilliseconds = totalCentiseconds % 100;
                  const totalSeconds = Math.floor(totalCentiseconds / 100);
                  this.midTimerSeconds = totalSeconds % 60;
                  this.midTimerMinutes = Math.floor(totalSeconds / 60);
                  
                  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡∏ï‡πà‡∏≠
                  const elapsedCentiseconds = Math.floor(elapsed / 10);
                  this.midTimerElapsedMilliseconds = elapsedCentiseconds % 100;
                  const elapsedSeconds = Math.floor(elapsedCentiseconds / 100);
                  this.midTimerElapsedSeconds = elapsedSeconds % 60;
                  this.midTimerElapsedMinutes = Math.floor(elapsedSeconds / 60);
                  
                  // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
                  if (!hasPlayedAlarm) {
                    this.playBeepSound(3);
                    hasPlayedAlarm = true;
                  }
                  
                  // ‡∏ô‡∏±‡∏ö‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ
                  this.midTimerInterval = requestAnimationFrame(updateTimer);
                }
              };
              
              this.midTimerInterval = requestAnimationFrame(updateTimer);
            }
          };
          
          this.midTimerPrepareInterval = requestAnimationFrame(updatePrepare);
        },
        // Mid Timer Practice (1 minute)
        startMidTimerPractice() {
          this.midTimerIsPractice = true; // ‡πÇ‡∏´‡∏°‡∏î‡∏ã‡πâ‡∏≠‡∏° (1 ‡∏ô‡∏≤‡∏ó‡∏µ)
          this.midTimerIsPreparing = true;
          this.midTimerPrepareCountdown = 4;
          // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô interval ‡∏ã‡πâ‡∏≠‡∏ô
          if (this.midTimerPrepareInterval) {
            clearInterval(this.midTimerPrepareInterval);
            cancelAnimationFrame(this.midTimerPrepareInterval);
            this.midTimerPrepareInterval = null;
          }
          // ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡πá‡∏ô 1 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á
          this.midTimerMinutes = 1;
          this.midTimerSeconds = 0;
          this.midTimerMilliseconds = 0;
          this.midTimerElapsedMinutes = 0;
          this.midTimerElapsedSeconds = 0;
          this.midTimerElapsedMilliseconds = 0;
          // ‡πÄ‡∏õ‡∏¥‡∏î fullscreen ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
            this.isFullScreen = true;
          }
          
          // ‡πÉ‡∏ä‡πâ performance.now() ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á prepare
          const prepareStartTime = performance.now();
          let lastPrepareSecond = 4;
          
          const updatePrepare = () => {
            const now = performance.now();
            const elapsed = now - prepareStartTime;
            const remainingMs = 4000 - elapsed;
            
            if (remainingMs > 0) {
              const remainingSeconds = Math.ceil(remainingMs / 1000);
              this.midTimerPrepareCountdown = remainingSeconds;
              
              if (remainingSeconds !== lastPrepareSecond && remainingSeconds > 0) {
                this.playCountdownBeep();
                lastPrepareSecond = remainingSeconds;
              }
              
              this.midTimerPrepareInterval = requestAnimationFrame(updatePrepare);
            } else {
              this.playStartBeep();
              if (this.midTimerPrepareInterval) {
                cancelAnimationFrame(this.midTimerPrepareInterval);
                this.midTimerPrepareInterval = null;
              }
              this.midTimerPrepareCountdown = 0;
              this.midTimerIsPreparing = false;
              this.midTimerRunning = true;
              
              // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏î‡πâ‡∏ß‡∏¢ performance.now()
              const timerStartTime = performance.now();
              const totalDuration = 60 * 1000; // 1 ‡∏ô‡∏≤‡∏ó‡∏µ
              let hasPlayedLastTenSeconds = false;
              let hasPlayedAlarm = false;
              
              const updateTimer = () => {
                if (!this.midTimerRunning) return;
                
                const now = performance.now();
                const elapsed = now - timerStartTime;
                const remaining = totalDuration - elapsed;
                
                if (remaining > 0) {
                  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
                  this.midTimerIsOvertime = false; // ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
                  const totalCentiseconds = Math.ceil(remaining / 10);
                  this.midTimerMilliseconds = totalCentiseconds % 100;
                  const totalSeconds = Math.floor(totalCentiseconds / 100);
                  this.midTimerSeconds = totalSeconds % 60;
                  this.midTimerMinutes = Math.floor(totalSeconds / 60);
                  
                  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ
                  const elapsedCentiseconds = Math.floor(elapsed / 10);
                  this.midTimerElapsedMilliseconds = elapsedCentiseconds % 100;
                  const elapsedSeconds = Math.floor(elapsedCentiseconds / 100);
                  this.midTimerElapsedSeconds = elapsedSeconds % 60;
                  this.midTimerElapsedMinutes = Math.floor(elapsedSeconds / 60);
                  
                  // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢
                  if (!hasPlayedLastTenSeconds && this.midTimerMinutes === 0 && this.midTimerSeconds <= 10 && this.midTimerSeconds > 0) {
                    this.playCountdownBeep();
                    hasPlayedLastTenSeconds = true;
                  }
                  if (this.midTimerSeconds > 10 || this.midTimerMinutes > 0) {
                    hasPlayedLastTenSeconds = false;
                  }
                  
                  this.midTimerInterval = requestAnimationFrame(updateTimer);
                } else {
                  // ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ - ‡∏ô‡∏±‡∏ö‡∏ï‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏¥‡∏î‡∏•‡∏ö
                  this.midTimerIsOvertime = true; // ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß
                  const overtimeMs = Math.abs(remaining);
                  const totalCentiseconds = Math.floor(overtimeMs / 10);
                  this.midTimerMilliseconds = totalCentiseconds % 100;
                  const totalSeconds = Math.floor(totalCentiseconds / 100);
                  this.midTimerSeconds = totalSeconds % 60;
                  this.midTimerMinutes = Math.floor(totalSeconds / 60);
                  
                  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡∏ï‡πà‡∏≠
                  const elapsedCentiseconds = Math.floor(elapsed / 10);
                  this.midTimerElapsedMilliseconds = elapsedCentiseconds % 100;
                  const elapsedSeconds = Math.floor(elapsedCentiseconds / 100);
                  this.midTimerElapsedSeconds = elapsedSeconds % 60;
                  this.midTimerElapsedMinutes = Math.floor(elapsedSeconds / 60);
                  
                  // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
                  if (!hasPlayedAlarm) {
                    this.playBeepSound(3);
                    hasPlayedAlarm = true;
                  }
                  
                  // ‡∏ô‡∏±‡∏ö‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ
                  this.midTimerInterval = requestAnimationFrame(updateTimer);
                }
              };
              
              this.midTimerInterval = requestAnimationFrame(updateTimer);
            }
          };
          
          this.midTimerPrepareInterval = requestAnimationFrame(updatePrepare);
        },
        pauseMidTimer() {
          this.midTimerRunning = false;
          if (this.midTimerInterval) {
            clearInterval(this.midTimerInterval);
            cancelAnimationFrame(this.midTimerInterval);
            this.midTimerInterval = null;
          }
        },
        resetMidTimer() {
          this.pauseMidTimer();
          this.midTimerMinutes = 3;
          this.midTimerSeconds = 0;
          this.midTimerMilliseconds = 0;
          this.midTimerElapsedMinutes = 0;
          this.midTimerElapsedSeconds = 0;
          this.midTimerElapsedMilliseconds = 0;
          this.midTimerIsPreparing = false;
          this.midTimerPrepareCountdown = 0;
          this.midTimerIsPractice = false; // reset flag
          this.midTimerIsOvertime = false; // reset flag
        },
        getTimerDisplayStyle() {
          const isTimeUp = this.midTimerMinutes === 0 && this.midTimerSeconds === 0;
          const color = isTimeUp ? 'red' : 'black';
          
          if (this.isFullScreen && this.midTimerRunning) {
            return { color: color };
          } else if (this.midTimerRunning) {
            // ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ô‡∏±‡∏ö - ‡πÉ‡∏´‡∏ç‡πà
            return { fontSize: '8rem', lineHeight: '1', color: color };
          } else {
            // ‡∏´‡∏¢‡∏∏‡∏î - ‡πÄ‡∏•‡πá‡∏Å
            return { fontSize: '3rem', lineHeight: '1', color: color };
          }
        },
        getMillisecondClass() {
          if (this.isFullScreen && this.midTimerRunning) {
            return 'fullscreen-millisecond';
          }
          return '';
        },
        getMillisecondStyle() {
          if (this.isFullScreen && this.midTimerRunning) {
            return {};
          } else if (this.midTimerRunning) {
            return { fontSize: '5rem' }; // ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å 4rem ‡πÄ‡∏õ‡πá‡∏ô 5rem (‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏≠‡∏á 8-10rem)
          } else {
            return { fontSize: '2rem' }; // ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å 1.5rem ‡πÄ‡∏õ‡πá‡∏ô 2rem (‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏≠‡∏á 3-4rem)
          }
        },
        
        // High Timer Methods (5 minutes)
        startHighTimer() {
          this.highTimerIsPractice = false; // ‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Ç‡πà‡∏á (5 ‡∏ô‡∏≤‡∏ó‡∏µ)
          this.highTimerIsPreparing = true;
          this.highTimerPrepareCountdown = 4;
          // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô interval ‡∏ã‡πâ‡∏≠‡∏ô
          if (this.highTimerPrepareInterval) {
            clearInterval(this.highTimerPrepareInterval);
            cancelAnimationFrame(this.highTimerPrepareInterval);
            this.highTimerPrepareInterval = null;
          }
          // ‡πÄ‡∏õ‡∏¥‡∏î fullscreen ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
            this.isFullScreen = true;
          }
          
          // ‡πÉ‡∏ä‡πâ performance.now() ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á prepare
          const prepareStartTime = performance.now();
          let lastPrepareSecond = 4;
          
          const updatePrepare = () => {
            const now = performance.now();
            const elapsed = now - prepareStartTime;
            const remainingMs = 4000 - elapsed;
            
            if (remainingMs > 0) {
              const remainingSeconds = Math.ceil(remainingMs / 1000);
              this.highTimerPrepareCountdown = remainingSeconds;
              
              if (remainingSeconds !== lastPrepareSecond && remainingSeconds > 0) {
                this.playCountdownBeep();
                lastPrepareSecond = remainingSeconds;
              }
              
              this.highTimerPrepareInterval = requestAnimationFrame(updatePrepare);
            } else {
              this.playStartBeep();
              if (this.highTimerPrepareInterval) {
                cancelAnimationFrame(this.highTimerPrepareInterval);
                this.highTimerPrepareInterval = null;
              }
              this.highTimerPrepareCountdown = 0;
              this.highTimerIsPreparing = false;
              this.highTimerRunning = true;
              
              // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏î‡πâ‡∏ß‡∏¢ performance.now()
              const timerStartTime = performance.now();
              const totalDuration = (this.highTimerMinutes * 60 + this.highTimerSeconds) * 1000 + this.highTimerMilliseconds * 10;
              let hasPlayedLastTenSeconds = false;
              let hasPlayedAlarm = false;
              
              const updateTimer = () => {
                if (!this.highTimerRunning) return;
                
                const now = performance.now();
                const elapsed = now - timerStartTime;
                const remaining = totalDuration - elapsed;
                
                if (remaining > 0) {
                  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
                  this.highTimerIsOvertime = false; // ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
                  const totalCentiseconds = Math.ceil(remaining / 10);
                  this.highTimerMilliseconds = totalCentiseconds % 100;
                  const totalSeconds = Math.floor(totalCentiseconds / 100);
                  this.highTimerSeconds = totalSeconds % 60;
                  this.highTimerMinutes = Math.floor(totalSeconds / 60);
                  
                  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ
                  const elapsedCentiseconds = Math.floor(elapsed / 10);
                  this.highTimerElapsedMilliseconds = elapsedCentiseconds % 100;
                  const elapsedSeconds = Math.floor(elapsedCentiseconds / 100);
                  this.highTimerElapsedSeconds = elapsedSeconds % 60;
                  this.highTimerElapsedMinutes = Math.floor(elapsedSeconds / 60);
                  
                  // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢
                  if (!hasPlayedLastTenSeconds && this.highTimerMinutes === 0 && this.highTimerSeconds <= 10 && this.highTimerSeconds > 0) {
                    this.playCountdownBeep();
                    hasPlayedLastTenSeconds = true;
                  }
                  if (this.highTimerSeconds > 10 || this.highTimerMinutes > 0) {
                    hasPlayedLastTenSeconds = false;
                  }
                  
                  this.highTimerInterval = requestAnimationFrame(updateTimer);
                } else {
                  // ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ - ‡∏ô‡∏±‡∏ö‡∏ï‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏¥‡∏î‡∏•‡∏ö
                  this.highTimerIsOvertime = true; // ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß
                  const overtimeMs = Math.abs(remaining);
                  const totalCentiseconds = Math.floor(overtimeMs / 10);
                  this.highTimerMilliseconds = totalCentiseconds % 100;
                  const totalSeconds = Math.floor(totalCentiseconds / 100);
                  this.highTimerSeconds = totalSeconds % 60;
                  this.highTimerMinutes = Math.floor(totalSeconds / 60);
                  
                  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡∏ï‡πà‡∏≠
                  const elapsedCentiseconds = Math.floor(elapsed / 10);
                  this.highTimerElapsedMilliseconds = elapsedCentiseconds % 100;
                  const elapsedSeconds = Math.floor(elapsedCentiseconds / 100);
                  this.highTimerElapsedSeconds = elapsedSeconds % 60;
                  this.highTimerElapsedMinutes = Math.floor(elapsedSeconds / 60);
                  
                  // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
                  if (!hasPlayedAlarm) {
                    this.playBeepSound(3);
                    hasPlayedAlarm = true;
                  }
                  
                  // ‡∏ô‡∏±‡∏ö‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ
                  this.highTimerInterval = requestAnimationFrame(updateTimer);
                }
              };
              
              this.highTimerInterval = requestAnimationFrame(updateTimer);
            }
          };
          
          this.highTimerPrepareInterval = requestAnimationFrame(updatePrepare);
        },
        // High Timer Practice (1 minute)
        startHighTimerPractice() {
          this.highTimerIsPractice = true; // ‡πÇ‡∏´‡∏°‡∏î‡∏ã‡πâ‡∏≠‡∏° (1 ‡∏ô‡∏≤‡∏ó‡∏µ)
          this.highTimerIsPreparing = true;
          this.highTimerPrepareCountdown = 4;
          // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô interval ‡∏ã‡πâ‡∏≠‡∏ô
          if (this.highTimerPrepareInterval) {
            clearInterval(this.highTimerPrepareInterval);
            cancelAnimationFrame(this.highTimerPrepareInterval);
            this.highTimerPrepareInterval = null;
          }
          // ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡πá‡∏ô 1 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á
          this.highTimerMinutes = 1;
          this.highTimerSeconds = 0;
          this.highTimerMilliseconds = 0;
          this.highTimerElapsedMinutes = 0;
          this.highTimerElapsedSeconds = 0;
          this.highTimerElapsedMilliseconds = 0;
          // ‡πÄ‡∏õ‡∏¥‡∏î fullscreen ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
          if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
            this.isFullScreen = true;
          }
          
          // ‡πÉ‡∏ä‡πâ performance.now() ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á prepare
          const prepareStartTime = performance.now();
          let lastPrepareSecond = 4;
          
          const updatePrepare = () => {
            const now = performance.now();
            const elapsed = now - prepareStartTime;
            const remainingMs = 4000 - elapsed;
            
            if (remainingMs > 0) {
              const remainingSeconds = Math.ceil(remainingMs / 1000);
              this.highTimerPrepareCountdown = remainingSeconds;
              
              if (remainingSeconds !== lastPrepareSecond && remainingSeconds > 0) {
                this.playCountdownBeep();
                lastPrepareSecond = remainingSeconds;
              }
              
              this.highTimerPrepareInterval = requestAnimationFrame(updatePrepare);
            } else {
              this.playStartBeep();
              if (this.highTimerPrepareInterval) {
                cancelAnimationFrame(this.highTimerPrepareInterval);
                this.highTimerPrepareInterval = null;
              }
              this.highTimerPrepareCountdown = 0;
              this.highTimerIsPreparing = false;
              this.highTimerRunning = true;
              
              // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏î‡πâ‡∏ß‡∏¢ performance.now()
              const timerStartTime = performance.now();
              const totalDuration = 60 * 1000; // 1 ‡∏ô‡∏≤‡∏ó‡∏µ
              let hasPlayedLastTenSeconds = false;
              let hasPlayedAlarm = false;
              
              const updateTimer = () => {
                if (!this.highTimerRunning) return;
                
                const now = performance.now();
                const elapsed = now - timerStartTime;
                const remaining = totalDuration - elapsed;
                
                if (remaining > 0) {
                  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
                  this.highTimerIsOvertime = false; // ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
                  const totalCentiseconds = Math.ceil(remaining / 10);
                  this.highTimerMilliseconds = totalCentiseconds % 100;
                  const totalSeconds = Math.floor(totalCentiseconds / 100);
                  this.highTimerSeconds = totalSeconds % 60;
                  this.highTimerMinutes = Math.floor(totalSeconds / 60);
                  
                  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ
                  const elapsedCentiseconds = Math.floor(elapsed / 10);
                  this.highTimerElapsedMilliseconds = elapsedCentiseconds % 100;
                  const elapsedSeconds = Math.floor(elapsedCentiseconds / 100);
                  this.highTimerElapsedSeconds = elapsedSeconds % 60;
                  this.highTimerElapsedMinutes = Math.floor(elapsedSeconds / 60);
                  
                  // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢
                  if (!hasPlayedLastTenSeconds && this.highTimerMinutes === 0 && this.highTimerSeconds <= 10 && this.highTimerSeconds > 0) {
                    this.playCountdownBeep();
                    hasPlayedLastTenSeconds = true;
                  }
                  if (this.highTimerSeconds > 10 || this.highTimerMinutes > 0) {
                    hasPlayedLastTenSeconds = false;
                  }
                  
                  this.highTimerInterval = requestAnimationFrame(updateTimer);
                } else {
                  // ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤ - ‡∏ô‡∏±‡∏ö‡∏ï‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏¥‡∏î‡∏•‡∏ö
                  this.highTimerIsOvertime = true; // ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß
                  const overtimeMs = Math.abs(remaining);
                  const totalCentiseconds = Math.floor(overtimeMs / 10);
                  this.highTimerMilliseconds = totalCentiseconds % 100;
                  const totalSeconds = Math.floor(totalCentiseconds / 100);
                  this.highTimerSeconds = totalSeconds % 60;
                  this.highTimerMinutes = Math.floor(totalSeconds / 60);
                  
                  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡∏ï‡πà‡∏≠
                  const elapsedCentiseconds = Math.floor(elapsed / 10);
                  this.highTimerElapsedMilliseconds = elapsedCentiseconds % 100;
                  const elapsedSeconds = Math.floor(elapsedCentiseconds / 100);
                  this.highTimerElapsedSeconds = elapsedSeconds % 60;
                  this.highTimerElapsedMinutes = Math.floor(elapsedSeconds / 60);
                  
                  // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
                  if (!hasPlayedAlarm) {
                    this.playBeepSound(3);
                    hasPlayedAlarm = true;
                  }
                  
                  // ‡∏ô‡∏±‡∏ö‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ
                  this.highTimerInterval = requestAnimationFrame(updateTimer);
                }
              };
              
              this.highTimerInterval = requestAnimationFrame(updateTimer);
            }
          };
          
          this.highTimerPrepareInterval = requestAnimationFrame(updatePrepare);
        },
        pauseHighTimer() {
          this.highTimerRunning = false;
          if (this.highTimerInterval) {
            clearInterval(this.highTimerInterval);
            cancelAnimationFrame(this.highTimerInterval);
            this.highTimerInterval = null;
          }
        },
        resetHighTimer() {
          this.pauseHighTimer();
          this.highTimerMinutes = 5;
          this.highTimerSeconds = 0;
          this.highTimerMilliseconds = 0;
          this.highTimerElapsedMinutes = 0;
          this.highTimerElapsedSeconds = 0;
          this.highTimerElapsedMilliseconds = 0;
          this.highTimerIsPreparing = false;
          this.highTimerPrepareCountdown = 0;
          this.highTimerIsPractice = false; // reset flag
          this.highTimerIsOvertime = false; // reset flag
        },
        getHighTimerDisplayStyle() {
          const isTimeUp = this.highTimerMinutes === 0 && this.highTimerSeconds === 0;
          const color = isTimeUp ? 'red' : '#FF6F00';
          
          if (this.isFullScreen && this.highTimerRunning) {
            return { color: color };
          } else if (this.highTimerRunning) {
            return { fontSize: '8rem', lineHeight: '1', color: color };
          } else {
            return { fontSize: '3rem', lineHeight: '1', color: color };
          }
        },
        getHighMillisecondClass() {
          if (this.isFullScreen && this.highTimerRunning) {
            return 'fullscreen-millisecond';
          }
          return '';
        },
        getHighMillisecondStyle() {
          if (this.isFullScreen && this.highTimerRunning) {
            return {};
          } else if (this.highTimerRunning) {
            return { fontSize: '5rem' }; // ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å 4rem ‡πÄ‡∏õ‡πá‡∏ô 5rem
          } else {
            return { fontSize: '2rem' }; // ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡∏à‡∏≤‡∏Å 1.5rem ‡πÄ‡∏õ‡πá‡∏ô 2rem
          }
        },
        
        // Field Grid Methods
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏°‡∏∏‡∏ô block ‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó
        rotateBlockGeneric(blocks, index) {
          const block = blocks[index];
          const newRotation = (block.rotation + 1) % 4;
          this.$set(blocks, index, { ...block, rotation: newRotation });
        },
        
        rotateBlock(index, level = 'mid') {
          const blocks = level === 'mid' ? this.midFieldBlocks : this.highFieldBlocks;
          this.rotateBlockGeneric(blocks, index);
        },
        rotateCheckpointBlock(index, level = 'mid') {
          const blocks = level === 'mid' ? this.midCheckpointBlocks : this.highCheckpointBlocks;
          this.rotateBlockGeneric(blocks, index);
        },
        rotateObstacleBlock(index, level = 'mid') {
          const blocks = level === 'mid' ? this.midObstacleBlocks : this.highObstacleBlocks;
          this.rotateBlockGeneric(blocks, index);
        },
        rotateBallBlock(index, level = 'mid') {
          const blocks = level === 'mid' ? this.midBallBlocks : this.highBallBlocks;
          this.rotateBlockGeneric(blocks, index);
        },
        rotateZoneBlock(index, level = 'mid') {
          const blocks = level === 'mid' ? this.midZoneBlocks : this.highZoneBlocks;
          this.rotateBlockGeneric(blocks, index);
        },
        rotateStartBlock(index, level = 'mid') {
          const blocks = level === 'mid' ? this.midStartBlock : this.highStartBlock;
          this.rotateBlockGeneric(blocks, index);
        },
        rotateBridgeBlock(index, level = 'mid') {
          const blocks = level === 'mid' ? this.midBridgeBlocks : this.highBridgeBlocks;
          const block = blocks[index];
          
          // ‡∏ñ‡πâ‡∏≤ bridge ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡∏™‡∏ô‡∏≤‡∏° ‡πÉ‡∏´‡πâ‡∏´‡∏°‡∏∏‡∏ô‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥
          if (!block.placed) {
            this.rotateBlockGeneric(blocks, index);
            return;
          }
          
          // ‡∏ñ‡πâ‡∏≤ bridge ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏∏‡∏ô‡πÅ‡∏ö‡∏ö‡∏û‡∏¥‡πÄ‡∏®‡∏©
          const grid = level === 'mid' ? this.midFieldGrid : this.highFieldGrid;
          const { row, col } = block.position;
          const oldRotation = block.rotation;
          const newRotation = (oldRotation + 1) % 4;
          
          // ‡∏•‡∏ö bridge ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å grid (3 ‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤)
          if (oldRotation % 2 === 0) { // ‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô
            for (let c = col; c < col + 3 && c < 8; c++) {
              grid[row][c] = null;
            }
          } else { // ‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á
            for (let r = row; r < row + 3 && r < 4; r++) {
              grid[r][col] = null;
            }
          }
          
          // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
          let canRotate = true;
          if (newRotation % 2 === 0) { // ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô
            if (col + 3 > 8) {
              canRotate = false;
            } else {
              // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á 3 ‡∏ß‡πà‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
              for (let c = col; c < col + 3; c++) {
                if (grid[row][c] !== null) {
                  canRotate = false;
                  break;
                }
              }
            }
          } else { // ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á
            if (row + 3 > 4) {
              canRotate = false;
            } else {
              // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á 3 ‡∏ß‡πà‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
              for (let r = row; r < row + 3; r++) {
                if (grid[r][col] !== null) {
                  canRotate = false;
                  break;
                }
              }
            }
          }
          
          if (canRotate) {
            // ‡∏´‡∏°‡∏∏‡∏ô‡πÑ‡∏î‡πâ - ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó rotation ‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà
            this.$set(blocks, index, { ...block, rotation: newRotation });
            
            if (newRotation % 2 === 0) { // ‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô
              for (let c = col; c < col + 3; c++) {
                grid[row][c] = { type: 'bridge', index: index };
              }
            } else { // ‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á
              for (let r = row; r < row + 3; r++) {
                grid[r][col] = { type: 'bridge', index: index };
              }
            }
          } else {
            // ‡∏´‡∏°‡∏∏‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ - ‡∏ß‡∏≤‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏°
            if (oldRotation % 2 === 0) { // ‡∏ß‡∏≤‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô
              for (let c = col; c < col + 3 && c < 8; c++) {
                grid[row][c] = { type: 'bridge', index: index };
              }
            } else { // ‡∏ß‡∏≤‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á
              for (let r = row; r < row + 3 && r < 4; r++) {
                grid[r][col] = { type: 'bridge', index: index };
              }
            }
            alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏´‡∏°‡∏∏‡∏ô‡πÑ‡∏î‡πâ ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠');
          }
        },
        rotateBlockInGrid(row, col, level = 'mid') {
          const grid = level === 'mid' ? this.midFieldGrid : this.highFieldGrid;
          const cellData = grid[row][col];
          if (cellData !== null) {
            if (cellData.type === 'field') {
              this.rotateBlock(cellData.index, level);
            } else if (cellData.type === 'checkpoint') {
              this.rotateCheckpointBlock(cellData.index, level);
            } else if (cellData.type === 'obstacle') {
              this.rotateObstacleBlock(cellData.index, level);
            } else if (cellData.type === 'ball') {
              this.rotateBallBlock(cellData.index, level);
            } else if (cellData.type === 'zone') {
              this.rotateZoneBlock(cellData.index, level);
            } else if (cellData.type === 'start') {
              this.rotateStartBlock(cellData.index, level);
            } else if (cellData.type === 'bridge') {
              this.rotateBridgeBlock(cellData.index, level);
            }
          }
        },
        removeBlockFromGrid(row, col, level = 'mid') {
          const grid = level === 'mid' ? this.midFieldGrid : this.highFieldGrid;
          const cellData = grid[row][col];
          if (cellData !== null) {
            if (cellData.type === 'field') {
              const blocks = level === 'mid' ? this.midFieldBlocks : this.highFieldBlocks;
              const block = blocks[cellData.index];
              block.placed = false;
              block.position = null;
            } else if (cellData.type === 'checkpoint') {
              const blocks = level === 'mid' ? this.midCheckpointBlocks : this.highCheckpointBlocks;
              const block = blocks[cellData.index];
              block.placed = false;
              block.position = null;
              if (level === 'mid') {
                this.midCheckpointCount--;
              } else {
                this.highCheckpointCount--;
              }
            } else if (cellData.type === 'obstacle') {
              const blocks = level === 'mid' ? this.midObstacleBlocks : this.highObstacleBlocks;
              const block = blocks[cellData.index];
              block.placed = false;
              block.position = null;
            } else if (cellData.type === 'ball') {
              const blocks = level === 'mid' ? this.midBallBlocks : this.highBallBlocks;
              const block = blocks[cellData.index];
              block.placed = false;
              block.position = null;
            } else if (cellData.type === 'bridge') {
              const blocks = level === 'mid' ? this.midBridgeBlocks : this.highBridgeBlocks;
              const block = blocks[cellData.index];
              
              // ‡πÉ‡∏ä‡πâ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏à‡∏≤‡∏Å block.position ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏ä‡πâ row, col ‡∏ó‡∏µ‡πà‡∏Ñ‡∏•‡∏¥‡∏Å
              const startRow = block.position.row;
              const startCol = block.position.col;
              
              // Clear all 3 cells occupied by bridge
              if (block.rotation % 2 === 0) { // horizontal (0 or 180)
                for (let c = startCol; c < startCol + 3 && c < 8; c++) {
                  grid[startRow][c] = null;
                }
              } else { // vertical (90 or 270)
                for (let r = startRow; r < startRow + 3 && r < 4; r++) {
                  grid[r][startCol] = null;
                }
              }
              
              block.placed = false;
              block.position = null;
              return; // Return early since we've already cleared grid cells
            } else if (cellData.type === 'zone') {
              const blocks = level === 'mid' ? this.midZoneBlocks : this.highZoneBlocks;
              const block = blocks[cellData.index];
              block.placed = false;
              block.position = null;
            } else if (cellData.type === 'start') {
              const blocks = level === 'mid' ? this.midStartBlock : this.highStartBlock;
              const block = blocks[cellData.index];
              block.placed = false;
              block.position = null;
            }
            grid[row][col] = null;
          }
        },
        countPlacedCheckpoints() {
          return this.checkpointBlocks.filter(b => b.placed).length;
        },
        getRotatedBorders(borders, rotation) {
          // ‡∏´‡∏°‡∏∏‡∏ô‡∏Ç‡∏≠‡∏ö‡∏ï‡∏≤‡∏° rotation (0, 1, 2, 3 = 0¬∞, 90¬∞, 180¬∞, 270¬∞)
          const rotationMap = {
            'all': 'all', // ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
            'top-bottom': ['top-bottom', 'left-right', 'top-bottom', 'left-right'],
            'left-right': ['left-right', 'top-bottom', 'left-right', 'top-bottom'],
            'top': ['top', 'right', 'bottom', 'left'],
            'right': ['right', 'bottom', 'left', 'top'],
            'bottom': ['bottom', 'left', 'top', 'right'],
            'left': ['left', 'top', 'right', 'bottom'],
            'top-right': ['top-right', 'bottom-right', 'bottom-left', 'top-left'],
            'bottom-right': ['bottom-right', 'bottom-left', 'top-left', 'top-right'],
            'bottom-left': ['bottom-left', 'top-left', 'top-right', 'bottom-right'],
            'top-left': ['top-left', 'top-right', 'bottom-right', 'bottom-left']
          };
          
          if (borders === 'all') return 'all';
          if (borders === 'none') return 'none';
          if (borders === 'top-left-bottom') {
            return ['top-left-bottom', 'top-right-bottom', 'top-right-left', 'bottom-right-left'][rotation % 4];
          }
          if (rotationMap[borders]) {
            return rotationMap[borders][rotation % 4];
          }
          return borders;
        },
        startDrag(event, index, type, level = 'mid') {
          this.draggedBlockType = type;
          this.draggedBlockIndex = index;
          this.draggedLevel = level; // ‡πÄ‡∏û‡∏¥‡πà‡∏° level ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ
          
          const grid = level === 'mid' ? this.midFieldGrid : this.highFieldGrid;
          
          if (type === 'field') {
            const blocks = level === 'mid' ? this.midFieldBlocks : this.highFieldBlocks;
            const block = blocks[index];
            if (block.placed) {
              const { row, col } = block.position;
              grid[row][col] = null;
              block.placed = false;
              block.position = null;
            }
          } else if (type === 'checkpoint') {
            const blocks = level === 'mid' ? this.midCheckpointBlocks : this.highCheckpointBlocks;
            const block = blocks[index];
            if (block.placed) {
              const { row, col } = block.position;
              grid[row][col] = null;
              block.placed = false;
              block.position = null;
              if (level === 'mid') {
                this.midCheckpointCount--;
              } else {
                this.highCheckpointCount--;
              }
            }
          } else if (type === 'obstacle') {
            const blocks = level === 'mid' ? this.midObstacleBlocks : this.highObstacleBlocks;
            const block = blocks[index];
            if (block.placed) {
              const { row, col } = block.position;
              grid[row][col] = null;
              block.placed = false;
              block.position = null;
            }
          } else if (type === 'ball') {
            const blocks = level === 'mid' ? this.midBallBlocks : this.highBallBlocks;
            const block = blocks[index];
            if (block.placed) {
              const { row, col } = block.position;
              grid[row][col] = null;
              block.placed = false;
              block.position = null;
            }
          } else if (type === 'bridge') {
            const blocks = level === 'mid' ? this.midBridgeBlocks : this.highBridgeBlocks;
            const block = blocks[index];
            if (block.placed) {
              const { row, col } = block.position;
              // Clear all 3 cells
              if (block.rotation % 2 === 0) { // horizontal
                for (let c = col; c < col + 3 && c < 8; c++) {
                  grid[row][c] = null;
                }
              } else { // vertical
                for (let r = row; r < row + 3 && r < 4; r++) {
                  grid[r][col] = null;
                }
              }
              block.placed = false;
              block.position = null;
            }
          } else if (type === 'zone') {
            const blocks = level === 'mid' ? this.midZoneBlocks : this.highZoneBlocks;
            const block = blocks[index];
            if (block.placed) {
              const { row, col } = block.position;
              grid[row][col] = null;
              block.placed = false;
              block.position = null;
            }
          } else if (type === 'start') {
            const blocks = level === 'mid' ? this.midStartBlock : this.highStartBlock;
            const block = blocks[index];
            if (block.placed) {
              const { row, col } = block.position;
              grid[row][col] = null;
              block.placed = false;
              block.position = null;
            }
          }
          
          event.dataTransfer.effectAllowed = 'move';
        },
        endDrag() {
          this.draggedBlockIndex = null;
          this.draggedBlockType = null;
          this.draggedLevel = null;
        },
        dropBlock(event, row, col, level = 'mid') {
          event.preventDefault();
          if (this.draggedBlockIndex === null || this.draggedBlockType === null) return;
          
          // ‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏≤‡∏Å‡πÉ‡∏ô level ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
          if (this.draggedLevel !== level) {
            this.draggedBlockIndex = null;
            this.draggedBlockType = null;
            this.draggedLevel = null;
            return;
          }
          
          const grid = level === 'mid' ? this.midFieldGrid : this.highFieldGrid;
          let block, blocks;
          
          if (this.draggedBlockType === 'field') {
            blocks = level === 'mid' ? this.midFieldBlocks : this.highFieldBlocks;
            block = blocks[this.draggedBlockIndex];
          } else if (this.draggedBlockType === 'checkpoint') {
            blocks = level === 'mid' ? this.midCheckpointBlocks : this.highCheckpointBlocks;
            block = blocks[this.draggedBlockIndex];
            
            const currentCount = level === 'mid' ? this.midCheckpointCount : this.highCheckpointCount;
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô checkpoint ‡∏ó‡∏µ‡πà‡∏ß‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß
            if (!block.placed && currentCount >= this.maxCheckpoints) {
              alert(`‡∏ß‡∏≤‡∏á‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î ${this.maxCheckpoints} ‡∏à‡∏∏‡∏î‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô!`);
              this.draggedBlockIndex = null;
              this.draggedBlockType = null;
              this.draggedLevel = null;
              return;
            }
          } else if (this.draggedBlockType === 'obstacle') {
            blocks = level === 'mid' ? this.midObstacleBlocks : this.highObstacleBlocks;
            block = blocks[this.draggedBlockIndex];
          } else if (this.draggedBlockType === 'ball') {
            blocks = level === 'mid' ? this.midBallBlocks : this.highBallBlocks;
            block = blocks[this.draggedBlockIndex];
          } else if (this.draggedBlockType === 'bridge') {
            blocks = level === 'mid' ? this.midBridgeBlocks : this.highBridgeBlocks;
            block = blocks[this.draggedBlockIndex];
            
            // Check if 3 cells are available based on rotation
            const rotation = block.rotation;
            if (rotation % 2 === 0) { // horizontal (0 or 180)
              if (col + 3 > 8) {
                alert('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏∞‡∏û‡∏≤‡∏ô (‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ 3 ‡∏ä‡πà‡∏≠‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô)');
                this.draggedBlockIndex = null;
                this.draggedBlockType = null;
                this.draggedLevel = null;
                return;
              }
              // Check if all 3 cells are available or occupied by same bridge
              for (let c = col; c < col + 3; c++) {
                const cellData = grid[row][c];
                if (cellData !== null && !(cellData.type === 'bridge' && cellData.index === this.draggedBlockIndex)) {
                  alert('‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏∑‡πà‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß');
                  this.draggedBlockIndex = null;
                  this.draggedBlockType = null;
                  this.draggedLevel = null;
                  return;
                }
              }
            } else { // vertical (90 or 270)
              if (row + 3 > 4) {
                alert('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏∞‡∏û‡∏≤‡∏ô (‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ 3 ‡∏ä‡πà‡∏≠‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á)');
                this.draggedBlockIndex = null;
                this.draggedBlockType = null;
                this.draggedLevel = null;
                return;
              }
              // Check if all 3 cells are available or occupied by same bridge
              for (let r = row; r < row + 3; r++) {
                const cellData = grid[r][col];
                if (cellData !== null && !(cellData.type === 'bridge' && cellData.index === this.draggedBlockIndex)) {
                  alert('‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏∑‡πà‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß');
                  this.draggedBlockIndex = null;
                  this.draggedBlockType = null;
                  this.draggedLevel = null;
                  return;
                }
              }
            }
          } else if (this.draggedBlockType === 'zone') {
            blocks = level === 'mid' ? this.midZoneBlocks : this.highZoneBlocks;
            block = blocks[this.draggedBlockIndex];
          } else if (this.draggedBlockType === 'start') {
            blocks = level === 'mid' ? this.midStartBlock : this.highStartBlock;
            block = blocks[this.draggedBlockIndex];
          }
          
          // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏ã‡∏•‡∏•‡πå‡∏°‡∏µ block ‡∏≠‡∏∑‡πà‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏≤ block ‡∏ô‡∏±‡πâ‡∏ô‡∏≠‡∏≠‡∏Å
          const existingCellData = grid[row][col];
          if (existingCellData !== null) {
            if (existingCellData.type === 'field') {
              const existingBlocks = level === 'mid' ? this.midFieldBlocks : this.highFieldBlocks;
              const existingBlock = existingBlocks[existingCellData.index];
              existingBlock.placed = false;
              existingBlock.position = null;
            } else if (existingCellData.type === 'checkpoint') {
              const existingBlocks = level === 'mid' ? this.midCheckpointBlocks : this.highCheckpointBlocks;
              const existingBlock = existingBlocks[existingCellData.index];
              existingBlock.placed = false;
              existingBlock.position = null;
              if (level === 'mid') {
                this.midCheckpointCount--;
              } else {
                this.highCheckpointCount--;
              }
            } else if (existingCellData.type === 'obstacle') {
              const existingBlocks = level === 'mid' ? this.midObstacleBlocks : this.highObstacleBlocks;
              const existingBlock = existingBlocks[existingCellData.index];
              existingBlock.placed = false;
              existingBlock.position = null;
            } else if (existingCellData.type === 'ball') {
              const existingBlocks = level === 'mid' ? this.midBallBlocks : this.highBallBlocks;
              const existingBlock = existingBlocks[existingCellData.index];
              existingBlock.placed = false;
              existingBlock.position = null;
            } else if (existingCellData.type === 'bridge') {
              const existingBlocks = level === 'mid' ? this.midBridgeBlocks : this.highBridgeBlocks;
              const existingBlock = existingBlocks[existingCellData.index];
              existingBlock.placed = false;
              existingBlock.position = null;
              // Clear all 3 cells occupied by bridge
              const bridgeRow = existingBlock.position.row;
              const bridgeCol = existingBlock.position.col;
              if (existingBlock.rotation % 2 === 0) { // horizontal
                for (let c = bridgeCol; c < bridgeCol + 3 && c < 8; c++) {
                  grid[bridgeRow][c] = null;
                }
              } else { // vertical
                for (let r = bridgeRow; r < bridgeRow + 3 && r < 4; r++) {
                  grid[r][bridgeCol] = null;
                }
              }
            } else if (existingCellData.type === 'zone') {
              const existingBlocks = level === 'mid' ? this.midZoneBlocks : this.highZoneBlocks;
              const existingBlock = existingBlocks[existingCellData.index];
              existingBlock.placed = false;
              existingBlock.position = null;
            } else if (existingCellData.type === 'start') {
              const existingBlocks = level === 'mid' ? this.midStartBlock : this.highStartBlock;
              const existingBlock = existingBlocks[existingCellData.index];
              existingBlock.placed = false;
              existingBlock.position = null;
            }
          }
          
          // Place the block
          if (this.draggedBlockType === 'bridge') {
            // Clear old bridge position if it was placed before
            if (block.placed && block.position) {
              const oldRow = block.position.row;
              const oldCol = block.position.col;
              const oldRotation = block.rotation;
              if (oldRotation % 2 === 0) { // was horizontal
                for (let c = oldCol; c < oldCol + 3 && c < 8; c++) {
                  grid[oldRow][c] = null;
                }
              } else { // was vertical
                for (let r = oldRow; r < oldRow + 3 && r < 4; r++) {
                  grid[r][oldCol] = null;
                }
              }
            }
            
            // Place bridge in 3 cells
            const rotation = block.rotation;
            if (rotation % 2 === 0) { // horizontal
              for (let c = col; c < col + 3; c++) {
                grid[row][c] = { type: 'bridge', index: this.draggedBlockIndex };
              }
            } else { // vertical
              for (let r = row; r < row + 3; r++) {
                grid[r][col] = { type: 'bridge', index: this.draggedBlockIndex };
              }
            }
            
            block.placed = true;
            block.position = { row, col };
          } else {
            // Single cell placement (existing blocks)
            grid[row][col] = { type: this.draggedBlockType, index: this.draggedBlockIndex };
            
            if (!block.placed && this.draggedBlockType === 'checkpoint') {
              if (level === 'mid') {
                this.midCheckpointCount++;
              } else {
                this.highCheckpointCount++;
              }
            }
            
            block.placed = true;
            block.position = { row, col };
          }
          
          this.draggedBlockIndex = null;
          this.draggedBlockType = null;
          this.draggedLevel = null;
        },
        isCellOccupied(row, col, level = 'mid') {
          const grid = level === 'mid' ? this.midFieldGrid : this.highFieldGrid;
          return grid[row][col] !== null;
        },
        getCellStyle(row, col, level = 'mid') {
          const grid = level === 'mid' ? this.midFieldGrid : this.highFieldGrid;
          const cellData = grid[row][col];
          if (cellData !== null) {
            let block;
            let borderStyle = 'border: 1px solid #ddd;';
            let bgStyle = 'background: white;';
            
            // Handle different block types
            if (cellData.type === 'field') {
              const blocks = level === 'mid' ? this.midFieldBlocks : this.highFieldBlocks;
              block = blocks[cellData.index];
              const rotatedBorders = this.getRotatedBorders(block.borders, block.rotation);
              
              // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏≠‡∏ö‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á block (‡∏´‡∏•‡∏±‡∏á‡∏´‡∏°‡∏∏‡∏ô)
              switch(rotatedBorders) {
                case 'all':
                  borderStyle += 'border: 4px solid #000;';
                  break;
                case 'none':
                  break;
                case 'bottom':
                  borderStyle += 'border-bottom: 4px solid #000;';
                  break;
                case 'right':
                  borderStyle += 'border-right: 4px solid #000;';
                  break;
                case 'left-right':
                  borderStyle += 'border-left: 4px solid #000; border-right: 4px solid #000;';
                  break;
                case 'top-right':
                  borderStyle += 'border-top: 4px solid #000; border-right: 4px solid #000;';
                  break;
                case 'bottom-right':
                  borderStyle += 'border-bottom: 4px solid #000; border-right: 4px solid #000;';
                  break;
                case 'left':
                  borderStyle += 'border-left: 4px solid #000;';
                  break;
                case 'top-left':
                  borderStyle += 'border-top: 4px solid #000; border-left: 4px solid #000;';
                  break;
                case 'bottom-left':
                  borderStyle += 'border-bottom: 4px solid #000; border-left: 4px solid #000;';
                  break;
                case 'top':
                  borderStyle += 'border-top: 4px solid #000;';
                  break;
                case 'top-bottom':
                  borderStyle += 'border-top: 4px solid #000; border-bottom: 4px solid #000;';
                  break;
                case 'top-left-bottom':
                  borderStyle += 'border-top: 4px solid #000; border-left: 4px solid #000; border-bottom: 4px solid #000;';
                  break;
                case 'top-right-bottom':
                  borderStyle += 'border-top: 4px solid #000; border-right: 4px solid #000; border-bottom: 4px solid #000;';
                  break;
                case 'top-right-left':
                  borderStyle += 'border-top: 4px solid #000; border-right: 4px solid #000; border-left: 4px solid #000;';
                  break;
                case 'bottom-right-left':
                  borderStyle += 'border-bottom: 4px solid #000; border-right: 4px solid #000; border-left: 4px solid #000;';
                  break;
              }
            } else if (cellData.type === 'checkpoint') {
              const blocks = level === 'mid' ? this.midCheckpointBlocks : this.highCheckpointBlocks;
              block = blocks[cellData.index];
              const rotation = block.rotation * 90;
              borderStyle = 'position: relative; transform: rotate(' + rotation + 'deg);';
              bgStyle = 'background: #FFFFFF;';  // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏Ç‡∏≤‡∏ß
              
              // Apply checkpoint borders (‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏°‡∏∏‡∏ô)
              switch(block.borders) {
                case 'none':
                  break;
                case 'bottom':
                  borderStyle += 'border-bottom: 4px solid #000;';
                  break;
                case 'top-left-bottom':
                  borderStyle += 'border-top: 4px solid #000; border-left: 4px solid #000; border-bottom: 4px solid #000;';
                  break;
                case 'top-right-bottom':
                  borderStyle += 'border-top: 4px solid #000; border-right: 4px solid #000; border-bottom: 4px solid #000;';
                  break;
                case 'top-right-left':
                  borderStyle += 'border-top: 4px solid #000; border-right: 4px solid #000; border-left: 4px solid #000;';
                  break;
                case 'bottom-right-left':
                  borderStyle += 'border-bottom: 4px solid #000; border-right: 4px solid #000; border-left: 4px solid #000;';
                  break;
                case 'top-bottom':
                  borderStyle += 'border-top: 4px solid #000; border-bottom: 4px solid #000;';
                  break;
              }
            } else if (cellData.type === 'obstacle') {
              // Black hole style - ‡πÅ‡∏ñ‡∏ö‡∏î‡∏≥‡∏Å‡∏•‡∏≤‡∏á‡∏™‡∏π‡∏á‡πÄ‡∏ï‡πá‡∏°‡πÅ‡∏ú‡πà‡∏ô
              const blocks = level === 'mid' ? this.midObstacleBlocks : this.highObstacleBlocks;
              block = blocks[cellData.index];
              const rotation = block.rotation * 90;
              bgStyle = 'background: linear-gradient(90deg, white 0%, white 20%, #000 20%, #000 80%, white 80%, white 100%); position: relative;';
              borderStyle = 'border: 0; transform: rotate(' + rotation + 'deg);';
            } else if (cellData.type === 'ball') {
              // Stick style - ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏•‡∏≤‡∏á 60% ‡∏°‡∏µ 7 ‡πÄ‡∏™‡πâ‡∏ô‡∏™‡πâ‡∏°‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô
              const blocks = level === 'mid' ? this.midBallBlocks : this.highBallBlocks;
              block = blocks[cellData.index];
              const rotation = block.rotation * 90;
              bgStyle = 'background: white; position: relative;';
              borderStyle = 'border: 0; transform: rotate(' + rotation + 'deg);';
              // Add the vertical striped pattern in the center with exactly 7 lines
              const centerStripes = 'background-image: repeating-linear-gradient(90deg, #FF6600 0px, #FF6600 2px, transparent 2px, transparent 8px); background-position: center; background-size: 56px 100%; background-repeat: no-repeat;';
              bgStyle = centerStripes;
            } else if (cellData.type === 'zone') {
              const blocks = level === 'mid' ? this.midZoneBlocks : this.highZoneBlocks;
              block = blocks[cellData.index];
              const rotation = block.rotation;
              
              if (block.shape === 'half-left') {
                // Half-left zone - ‡∏õ‡∏£‡∏±‡∏ö‡∏ó‡∏¥‡∏®‡∏ó‡∏≤‡∏á gradient ‡∏ï‡∏≤‡∏° rotation
                let gradientDirection = 'to right';
                if (rotation === 0) {
                  gradientDirection = 'to right';  // ‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ã‡πâ‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ
                } else if (rotation === 1) {
                  gradientDirection = 'to bottom'; // ‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏ö‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ
                } else if (rotation === 2) {
                  gradientDirection = 'to left';   // ‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏Ç‡∏ß‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ
                } else if (rotation === 3) {
                  gradientDirection = 'to top';    // ‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ
                }
                
                bgStyle = 'background: linear-gradient(' + gradientDirection + ', ' + block.color + ' 0%, ' + block.color + ' 50%, white 50%, white 100%); opacity: 0.8; position: relative;';
                
                // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏ö‡∏ï‡∏≤‡∏° rotation - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ó‡∏∏‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
                if (block.border === 'left') {
                  if (rotation === 0) {
                    borderStyle = 'border-top: 0; border-right: 0; border-bottom: 0; border-left: 4px solid #000;';
                  } else if (rotation === 1) {
                    borderStyle = 'border-top: 4px solid #000; border-right: 0; border-bottom: 0; border-left: 0;';
                  } else if (rotation === 2) {
                    borderStyle = 'border-top: 0; border-right: 4px solid #000; border-bottom: 0; border-left: 0;';
                  } else if (rotation === 3) {
                    borderStyle = 'border-top: 0; border-right: 0; border-bottom: 4px solid #000; border-left: 0;';
                  }
                } else if (block.border === 'three-sides') {
                  if (rotation === 0) {
                    borderStyle = 'border-top: 4px solid #000; border-right: 0; border-bottom: 4px solid #000; border-left: 4px solid #000;';
                  } else if (rotation === 1) {
                    borderStyle = 'border-top: 4px solid #000; border-right: 4px solid #000; border-bottom: 0; border-left: 4px solid #000;';
                  } else if (rotation === 2) {
                    borderStyle = 'border-top: 4px solid #000; border-right: 4px solid #000; border-bottom: 4px solid #000; border-left: 0;';
                  } else if (rotation === 3) {
                    borderStyle = 'border-top: 0; border-right: 4px solid #000; border-bottom: 4px solid #000; border-left: 4px solid #000;';
                  }
                } else if (block.border === 'all') {
                  borderStyle = 'border: 4px solid #000;';
                } else {
                  borderStyle = 'border: 2px solid #ddd;';
                }
              } else {
                // Default zone (for high level) - ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏°‡∏∏‡∏ô
                bgStyle = 'background: ' + block.color + '; opacity: 0.8; position: relative;';
                borderStyle = 'border: 2px solid ' + block.color + ';';
              }
            } else if (cellData.type === 'start') {
              const blocks = level === 'mid' ? this.midStartBlock : this.highStartBlock;
              block = blocks[cellData.index];
              const rotation = block.rotation * 90;
              bgStyle = 'background: #FFFFFF; opacity: 1; position: relative;';  // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏Ç‡∏≤‡∏ß
              borderStyle = 'border: 0; transform: rotate(' + rotation + 'deg);';
            } else if (cellData.type === 'bridge') {
              const blocks = level === 'mid' ? this.midBridgeBlocks : this.highBridgeBlocks;
              block = blocks[cellData.index];
              bgStyle = 'background: white; position: relative;';
              
              // Bridge has borders on long sides (top/bottom when horizontal, left/right when vertical)
              // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ transform ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏£‡∏≤‡∏ß‡∏≤‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏ï‡∏≤‡∏° rotation ‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡πÅ‡∏•‡πâ‡∏ß
              if (block.rotation % 2 === 0) { // horizontal (0 or 180)
                borderStyle = 'border-top: 4px solid #000; border-right: 0; border-bottom: 4px solid #000; border-left: 0;';
              } else { // vertical (90 or 270)
                borderStyle = 'border-top: 0; border-right: 4px solid #000; border-bottom: 0; border-left: 4px solid #000;';
              }
            }
            
            return borderStyle + bgStyle + ' cursor: pointer;';
          }
          return {};
        },
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡∏™‡∏ô‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö
        randomField(level = 'mid', grade = 'high-secondary') {
          // ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏´‡∏•‡∏° - ‡πÉ‡∏ä‡πâ AudioContext ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏ï‡∏•‡∏≠‡∏î
          if (!this.audioContext) {
            this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
          }
          
          const oscillator = this.audioContext.createOscillator();
          const gainNode = this.audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(this.audioContext.destination);
          
          oscillator.frequency.value = 2000; // ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏µ‡πà‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å = ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏´‡∏•‡∏°‡∏°‡∏≤‡∏Å
          oscillator.type = 'sine';
          
          gainNode.gain.setValueAtTime(0.3, this.audioContext.currentTime);
          gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.1);
          
          oscillator.start(this.audioContext.currentTime);
          oscillator.stop(this.audioContext.currentTime + 0.1);
          
          // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ô‡∏≤‡∏°‡∏Å‡πà‡∏≠‡∏ô
          this.resetField(level);
          
          const grid = level === 'mid' ? this.midFieldGrid : this.highFieldGrid;
          const fieldBlocks = level === 'mid' ? this.midFieldBlocks : this.highFieldBlocks;
          const checkpointBlocks = level === 'mid' ? this.midCheckpointBlocks : this.highCheckpointBlocks;
          const zoneBlocks = level === 'mid' ? this.midZoneBlocks : this.highZoneBlocks;
          const obstacleBlocks = level === 'mid' ? this.midObstacleBlocks : this.highObstacleBlocks;
          const ballBlocks = level === 'mid' ? this.midBallBlocks : this.highBallBlocks;
          const bridgeBlocks = level === 'mid' ? this.midBridgeBlocks : this.highBridgeBlocks;
          const startBlock = level === 'mid' ? this.midStartBlock : this.highStartBlock;
          
          // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
          const getAvailableCells = () => {
            const cells = [];
            for (let row = 0; row < 4; row++) {
              for (let col = 0; col < 8; col++) {
                if (!grid[row][col]) {
                  cells.push({ row, col });
                }
              }
            }
            return cells;
          };
          
          // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
          const randomCell = () => {
            const available = getAvailableCells();
            if (available.length === 0) return null;
            return available[Math.floor(Math.random() * available.length)];
          };
          
          // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏∏‡πà‡∏°‡∏°‡∏∏‡∏°
          const randomRotation = () => Math.floor(Math.random() * 4);
          
          // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏á‡∏ö‡∏•‡πä‡∏≠‡∏Ñ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤
          const placeFieldBlock = (block, row, col, rotation) => {
            block.rotation = rotation;
            block.placed = true;
            block.position = { row, col };
            grid[row][col] = { type: 'field', index: fieldBlocks.indexOf(block) };
          };
          
          // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏á Checkpoint
          const placeCheckpoint = (block, row, col, rotation) => {
            block.rotation = rotation;
            block.placed = true;
            block.position = { row, col };
            grid[row][col] = { type: 'checkpoint', index: checkpointBlocks.indexOf(block) };
            if (level === 'mid') {
              this.midCheckpointCount++;
            } else {
              this.highCheckpointCount++;
            }
          };
          
          // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏á Zone
          const placeZone = (block, row, col, rotation) => {
            block.rotation = rotation;
            block.placed = true;
            block.position = { row, col };
            grid[row][col] = { type: 'zone', index: zoneBlocks.indexOf(block) };
          };
          
          // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏á Obstacle (Black Hole)
          const placeObstacle = (block, row, col, rotation) => {
            block.rotation = rotation;
            block.placed = true;
            block.position = { row, col };
            grid[row][col] = { type: 'obstacle', index: 0 };
          };
          
          // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏á Ball (Stick)
          const placeBall = (block, row, col, rotation) => {
            block.rotation = rotation;
            block.placed = true;
            block.position = { row, col };
            grid[row][col] = { type: 'ball', index: 0 };
          };
          
          // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏á Bridge (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á 3 ‡∏ä‡πà‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô)
          const placeBridge = (block, row, col, rotation) => {
            const isHorizontal = rotation % 2 === 0;
            
            // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏≠‡πÑ‡∏´‡∏°
            if (isHorizontal) {
              if (col + 3 > 8) return false;
              for (let c = col; c < col + 3; c++) {
                if (grid[row][c]) return false;
              }
              // ‡∏ß‡∏≤‡∏á‡∏ö‡∏•‡πä‡∏≠‡∏Ñ
              block.rotation = rotation;
              block.placed = true;
              block.position = { row, col };
              for (let c = col; c < col + 3; c++) {
                grid[row][c] = { type: 'bridge', index: 0, isMain: c === col };
              }
              return true;
            } else {
              if (row + 3 > 4) return false;
              for (let r = row; r < row + 3; r++) {
                if (grid[r][col]) return false;
              }
              // ‡∏ß‡∏≤‡∏á‡∏ö‡∏•‡πä‡∏≠‡∏Ñ
              block.rotation = rotation;
              block.placed = true;
              block.position = { row, col };
              for (let r = row; r < row + 3; r++) {
                grid[r][col] = { type: 'bridge', index: 0, isMain: r === row };
              }
              return true;
            }
          };
          
          // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏á START
          const placeStart = (block, row, col, rotation) => {
            block.rotation = rotation;
            block.placed = true;
            block.position = { row, col };
            grid[row][col] = { type: 'start', index: 0 };
          };
          
          // ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á: ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô
          
          // 1. ‡∏ß‡∏≤‡∏á Checkpoint 2 ‡∏à‡∏∏‡∏î‡∏à‡∏≤‡∏Å 4 ‡∏à‡∏∏‡∏î (‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö - ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ)
          const selectedCheckpoints = [];
          const checkpointIndices = [0, 1, 2, 3];
          // ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 2 ‡∏à‡∏∏‡∏î
          for (let i = 0; i < 2; i++) {
            const randomIndex = Math.floor(Math.random() * checkpointIndices.length);
            selectedCheckpoints.push(checkpointIndices[randomIndex]);
            checkpointIndices.splice(randomIndex, 1);
          }
          
          selectedCheckpoints.forEach(index => {
            const cell = randomCell();
            if (cell) {
              placeCheckpoint(checkpointBlocks[index], cell.row, cell.col, randomRotation());
            }
          });
          
          // 2. ‡∏ß‡∏≤‡∏á Bridge - ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ‡∏°.‡∏õ‡∏•‡∏≤‡∏¢
          if (grade === 'high-secondary') {
            // ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ß‡∏≤‡∏á‡∏™‡∏∞‡∏û‡∏≤‡∏ô (‡∏•‡∏≠‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ 3 ‡∏ä‡πà‡∏≠‡∏á‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô)
            let bridgePlaced = false;
            for (let attempt = 0; attempt < 50 && !bridgePlaced; attempt++) {
              const cell3 = randomCell();
              if (cell3) {
                bridgePlaced = placeBridge(bridgeBlocks[0], cell3.row, cell3.col, Math.floor(Math.random() * 2) * 2);
              }
            }
            
            // ‡∏ñ‡πâ‡∏≤‡∏ß‡∏≤‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÉ‡∏´‡πâ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÅ‡∏•‡∏∞‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            if (!bridgePlaced) {
              console.log('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ß‡∏≤‡∏á‡∏™‡∏∞‡∏û‡∏≤‡∏ô‡πÑ‡∏î‡πâ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà...');
              return this.randomField(level, grade);
            }
          }
          
          // 3. ‡∏ß‡∏≤‡∏á Zone Blocks (4 ‡πÅ‡∏ú‡πà‡∏ô - ‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏µ)
          zoneBlocks.forEach(block => {
            const cell = randomCell();
            if (cell) {
              placeZone(block, cell.row, cell.col, randomRotation());
            }
          });
          
          // 4. ‡∏ß‡∏≤‡∏á Obstacle (Black Hole) - ‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏µ
          const cell1 = randomCell();
          if (cell1) {
            placeObstacle(obstacleBlocks[0], cell1.row, cell1.col, randomRotation());
          }
          
          // 5. ‡∏ß‡∏≤‡∏á Ball (Stick) - ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ ‡∏°.‡∏ï‡πâ‡∏ô ‡πÅ‡∏•‡∏∞ ‡∏°.‡∏õ‡∏•‡∏≤‡∏¢
          if (grade === 'secondary' || grade === 'high-secondary') {
            const cell2 = randomCell();
            if (cell2) {
              placeBall(ballBlocks[0], cell2.row, cell2.col, randomRotation());
            }
          }
          
          // 6. ‡∏ß‡∏≤‡∏á START Block (‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)
          const cellStart = randomCell();
          if (cellStart) {
            placeStart(startBlock[0], cellStart.row, cellStart.col, randomRotation());
          }
          
          // 7. ‡∏ß‡∏≤‡∏á Field Blocks (10 ‡πÅ‡∏ú‡πà‡∏ô) - ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏ó‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö
          fieldBlocks.forEach(block => {
            const cell = randomCell();
            if (cell) {
              placeFieldBlock(block, cell.row, cell.col, randomRotation());
            }
          });
        },
        
        resetField(level = 'mid') {
          if (level === 'mid') {
            this.midFieldGrid = Array(4).fill(null).map(() => Array(8).fill(null));
            this.midFieldBlocks.forEach(block => {
              block.placed = false;
              block.position = null;
            });
            this.midCheckpointBlocks.forEach(block => {
              block.placed = false;
              block.position = null;
            });
            this.midObstacleBlocks.forEach(block => {
              block.placed = false;
              block.position = null;
            });
            this.midBallBlocks.forEach(block => {
              block.placed = false;
              block.position = null;
            });
            this.midBridgeBlocks.forEach(block => {
              block.placed = false;
              block.position = null;
            });
            this.midZoneBlocks.forEach(block => {
              block.placed = false;
              block.position = null;
            });
            this.midStartBlock.forEach(block => {
              block.placed = false;
              block.position = null;
            });
            this.midCheckpointCount = 0;
          } else {
            this.highFieldGrid = Array(4).fill(null).map(() => Array(8).fill(null));
            this.highFieldBlocks.forEach(block => {
              block.placed = false;
              block.position = null;
            });
            this.highCheckpointBlocks.forEach(block => {
              block.placed = false;
              block.position = null;
            });
            this.highObstacleBlocks.forEach(block => {
              block.placed = false;
              block.position = null;
            });
            this.highBallBlocks.forEach(block => {
              block.placed = false;
              block.position = null;
            });
            this.highBridgeBlocks.forEach(block => {
              block.placed = false;
              block.position = null;
            });
            this.highZoneBlocks.forEach(block => {
              block.placed = false;
              block.position = null;
            });
            this.highStartBlock.forEach(block => {
              block.placed = false;
              block.position = null;
            });
            this.highCheckpointCount = 0;
          }
        },
        
        // Teams Management Methods
        openAddTeamDialog() {
          this.addTeamDialog = true;
          this.saveStatus = null;
          // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°
          this.newTeam = {
            school_id: '',
            school_name: '',
            zone: '',
            level: '',
            competition: '',
            field: ''
          };
          if (this.$refs.teamForm) {
            this.$refs.teamForm.resetValidation();
          }
        },
        
        closeAddTeamDialog() {
          this.addTeamDialog = false;
          this.saveStatus = null;
        },
        
        async saveTeam() {
          // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
          if (!this.$refs.teamForm.validate()) {
            return;
          }
          
          this.isSaving = true;
          this.saveStatus = null;
          
          try {
            // ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡πà‡∏á
            const teamData = {
              school_id: this.newTeam.school_id,
              school_name: this.newTeam.school_name,
              zone: this.newTeam.zone,
              level: this.newTeam.level,
              competition: this.newTeam.competition,
              field: this.newTeam.field,
              timestamp: new Date().toISOString()
            };
            
            // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡πà‡∏≤‡∏ô JSONP
            await this.sendDataViaJSONP(teamData);
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
            this.midTeams.push({ ...teamData });
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
            this.saveStatus = {
              type: 'success',
              message: '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!'
            };
            
            // ‡∏õ‡∏¥‡∏î dialog ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 1.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setTimeout(() => {
              this.closeAddTeamDialog();
            }, 1500);
            
          } catch (error) {
            console.error('Error saving team:', error);
            this.saveStatus = {
              type: 'error',
              message: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ' + error.message
            };
          } finally {
            this.isSaving = false;
          }
        },
        
        sendDataViaJSONP(data) {
          return new Promise((resolve, reject) => {
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á callback function
            const callbackName = 'jsonpCallback_' + Date.now();
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á URL ‡∏û‡∏£‡πâ‡∏≠‡∏° parameters
            const params = new URLSearchParams({
              action: 'addTeam',
              callback: callbackName,
              ...data
            });
            
            const url = `${this.gasUrl}?${params.toString()}`;
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á callback function
            window[callbackName] = function(response) {
              delete window[callbackName];
              document.body.removeChild(script);
              
              if (response.success) {
                resolve(response);
              } else {
                reject(new Error(response.message || 'Unknown error'));
              }
            };
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á script tag
            const script = document.createElement('script');
            script.src = url;
            script.onerror = function() {
              delete window[callbackName];
              document.body.removeChild(script);
              reject(new Error('JSONP request failed'));
            };
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏° timeout
            setTimeout(() => {
              if (window[callbackName]) {
                delete window[callbackName];
                if (document.body.contains(script)) {
                  document.body.removeChild(script);
                }
                reject(new Error('Request timeout'));
              }
            }, 10000); // 10 seconds timeout
            
            document.body.appendChild(script);
          });
        },
        
        // Authentication Methods
        openAuthDialog() {
          this.authDialog = true;
          this.username = '';
          this.password = '';
          this.authError = '';
        },
        
        closeAuthDialog() {
          this.authDialog = false;
          this.username = '';
          this.password = '';
          this.authError = '';
        },
        
        
        authenticate() {
          this.isAuthenticating = true;
          this.authError = '';
          
          try {
            const username = this.username.trim();
            const password = this.password.trim();
            
            // ‡πÅ‡∏õ‡∏•‡∏á currentLevel ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô 'mid' ‡∏´‡∏£‡∏∑‡∏≠ 'high'
            let level = 'mid';
            if (this.currentLevel === 'high' || (typeof this.currentLevel === 'string' && this.currentLevel.includes('high'))) {
              level = 'high';
            }
            

            
            // ‡πÄ‡∏ä‡πá‡∏Ñ superadmin (‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö)
            if (username === String(this.settings.superadmin) && password === String(this.settings.superadmin_password)) {
              this.isAuthenticated = true;
              this.currentUser = {
                username: username,
                role: 'superadmin',
                level: 'all'
              };
              this.closeAuthDialog();
              this.showSnackbar(`‚úì ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${username})`, 'success');
              this.isAuthenticating = false;
              return;
            }
            
            // ‡πÄ‡∏ä‡πá‡∏Ñ admin ‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö
            if (level === 'mid') {
              
              // admin_mid1
              if (username === String(this.settings.admin_mid1) && password === String(this.settings.admin_mid1_password)) {
                this.isAuthenticated = true;
                this.currentUser = { username, role: 'admin', level: 'mid' };
                this.closeAuthDialog();
                this.showSnackbar(`‚úì ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${username})`, 'success');
                this.isAuthenticating = false;
                return;
              }
              // admin_mid2
              if (username === String(this.settings.admin_mid2) && password === String(this.settings.admin_mid2_password)) {
                this.isAuthenticated = true;
                this.currentUser = { username, role: 'admin', level: 'mid' };
                this.closeAuthDialog();
                this.showSnackbar(`‚úì ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${username})`, 'success');
                this.isAuthenticating = false;
                return;
              }
            } else if (level === 'high') {
              
              // admin_high1
              if (username === String(this.settings.admin_high1) && password === String(this.settings.admin_high1_password)) {
                this.isAuthenticated = true;
                this.currentUser = { username, role: 'admin', level: 'high' };
                this.closeAuthDialog();
                this.showSnackbar(`‚úì ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${username})`, 'success');
                this.isAuthenticating = false;
                return;
              }
              // admin_high2
              if (username === String(this.settings.admin_high2) && password === String(this.settings.admin_high2_password)) {
                this.isAuthenticated = true;
                this.currentUser = { username, role: 'admin', level: 'high' };
                this.closeAuthDialog();
                this.showSnackbar(`‚úì ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (${username})`, 'success');
                this.isAuthenticating = false;
                return;
              }
            }
            
            // ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏î ‡πÜ
            this.authError = '‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
            this.isAuthenticating = false;
            
          } catch (error) {
            console.error('‚ùå Authentication error:', error);
            this.authError = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message;
            this.isAuthenticating = false;
          }
        },
        
        logout() {
          this.isAuthenticated = false;
          this.currentUser = null;
          this.username = '';
          this.password = '';
          this.showSnackbar('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'info');
        },
        
        // Team Score Methods - ‡∏´‡∏≤‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
        getBestRound(team) {
          if (!team) return null;
          
          const score1 = team.score1 || 0;
          const score2 = team.score2 || 0;
          const retry1 = team.retry1 || 0;
          const retry2 = team.retry2 || 0;
          const time1 = team.time1 || '0:00:00';
          const time2 = team.time2 || '0:00:00';
          
          // 1. ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Å‡πà‡∏≠‡∏ô (‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤)
          if (score1 > score2) {
            return { score: score1, retry: retry1, time: time1 };
          } else if (score2 > score1) {
            return { score: score2, retry: retry2, time: time2 };
          }
          
          // 2. ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö retry (‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤)
          if (retry1 < retry2) {
            return { score: score1, retry: retry1, time: time1 };
          } else if (retry2 < retry1) {
            return { score: score2, retry: retry2, time: time2 };
          }
          
          // 3. ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞ retry ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ (‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤)
          const time1Sec = this.timeToSeconds(time1);
          const time2Sec = this.timeToSeconds(time2);
          if (time1Sec < time2Sec) {
            return { score: score1, retry: retry1, time: time1 };
          } else {
            return { score: score2, retry: retry2, time: time2 };
          }
        },
        
        getBestScore(team) {
          const best = this.getBestRound(team);
          return best ? best.score : 0;
        },
        
        getBestRetry(team) {
          const best = this.getBestRound(team);
          return best ? best.retry : 0;
        },
        
        getBestTime(team) {
          const best = this.getBestRound(team);
          return best ? best.time : '0:00:00';
        },
        
        timeToSeconds(timeStr) {
          if (!timeStr || timeStr === '0:00:00') return 0;
          const parts = timeStr.split(':');
          if (parts.length === 3) {
            const minutes = parseInt(parts[0]) || 0;
            const seconds = parseInt(parts[1]) || 0;
            const centiseconds = parseInt(parts[2]) || 0;
            return minutes * 60 + seconds + centiseconds / 100;
          }
          return 180;
        },
        
        formatTimeInput(event, item, field) {
          let value = item[field] || '';
          
          // ‡∏•‡∏ö‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
          value = value.replace(/[^\d]/g, '');
          
          // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 6 ‡∏ï‡∏±‡∏ß (0:00:00)
          if (value.length > 6) {
            value = value.substring(0, 6);
          }
          
          // ‡πÉ‡∏™‡πà : ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
          let formatted = '';
          if (value.length > 0) {
            formatted = value[0]; // ‡∏ô‡∏≤‡∏ó‡∏µ (‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)
            if (value.length > 1) {
              formatted += ':' + value.substring(1, 3); // ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (2 ‡∏´‡∏•‡∏±‡∏Å)
              if (value.length > 3) {
                formatted += ':' + value.substring(3, 5); // ‡πÄ‡∏ã‡∏ô‡∏ï‡∏¥‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (2 ‡∏´‡∏•‡∏±‡∏Å)
              }
            }
          }
          
          // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤
          this.$set(item, field, formatted);
        },
        
        validateTimeFormat(item, field) {
          let value = item[field] || '';
          
          // ‡∏•‡∏ö‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç
          const digits = value.replace(/[^\d]/g, '');
          
          // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
          if (digits.length === 0) {
            this.$set(item, field, '0:00:00');
            return;
          }
          
          // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö M:SS:CC
          let minutes = 0;
          let seconds = 0;
          let centiseconds = 0;
          
          if (digits.length === 1) {
            // ‡πÅ‡∏Ñ‡πà 1 ‡∏ï‡∏±‡∏ß: 1 -> 1:00:00
            minutes = parseInt(digits[0]);
          } else if (digits.length === 2) {
            // 2 ‡∏ï‡∏±‡∏ß: 12 -> 1:20:00
            minutes = parseInt(digits[0]);
            seconds = parseInt(digits[1] + '0');
          } else if (digits.length === 3) {
            // 3 ‡∏ï‡∏±‡∏ß: 123 -> 1:23:00
            minutes = parseInt(digits[0]);
            seconds = parseInt(digits.substring(1, 3));
          } else if (digits.length === 4) {
            // 4 ‡∏ï‡∏±‡∏ß: 1234 -> 1:23:40
            minutes = parseInt(digits[0]);
            seconds = parseInt(digits.substring(1, 3));
            centiseconds = parseInt(digits[3] + '0');
          } else {
            // 5-6 ‡∏ï‡∏±‡∏ß: 12345 -> 1:23:45
            minutes = parseInt(digits[0]);
            seconds = parseInt(digits.substring(1, 3));
            centiseconds = parseInt(digits.substring(3, 5));
          }
          
          // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
          if (seconds > 59) seconds = 59;
          if (centiseconds > 99) centiseconds = 99;
          
          // ‡∏à‡∏±‡∏î‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö M:SS:CC
          const formatted = `${minutes}:${String(seconds).padStart(2, '0')}:${String(centiseconds).padStart(2, '0')}`;
          this.$set(item, field, formatted);
        },
        
        getRetryColor(retry) {
          if (retry === 0) return 'success--text font-weight-bold';
          if (retry <= 2) return 'warning--text font-weight-bold';
          return 'error--text font-weight-bold';
        },
        
        getRetryChipColor(retry) {
          if (retry === 0) return 'success';
          if (retry <= 2) return 'orange';
          return 'red';
        },
        
        getRetryBadgeClass(retry) {
          if (retry === 0) return '';
          return 'red--text';
        },
        
        getBarColor(index) {
          const colors = ['blue', 'green', 'orange', 'purple', 'teal', 'pink', 'indigo', 'cyan'];
          return colors[index % colors.length];
        },
        
        getRankColor(index) {
          return 'primary';
        },
        
        // ‡∏™‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö header ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ô‡∏≤‡∏°
        getFieldHeaderColor(field) {
          if (field === 'A') return 'blue darken-1';
          if (field === 'B') return 'red darken-1';
          return 'primary';
        },
        
        // ‡∏™‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö chip ‡∏™‡∏ô‡∏≤‡∏°
        getFieldChipColor(field) {
          if (field === 'A') return 'blue darken-3';
          if (field === 'B') return 'red darken-3';
          return 'grey darken-1';
        },
        
        // ‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö chip ‡πÄ‡∏Ç‡∏ï
        getFieldTextColor(field) {
          if (field === 'A') return 'blue darken-1';
          if (field === 'B') return 'red darken-1';
          return 'primary';
        },
        
        // ‡∏™‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö school_id badge
        getSchoolIdColor(schoolId) {
          // ‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ï‡∏±‡∏ß‡πÅ‡∏£‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏µ
          if (!schoolId) return 'grey';
          const firstChar = schoolId.toString().charAt(0).toLowerCase();
          const colorMap = {
            's': 'teal',
            'm': 'orange',
            'h': 'pink',
            'a': 'indigo',
            'b': 'cyan',
            'c': 'amber',
            'd': 'lime',
            'e': 'green',
            'f': 'light-blue',
            'g': 'purple'
          };
          return colorMap[firstChar] || 'white';
        },
        
        async updateTeamScore(team, level = 'mid') {
          if (!this.isAuthenticated) {
            this.showSnackbar('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô', 'warning');
            return;
          }
          
          this.$set(team, 'updating', true);
          
          try {
            const data = {
              action: 'updateScore',
              school_id: team.school_id,
              score1: team.score1,
              retry1: team.retry1,
              time1: team.time1,
              score2: team.score2,
              retry2: team.retry2,
              time2: team.time2,
              level: level  // ‡∏™‡πà‡∏á level ‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢
            };
            
            await this.sendJSONPRequest(data);
            
            this.$set(team, 'updating', false);
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
            this.showSnackbar('‚úì ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + team.school_name + ' (' + (level === 'high' ? '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á' : '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á') + ')', 'success');
          } catch (error) {
            console.error('Error updating score:', error);
            this.$set(team, 'updating', false);
            this.showSnackbar('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + error.message, 'error');
          }
        },
        
        // Wrapper function ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö inline edit ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á
        async saveTeam(team) {
          return await this.updateTeamScore(team, 'mid');
        },
        
        // Wrapper function ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö inline edit ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á
        async saveTeam_high(team) {
          return await this.updateTeamScore(team, 'high');
        },
        
        showSnackbar(text, color = 'success') {
          this.snackbarText = text;
          this.snackbarColor = color;
          this.snackbar = true;
        },
        
        renderResultsChart() {
          const canvas = document.getElementById('resultsChart');
          if (!canvas || !this.sortedTeams || this.sortedTeams.length === 0) return;
          
          // ‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
          if (this.resultsChartInstance) {
            try {
              this.resultsChartInstance.destroy();
            } catch (e) {
              console.warn('Error destroying chart:', e);
            }
            this.resultsChartInstance = null;
          }
          
          // ‡∏•‡∏ö Chart instance ‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏ï‡∏¥‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡πÉ‡∏ô canvas
          const existingChart = Chart.getChart(canvas);
          if (existingChart) {
            existingChart.destroy();
          }
          
          // Clear canvas ‡πÉ‡∏´‡πâ‡∏™‡∏∞‡∏≠‡∏≤‡∏î
          const ctx = canvas.getContext('2d');
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          const teams = this.sortedTeams; // ‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡∏°‡∏ï‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á
          const self = this; // ‡πÄ‡∏Å‡πá‡∏ö reference ‡∏Ç‡∏≠‡∏á Vue instance
          
          // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏≤‡πÄ‡∏£‡∏¢‡πå‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ó‡∏µ‡∏°
          const backgroundColors = teams.map(() => '#4CAF50'); // ‡∏™‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö appbar ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á
          const borderColors = teams.map(() => '#388E3C'); // ‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÄ‡∏Ç‡πâ‡∏°
          
          this.resultsChartInstance = new Chart(ctx, {
            type: 'bar',
            data: {
              labels: teams.map((team, index) => `${index + 1}. ${team.school_name}`),
              datasets: [{
                label: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô',
                data: teams.map(team => self.getBestScore(team)),
                backgroundColor: backgroundColors,
                borderColor: borderColors,
                borderWidth: 1
              }]
            },
            plugins: [{
              id: 'customLabels',
              afterDatasetsDraw: (chart) => {
                const chartCtx = chart.ctx;
                chart.data.datasets.forEach((dataset, i) => {
                  const meta = chart.getDatasetMeta(i);
                  meta.data.forEach((bar, index) => {
                    const team = teams[index];
                    const retry = self.getBestRetry(team);
                    const time = self.getBestTime(team);
                    const score = self.getBestScore(team);
                    chartCtx.save();
                    const isMobile = window.innerWidth <= 600;
                    const schoolFontSize = isMobile ? 10 : 13;
                    const detailFontSize = isMobile ? 9 : 12;
                    const scoreFontSize = isMobile ? 11 : 14;
                    // 0. ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏≠‡∏¢‡∏π‡πà‡∏ä‡∏¥‡∏î‡∏ã‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î‡∏ô‡∏≠‡∏Å‡πÅ‡∏ó‡πà‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
                    // 0. ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏≠‡∏¢‡∏π‡πà‡∏ä‡∏¥‡∏î‡∏ã‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î‡∏ô‡∏≠‡∏Å‡πÅ‡∏ó‡πà‡∏á (‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏¢‡∏∞‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡∏±‡∏î)
                    chartCtx.textAlign = 'left';
                    chartCtx.textBaseline = 'middle';
                    chartCtx.fillStyle = '#333';
                    chartCtx.font = `bold ${schoolFontSize}px Roboto`;
                    const schoolNameText = `${index + 1}. ${team.school_name}`;
                    chartCtx.fillText(schoolNameText, chart.chartArea.left + 4, bar.y);
                    // 1. ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡πÅ‡∏ó‡πà‡∏á (‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß)
                    if (score > 0) {
                      chartCtx.textAlign = 'right';
                      chartCtx.textBaseline = 'middle';
                      chartCtx.fillStyle = '#fff';
                      chartCtx.font = `bold ${scoreFontSize}px Roboto`;
                      chartCtx.fillText(score, bar.x - (isMobile ? 3 : 5), bar.y);
                    }
                    // 2. Retry ‡πÄ‡∏õ‡πá‡∏ô stack ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤
                    // stack ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÅ‡∏ó‡πà‡∏á (‡πÇ‡∏ä‡∏ß‡πå‡πÄ‡∏•‡∏Ç 0 ‡∏î‡πâ‡∏ß‡∏¢)
                    const stackHeight = bar.height;
                    const stackWidth = 18;  // 18px
                    const stackX = bar.x + 2;
                    const stackY = bar.y - stackHeight/2;
                    chartCtx.beginPath();
                    chartCtx.fillStyle = '#e53935';
                    chartCtx.strokeStyle = '#fff';
                    chartCtx.lineWidth = 1;
                    chartCtx.rect(stackX, stackY, stackWidth, stackHeight);
                    chartCtx.fill();
                    chartCtx.stroke();
                    // ‡∏ß‡∏≤‡∏î‡πÄ‡∏•‡∏Ç retry ‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß ‡∏ñ‡πâ‡∏≤ retry > 1 ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á
                    chartCtx.font = `bold ${detailFontSize}px Roboto`;
                    chartCtx.textAlign = 'center';
                    chartCtx.textBaseline = 'middle';
                    chartCtx.fillStyle = '#fff' ;
                    chartCtx.fillText(retry, stackX + stackWidth/2, bar.y);
                    // 3. Label ‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å‡πÅ‡∏ó‡πà‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤ (‡∏´‡∏•‡∏±‡∏á retry)
                    // ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î‡∏´‡∏•‡∏±‡∏á retry
                    // ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á chartArea
                    let timeLabelX = chart.chartArea.right - 4;
                    chartCtx.textAlign = 'right';
                    chartCtx.textBaseline = 'middle';
                    chartCtx.font = `bold ${detailFontSize}px Roboto`;
                    chartCtx.fillStyle = '#1976D2';
                    chartCtx.fillText(time, timeLabelX, bar.y);
                    chartCtx.restore();
                  });
                });
              }
            }],
            options: {
              indexAxis: 'y',
              responsive: true,
              maintainAspectRatio: false,
              layout: {
                padding: {
                  left: window.innerWidth <= 600 ? 2 : 10,
                  right: window.innerWidth <= 600 ? 2 : 10,
                  top: window.innerWidth <= 600 ? 5 : 10,
                  bottom: window.innerWidth <= 600 ? 2 : 10
                }
              },
              plugins: {
                title: {
                  display: true,
                  text: this.filterCompetition 
                    ? `‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á ( ${this.filterLevel} - ${this.filterCompetition} )`
                    : '‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á',
                  font: {
                    size: window.innerWidth <= 600 ? 14 : 18,
                    weight: 'bold'
                  },
                  padding: {
                    top: window.innerWidth <= 600 ? 5 : 10,
                    bottom: window.innerWidth <= 600 ? 8 : 20
                  }
                },
                legend: {
                  display: false
                },
                tooltip: {
                  callbacks: {
                    label: function(context) {
                      const team = teams[context.dataIndex];
                      return [
                        `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${context.parsed.x}`,
                        `Retry: ${this.getBestRetry(team)}`,
                        `‡πÄ‡∏ß‡∏•‡∏≤: ${this.getBestTime(team)}`
                      ];
                    }.bind(this)
                  }
                }
              },
              scales: {
                x: {
                  beginAtZero: true,
                  max: 130,
                  title: {
                    display: true,
                    text: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô',
                    font: {
                      size: window.innerWidth <= 600 ? 10 : 12
                    }
                  },
                  ticks: {
                    font: {
                      size: window.innerWidth <= 600 ? 9 : 11
                    }
                  },
                  grid: {
                    display: false
                  }
                },
                y: {
                  ticks: {
                    display: false  // ‡∏ã‡πà‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡∏ô Y ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏µ‡πÉ‡∏ô‡πÅ‡∏ó‡πà‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡πâ‡∏ß
                  },
                  grid: {
                    display: false
                  }
                }
              }
            }
          });
        },
        
        renderResultsChartHigh() {
          const canvas = document.getElementById('resultsChartHigh');
          if (!canvas || !this.sortedTeams_high || this.sortedTeams_high.length === 0) return;
          
          // ‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå
          if (this.resultsChartHighInstance) {
            try {
              this.resultsChartHighInstance.destroy();
            } catch (e) {
              console.warn('Error destroying chart high:', e);
            }
            this.resultsChartHighInstance = null;
          }
          
          // ‡∏•‡∏ö Chart instance ‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏ï‡∏¥‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡πÉ‡∏ô canvas
          const existingChart = Chart.getChart(canvas);
          if (existingChart) {
            existingChart.destroy();
          }
          
          // Clear canvas ‡πÉ‡∏´‡πâ‡∏™‡∏∞‡∏≠‡∏≤‡∏î
          const ctx = canvas.getContext('2d');
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          const teams = this.sortedTeams_high;
          const self = this; // ‡πÄ‡∏Å‡πá‡∏ö reference ‡∏Ç‡∏≠‡∏á Vue instance
          
          // ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡∏™‡πâ‡∏°‡∏ó‡∏∏‡∏Å‡πÅ‡∏ó‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏Ç‡∏≠‡∏ö‡∏™‡πâ‡∏°‡πÄ‡∏Ç‡πâ‡∏°
          const backgroundColors = teams.map(() => '#FF9800');
          const borderColors = teams.map(() => '#F57C00');
          
          this.resultsChartHighInstance = new Chart(ctx, {
            type: 'bar',
            data: {
              labels: teams.map((team, index) => `${index + 1}. ${team.school_name}`),
              datasets: [{
                label: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô',
                data: teams.map(team => self.getBestScore(team)),
                backgroundColor: backgroundColors,
                borderColor: borderColors,
                borderWidth: 1
              }]
            },
            plugins: [{
              id: 'customLabelsHigh',
              afterDatasetsDraw: (chart) => {
                const chartCtx = chart.ctx;
                chart.data.datasets.forEach((dataset, i) => {
                  const meta = chart.getDatasetMeta(i);
                  meta.data.forEach((bar, index) => {
                    const team = teams[index];
                    const retry = self.getBestRetry(team);
                    const time = self.getBestTime(team);
                    const score = self.getBestScore(team);
                    chartCtx.save();
                    const isMobile = window.innerWidth <= 600;
                    const schoolFontSize = isMobile ? 10 : 13;
                    const detailFontSize = isMobile ? 9 : 12;
                    const scoreFontSize = isMobile ? 11 : 14;
                    // 0. ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡∏∞‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏≠‡∏¢‡∏π‡πà‡∏ä‡∏¥‡∏î‡∏ã‡πâ‡∏≤‡∏¢‡∏™‡∏∏‡∏î‡∏ô‡∏≠‡∏Å‡πÅ‡∏ó‡πà‡∏á
                    chartCtx.textAlign = 'left';
                    chartCtx.textBaseline = 'middle';
                    chartCtx.fillStyle = '#333';
                    chartCtx.font = `bold ${schoolFontSize}px Roboto`;
                    const schoolNameText = `${index + 1}. ${team.school_name}`;
                    chartCtx.fillText(schoolNameText, chart.chartArea.left + 4, bar.y);
                    // 1. ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡πÅ‡∏ó‡πà‡∏á (‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß)
                    if (score > 0) {
                      chartCtx.textAlign = 'right';
                      chartCtx.textBaseline = 'middle';
                      chartCtx.fillStyle = '#fff';
                      chartCtx.font = `bold ${scoreFontSize}px Roboto`;
                      chartCtx.fillText(score, bar.x - (isMobile ? 3 : 5), bar.y);
                    }
                    // 2. Retry ‡πÄ‡∏õ‡πá‡∏ô stack ‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏ó‡∏≤‡∏á‡∏Ç‡∏ß‡∏≤
                    // stack ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÅ‡∏ó‡πà‡∏á (‡πÇ‡∏ä‡∏ß‡πå‡πÄ‡∏•‡∏Ç 0 ‡∏î‡πâ‡∏ß‡∏¢)
                    const stackHeight = bar.height;
                    const stackWidth = 18;  // 18px
                    const stackX = bar.x + 2;
                    const stackY = bar.y - stackHeight/2;
                    chartCtx.beginPath();
                    chartCtx.fillStyle = '#e53935';
                    chartCtx.strokeStyle = '#fff';
                    chartCtx.lineWidth = 1;
                    chartCtx.rect(stackX, stackY, stackWidth, stackHeight);
                    chartCtx.fill();
                    chartCtx.stroke();
                    // ‡∏ß‡∏≤‡∏î‡πÄ‡∏•‡∏Ç retry ‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß ‡∏ñ‡πâ‡∏≤ retry > 1 ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á
                    chartCtx.font = `bold ${detailFontSize}px Roboto`;
                    chartCtx.textAlign = 'center';
                    chartCtx.textBaseline = 'middle';
                    chartCtx.fillStyle = '#fff';
                    chartCtx.fillText(retry, stackX + stackWidth/2, bar.y);
                    // 3. Label ‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πà‡∏≠‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å‡πÅ‡∏ó‡πà‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤ (‡∏´‡∏•‡∏±‡∏á retry)
                    // ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î‡∏´‡∏•‡∏±‡∏á retry
                    // ‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏ä‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á chartArea
                    let timeLabelX = chart.chartArea.right - 4;
                    chartCtx.textAlign = 'right';
                    chartCtx.textBaseline = 'middle';
                    chartCtx.font = `bold ${detailFontSize}px Roboto`;
                    chartCtx.fillStyle = '#1976D2';
                    chartCtx.fillText(time, timeLabelX, bar.y);
                    chartCtx.restore();
                  });
                });
              }
            }],
            options: {
              indexAxis: 'y',
              responsive: true,
              maintainAspectRatio: false,
              layout: {
                padding: {
                  left: window.innerWidth <= 600 ? 2 : 10,
                  right: window.innerWidth <= 600 ? 2 : 10,
                  top: window.innerWidth <= 600 ? 5 : 10,
                  bottom: window.innerWidth <= 600 ? 2 : 10
                }
              },
              plugins: {
                title: {
                  display: true,
                  text: this.filterCompetition 
                    ? `‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á ( ${this.filterLevel_high} - ${this.filterCompetition_high} )`
                    : '‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á',
                  font: {
                    size: window.innerWidth <= 600 ? 14 : 18,
                    weight: 'bold'
                  },
                  padding: {
                    top: window.innerWidth <= 600 ? 5 : 10,
                    bottom: window.innerWidth <= 600 ? 8 : 20
                  }
                },
                legend: {
                  display: false
                },
                tooltip: {
                  callbacks: {
                    label: function(context) {
                      const team = teams[context.dataIndex];
                      return [
                        `‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${context.parsed.x}`,
                        `Retry: ${this.getBestRetry(team)}`,
                        `‡πÄ‡∏ß‡∏•‡∏≤: ${this.getBestTime(team)}`
                      ];
                    }.bind(this)
                  }
                }
              },
              scales: {
                x: {
                  beginAtZero: true,
                  max: 130,
                  title: {
                    display: true,
                    text: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô',
                    font: {
                      size: window.innerWidth <= 600 ? 10 : 12
                    }
                  },
                  ticks: {
                    font: {
                      size: window.innerWidth <= 600 ? 9 : 11
                    }
                  },
                  grid: {
                    display: false
                  }
                },
                y: {
                  ticks: {
                    display: false  // ‡∏ã‡πà‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡∏ô Y ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏µ‡πÉ‡∏ô‡πÅ‡∏ó‡πà‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡πâ‡∏ß
                  },
                  grid: {
                    display: false
                  }
                }
              }
            }
          });
        },
        
        async loadTeamsFromGAS() {
          this.isLoadingTeams = true;
          
          try {
            const data = await this.sendJSONPRequest({ action: 'getAllTeams' });
            
            if (data.success && data.data) {
              // ‡πÇ‡∏´‡∏•‡∏î settings ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏£‡∏ß‡∏° passwords)
              if (data.settings) {
                this.settings = data.settings;
              } else {
                console.error('‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö settings ‡πÉ‡∏ô response');
              }
              
              // ‡πÇ‡∏´‡∏•‡∏î defaultFilter ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö mid
              if (data.defaultFilter_mid) {
                try {
                  const filter = typeof data.defaultFilter_mid === 'string' ? JSON.parse(data.defaultFilter_mid) : data.defaultFilter_mid;
                  this.filterZone = filter.filterZone || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                  this.filterLevel = filter.filterLevel || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                  this.filterField = filter.filterField || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                  this.filterCompetition = filter.filterCompetition || '';
                } catch (e) {
                  console.error('Error parsing defaultFilter_mid:', e);
                }
              }
              
              // ‡πÇ‡∏´‡∏•‡∏î defaultFilter ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö high
              if (data.defaultFilter_high) {
                try {
                  const filter = typeof data.defaultFilter_high === 'string' ? JSON.parse(data.defaultFilter_high) : data.defaultFilter_high;
                  this.filterZone_high = filter.filterZone || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                  this.filterLevel_high = filter.filterLevel || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                  this.filterField_high = filter.filterField || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                  this.filterCompetition_high = filter.filterCompetition || '';
                } catch (e) {
                  console.error('Error parsing defaultFilter_high:', e);
                }
              }
              
              // ‡πÇ‡∏´‡∏•‡∏î teams ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á
              this.midTeams = data.data.map(team => ({
                ...team,
                score1: team.score1 || 0,
                retry1: team.retry1 || 0,
                time1: team.time1 || '0:00:00',
                score2: team.score2 || 0,
                retry2: team.retry2 || 0,
                time2: team.time2 || '0:00:00',
                updating: false
              }));
              
              // ‡πÇ‡∏´‡∏•‡∏î teams ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
              if (data.highTeams) {
                this.highTeams = data.highTeams.map(team => ({
                  ...team,
                  score1: team.score1 || 0,
                  retry1: team.retry1 || 0,
                  time1: team.time1 || '0:00:00',
                  score2: team.score2 || 0,
                  retry2: team.retry2 || 0,
                  time2: team.time2 || '0:00:00',
                  updating: false
                }));
              }
              
              // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏ï‡πÅ‡∏•‡∏∞‡∏™‡∏ô‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
              this.updateFilterOptions();
            }
          } catch (error) {
            console.error('Error loading teams:', error);
            alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ' + error.message);
          } finally {
            this.isLoadingTeams = false;
          }
        },
        
        updateFilterOptions() {
          // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏ï‡πÅ‡∏•‡∏∞‡∏™‡∏ô‡∏≤‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á
          const zones = [...new Set(this.midTeams.map(t => t.zone))].filter(z => z);
          this.availableZones = zones.sort((a, b) => Number(a) - Number(b));
          
          const fields = [...new Set(this.midTeams.map(t => t.field))].filter(f => f);
          this.availableFields = fields.sort();
          
          // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏ï‡πÅ‡∏•‡∏∞‡∏™‡∏ô‡∏≤‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á
          const zones_high = [...new Set(this.highTeams.map(t => t.zone))].filter(z => z);
          this.availableZones_high = zones_high.sort((a, b) => Number(a) - Number(b));
          
          const fields_high = [...new Set(this.highTeams.map(t => t.field))].filter(f => f);
          this.availableFields_high = fields_high.sort();
        },
        
        // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        resetFilters() {
          this.filterZone = '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
          this.filterLevel = '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
          this.filterField = '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
          this.filterCompetition = '';
        },
        
        resetFilters_high() {
          this.filterZone_high = '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
          this.filterLevel_high = '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
          this.filterField_high = '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
          this.filterCompetition_high = '';
        },
        
        // ‡πÄ‡∏õ‡∏¥‡∏î filter dialog ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á
        openFilterDialogMid() {
          this.filterDialogMid = true;
        },
        
        // ‡πÄ‡∏õ‡∏¥‡∏î filter dialog ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á
        openFilterDialogHigh() {
          this.filterDialogHigh = true;
        },
        
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤ filter ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á ‡∏•‡∏á localStorage
        saveFiltersToLocalStorage() {
          const filters = {
            filterZone: this.filterZone,
            filterLevel: this.filterLevel,
            filterField: this.filterField,
            filterCompetition: this.filterCompetition
          };
          localStorage.setItem('midTeamsFilters', JSON.stringify(filters));
        },
        
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤ filter ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á ‡∏•‡∏á localStorage
        saveFiltersToLocalStorage_high() {
          const filters = {
            filterZone: this.filterZone_high,
            filterLevel: this.filterLevel_high,
            filterField: this.filterField_high,
            filterCompetition: this.filterCompetition_high
          };
          localStorage.setItem('highTeamsFilters', JSON.stringify(filters));
        },
        
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤ filter ‡πÄ‡∏õ‡πá‡∏ô default JSON ‡∏•‡∏á Google Sheets
        async saveDefaultFilter(level = 'mid') {
          this.isSavingDefaultFilter = true;
          try {
            let defaultFilter;
            if (level === 'high') {
              defaultFilter = {
                filterZone: this.filterZone_high,
                filterLevel: this.filterLevel_high,
                filterField: this.filterField_high,
                filterCompetition: this.filterCompetition_high
              };
            } else {
              defaultFilter = {
                filterZone: this.filterZone,
                filterLevel: this.filterLevel,
                filterField: this.filterField,
                filterCompetition: this.filterCompetition
              };
            }
            
            const data = await this.sendJSONPRequest({
              action: 'saveDefaultFilter',
              level: level,
              filterData: JSON.stringify(defaultFilter)
            });
            
            await this.loadDefaultFilter();
            
            if (data.success) {
              this.showSnackbar('‚úì ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤ Default Filter ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (' + (level === 'high' ? '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á' : '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á') + ')', 'success');
            } else {
              this.showSnackbar('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + data.message, 'error');
            }
          } catch (error) {
            console.error('Error saving default filter:', error);
            this.showSnackbar('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å: ' + error.message, 'error');
          } finally {
            this.isSavingDefaultFilter = false;
          }
        },
        
        // Toggle filter level (‡∏õ‡∏£‡∏∞‡∏ñ‡∏° -> ‡∏°.‡∏ï‡πâ‡∏ô -> ‡∏°.‡∏õ‡∏•‡∏≤‡∏¢ -> ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)
        toggleFilterLevel() {
          const levels = ['‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î', '‡∏õ‡∏£‡∏∞‡∏ñ‡∏°', '‡∏°.‡∏ï‡πâ‡∏ô', '‡∏°.‡∏õ‡∏•‡∏≤‡∏¢'];
          const currentIndex = levels.indexOf(this.filterLevel);
          this.filterLevel = levels[(currentIndex + 1) % levels.length];
          this.saveFiltersToLocalStorage();
        },
        
        // Toggle filter field (‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î -> A -> B)
        toggleFilterField() {
          const fields = ['‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î', 'A', 'B'];
          const currentIndex = fields.indexOf(this.filterField);
          this.filterField = fields[(currentIndex + 1) % fields.length];
          this.saveFiltersToLocalStorage();
        },
        
        // Toggle filter level ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á (‡∏õ‡∏£‡∏∞‡∏ñ‡∏° -> ‡∏°.‡∏ï‡πâ‡∏ô -> ‡∏°.‡∏õ‡∏•‡∏≤‡∏¢ -> ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)
        toggleFilterLevel_high() {
          const levels = ['‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î', '‡∏õ‡∏£‡∏∞‡∏ñ‡∏°', '‡∏°.‡∏ï‡πâ‡∏ô', '‡∏°.‡∏õ‡∏•‡∏≤‡∏¢'];
          const currentIndex = levels.indexOf(this.filterLevel_high);
          this.filterLevel_high = levels[(currentIndex + 1) % levels.length];
          this.saveFiltersToLocalStorage_high();
        },
        
        // Toggle filter field ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á (‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î -> A -> B)
        toggleFilterField_high() {
          const fields = ['‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î', 'A', 'B'];
          const currentIndex = fields.indexOf(this.filterField_high);
          this.filterField_high = fields[(currentIndex + 1) % fields.length];
          this.saveFiltersToLocalStorage_high();
        },
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πà‡∏≤ default filter ‡∏à‡∏≤‡∏Å Google Sheets
        async loadDefaultFilter() {
          try {
            const data = await this.sendJSONPRequest({ action: 'getDefaultFilter' });
            
            if (data.success && data.data) {
              // ‡πÇ‡∏´‡∏•‡∏î filter ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö mid
              if (data.data.mid) {
                try {
                  console.log('üì• [LOAD] Loading mid filter:', data.data.mid);
                  const defaultFilterMid = JSON.parse(data.data.mid);
                  this.filterZone = defaultFilterMid.filterZone || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                  this.filterLevel = defaultFilterMid.filterLevel || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                  this.filterField = defaultFilterMid.filterField || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                  this.filterCompetition = defaultFilterMid.filterCompetition || '';
                  console.log('‚úÖ [LOAD] Mid filter loaded successfully');
                } catch (error) {
                  console.error('‚ùå Error parsing defaultFilter_mid:', error);
                  console.error('Data received:', data.data.mid);
                }
              } else {
                console.log('‚ÑπÔ∏è [LOAD] No mid filter data found');
              }
              
              // ‡πÇ‡∏´‡∏•‡∏î filter ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö high
              if (data.data.high) {
                try {
                  console.log('üì• [LOAD] Loading high filter:', data.data.high);
                  const defaultFilterHigh = JSON.parse(data.data.high);
                  this.filterZone_high = defaultFilterHigh.filterZone || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                  this.filterLevel_high = defaultFilterHigh.filterLevel || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                  this.filterField_high = defaultFilterHigh.filterField || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
                  this.filterCompetition_high = defaultFilterHigh.filterCompetition || '';
                  console.log('‚úÖ [LOAD] High filter loaded successfully');
                } catch (error) {
                  console.error('‚ùå Error parsing defaultFilter_high:', error);
                  console.error('Data received:', data.data.high);
                  this.showSnackbar('‚ö†Ô∏è ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• defaultFilter_high ‡πÉ‡∏ô Google Sheets ‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö JSON', 'warning');
                }
              } else {
                console.log('‚ÑπÔ∏è [LOAD] No high filter data found');
              }
            }
          } catch (error) {
            console.error('Error loading default filter:', error);
          }
        },
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡πà‡∏≤ filter ‡∏à‡∏≤‡∏Å localStorage
        loadFiltersFromLocalStorage() {
          try {
            const saved = localStorage.getItem('midTeamsFilters');
            if (saved) {
              const filters = JSON.parse(saved);
              this.filterZone = filters.filterZone || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
              this.filterLevel = filters.filterLevel || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
              this.filterField = filters.filterField || '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î';
              this.filterCompetition = filters.filterCompetition || '';
            }
          } catch (error) {
            console.error('Error loading filters from localStorage:', error);
          }
        },
        
        sendJSONPRequest(data) {
          return new Promise((resolve, reject) => {
            const callbackName = 'jsonpCallback_' + Date.now();
            
            // Define callback function ‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á script
            window[callbackName] = function(response) {
              delete window[callbackName];
              const script = document.querySelector(`script[src*="${callbackName}"]`);
              if (script && document.body.contains(script)) {
                document.body.removeChild(script);
              }
              
              if (response.success) {
                resolve(response);
              } else {
                reject(new Error(response.message || 'Unknown error'));
              }
            };
            
            const params = new URLSearchParams({
              callback: callbackName,
              ...data
            });
            
            const url = `${this.gasUrl}?${params.toString()}`;
            
            const script = document.createElement('script');
            script.src = url;
            script.onerror = function() {
              delete window[callbackName];
              if (document.body.contains(script)) {
                document.body.removeChild(script);
              }
              reject(new Error('JSONP request failed'));
            };
            
            // Timeout 
            setTimeout(() => {
              if (window[callbackName]) {
                delete window[callbackName];
                if (document.body.contains(script)) {
                  document.body.removeChild(script);
                }
                reject(new Error('Request timeout'));
              }
            }, 15000);
            
            document.body.appendChild(script);
          });
        }
      },
      mounted() {
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á AudioContext ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ï‡∏≠‡∏ô mounted
        this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (teams + password + defaultFilter) ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
        this.loadTeamsFromGAS();
        
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ currentLevel ‡πÅ‡∏•‡∏∞ expandedMid/expandedHigh ‡∏ï‡∏≤‡∏° route ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
        if (this.$route.name && this.$route.name.startsWith('mid-')) {
          this.currentLevel = 'mid';
          this.expandedMid = true;
        } else if (this.$route.name && this.$route.name.startsWith('high-')) {
          this.currentLevel = 'high';
          this.expandedHigh = true;
        }
        
        // ‡∏£‡∏≠‡πÉ‡∏´‡πâ DOM ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡πà‡∏≠‡∏ô
        this.$nextTick(() => {
          if (this.tab === 'random') {
            this.initWheel();
          }
        });
        
        window.addEventListener("keydown", (e) => {
          if (this.tab === 'timer') {
            if (e.code === "Space") {
              e.preventDefault();
              this.toggleTimer();
            } else if (e.code === "Digit0" || e.code === "Numpad0") {
              this.resetTimer();
            } else if (e.code === "NumpadAdd") {
              this.toggleFullscreen();
            }
          } else if (this.tab === 'mid-timer') {
            if (e.code === "Space") {
              e.preventDefault();
              if (!this.midTimerRunning && !this.midTimerIsPreparing) {
                this.startMidTimer();
              } else if (this.midTimerRunning) {
                this.pauseMidTimer();
              }
            } else if (this.midTimerRunning) {
              // ‡∏Ç‡∏ì‡∏∞‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ ‡∏´‡πâ‡∏≤‡∏°‡∏Å‡∏î 0,1,3
              e.preventDefault();
            } else if (e.code === "Digit0" || e.code === "Numpad0") {
              this.resetMidTimer();
            } else if ((e.code === "Digit1" || e.code === "Numpad1") && !this.midTimerIsPreparing) {
              e.preventDefault();
              this.startMidTimerPractice();
            } else if ((e.code === "Digit3" || e.code === "Numpad3") && !this.midTimerIsPreparing) {
              e.preventDefault();
              this.startMidTimer();
            }
          } else if (this.tab === 'high-timer') {
            if (e.code === "Space") {
              e.preventDefault();
              if (!this.highTimerRunning && !this.highTimerIsPreparing) {
                this.startHighTimer();
              } else if (this.highTimerRunning) {
                this.pauseHighTimer();
              }
            } else if (this.highTimerRunning) {
              // ‡∏Ç‡∏ì‡∏∞‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ ‡∏´‡πâ‡∏≤‡∏°‡∏Å‡∏î 0,1,5
              e.preventDefault();
            } else if (e.code === "Digit0" || e.code === "Numpad0") {
              this.resetHighTimer();
            } else if ((e.code === "Digit1" || e.code === "Numpad1") && !this.highTimerIsPreparing) {
              e.preventDefault();
              this.startHighTimerPractice();
            } else if ((e.code === "Digit5" || e.code === "Numpad5") && !this.highTimerIsPreparing) {
              e.preventDefault();
              this.startHighTimer();
            }
          } else if (this.tab === 'mid-field') {
            // ‡∏™‡∏∏‡πà‡∏°‡∏™‡∏ô‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ Z
            if (e.code === "KeyZ" && this.midSelectedGrade) {
              e.preventDefault();
              this.randomField('mid', this.midSelectedGrade);
            }
          } else if (this.tab === 'high-field') {
            // ‡∏™‡∏∏‡πà‡∏°‡∏™‡∏ô‡∏≤‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏î‡πâ‡∏ß‡∏¢ Z
            if (e.code === "KeyZ" && this.highSelectedGrade) {
              e.preventDefault();
              this.randomField('high', this.highSelectedGrade);
            }
          }
        });
      },
      watch: {
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å filters ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á ‡∏•‡∏á localStorage ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
        filterZone() {
          this.saveFiltersToLocalStorage();
        },
        filterLevel() {
          this.saveFiltersToLocalStorage();
        },
        filterField() {
          this.saveFiltersToLocalStorage();
        },
        filterCompetition() {
          this.saveFiltersToLocalStorage();
        },
        
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å filters ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á ‡∏•‡∏á localStorage ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
        filterZone_high() {
          this.saveFiltersToLocalStorage_high();
        },
        filterLevel_high() {
          this.saveFiltersToLocalStorage_high();
        },
        filterField_high() {
          this.saveFiltersToLocalStorage_high();
        },
        filterCompetition_high() {
          this.saveFiltersToLocalStorage_high();
        },
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Å‡∏£‡∏≤‡∏ü‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
        sortedTeams() {
          this.$nextTick(() => {
            this.renderResultsChart();
          });
        },
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Å‡∏£‡∏≤‡∏ü‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
        sortedTeams_high() {
          this.$nextTick(() => {
            this.renderResultsChartHigh();
          });
        },
        
        tab(newTab) {
          console.log('üîç Tab changed to:', newTab);
          
          // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó currentLevel ‡∏ï‡∏≤‡∏° tab (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï URL)
          if (newTab && typeof newTab === 'string') {
            if (newTab.startsWith('high-')) {
              this.currentLevel = 'high';
              console.log('üîç Set currentLevel to: high');
            } else if (newTab.startsWith('mid-')) {
              this.currentLevel = 'mid';
              console.log('üîç Set currentLevel to: mid');
            }
          }
          
          // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó URL ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏ó‡πá‡∏ö
          if (this.$route.name !== newTab) {
            this.$router.push({ name: newTab }).catch(() => {});
          }
          
          // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç ‡πÉ‡∏´‡πâ init ‡∏ß‡∏á‡∏•‡πâ‡∏≠
          if (newTab === 'random') {
            this.$nextTick(() => {
              this.initWheel();
            });
          }
          
          // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á ‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡πÇ‡∏´‡∏•‡∏î)
          if (newTab === 'mid-teams' && this.midTeams.length === 0) {
            this.$nextTick(() => {
              this.loadTeamsFromGAS();
            });
          }
          
          // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á ‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡πÇ‡∏´‡∏•‡∏î)
          if (newTab === 'high-teams' && this.highTeams.length === 0) {
            this.$nextTick(() => {
              this.loadTeamsFromGAS();
            });
          }
          
          // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Å‡∏•‡∏≤‡∏á ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
          if (newTab === 'mid-results') {
            this.$nextTick(() => {
              this.renderResultsChart();
            });
          }
          
          // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏π‡∏á ‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
          if (newTab === 'high-results') {
            this.$nextTick(() => {
              this.renderResultsChartHigh();
            });
          }
        },
        '$route'(to) {
          // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÅ‡∏ó‡πá‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠ URL ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
          if (to.name && this.tab !== to.name) {
            this.tab = to.name;
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó currentLevel ‡πÅ‡∏•‡∏∞ expandedMid/expandedHigh ‡∏ï‡∏≤‡∏° route
            if (to.name.startsWith('mid-')) {
              this.currentLevel = 'mid';
              this.expandedMid = true;
            } else if (to.name.startsWith('high-')) {
              this.currentLevel = 'high';
              this.expandedHigh = true;
            }
          }
        }
      }
    });
  </script>

  <script src="script.js"></script>
</body>
</html>

